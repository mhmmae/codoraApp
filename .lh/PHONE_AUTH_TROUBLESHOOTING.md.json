{
    "sourceFile": "PHONE_AUTH_TROUBLESHOOTING.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752837549568,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752837549568,
            "name": "Commit-0",
            "content": "# دليل استكشاف أخطاء PhoneAuthService وإصلاحها\n\n## الأخطاء الشائعة وحلولها\n\n### 1. خطأ `internal-error`\n\n**السبب:** خطأ داخلي في Firebase، عادة مرتبط بإعدادات reCAPTCHA أو الشبكة.\n\n**الحلول:**\n\n#### للـ iOS:\n```bash\n# التحقق من Bundle ID في Firebase Console\n# التأكد من أن Bundle ID في Xcode يطابق Firebase Console\n# فحص Google Service Info.plist\n```\n\n#### للـ Android:\n```bash\n# التحقق من SHA-1 fingerprint\nkeytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android\n\n# إضافة SHA-1 إلى Firebase Console > Project Settings > Your Apps\n```\n\n#### حلول عامة:\n1. **إعادة تشغيل التطبيق**\n2. **التحقق من الاتصال بالإنترنت**\n3. **انتظار بضع دقائق ثم المحاولة مرة أخرى**\n4. **تنظيف cache التطبيق**\n\n### 2. خطأ `too-many-requests`\n\n**السبب:** تم إرسال الكثير من الطلبات في فترة قصيرة.\n\n**الحلول:**\n- انتظار 5-15 دقيقة قبل المحاولة مرة أخرى\n- استخدام أرقام هواتف مختلفة للاختبار\n- تحديد حدود أقل في اختبارات التطوير\n\n### 3. خطأ `invalid-phone-number`\n\n**السبب:** تنسيق رقم الهاتف غير صحيح.\n\n**الحلول:**\n- التأكد من استخدام رمز الدولة (+964 للعراق)\n- التأكد من أن الرقم صحيح ومكتمل\n- استخدام تنسيق E.164: `+9647XXXXXXXX`\n\n### 4. خطأ `captcha-check-failed`\n\n**السبب:** فشل في التحقق من reCAPTCHA.\n\n**الحلول للـ iOS:**\n1. التأكد من إعدادات reCAPTCHA في Firebase Console\n2. إعادة تشغيل التطبيق\n3. التحقق من إعدادات الشبكة\n\n**الحلول للـ Android:**\n1. التأكد من Google Play Services محدث\n2. التحقق من SHA-1 fingerprint\n3. إعادة بناء التطبيق\n\n### 5. خطأ `network-request-failed`\n\n**السبب:** مشكلة في الاتصال بالإنترنت.\n\n**الحلول:**\n- التحقق من اتصال الإنترنت\n- التأكد من عدم حجب Firebase من قبل جدار الحماية\n- المحاولة على شبكة مختلفة\n\n## فحص إعدادات Firebase\n\n### 1. التحقق من iOS Setup:\n\n```bash\n# في ios/Runner/Info.plist تحقق من:\n<key>CFBundleIdentifier</key>\n<string>YOUR_BUNDLE_ID</string>\n\n# تأكد من وجود GoogleService-Info.plist في المجلد الصحيح\n```\n\n### 2. التحقق من Android Setup:\n\n```bash\n# في android/app/build.gradle تحقق من:\napplicationId \"YOUR_PACKAGE_NAME\"\n\n# تأكد من وجود google-services.json في android/app/\n```\n\n### 3. فحص Firebase Console:\n\n1. **الذهاب إلى Firebase Console**\n2. **اختيار المشروع**\n3. **Project Settings > General**\n4. **التحقق من:**\n   - iOS Bundle ID\n   - Android Package Name\n   - SHA-1 Fingerprints\n\n## أدوات التشخيص\n\n### استخدام PhoneAuthTestPage:\n\n```dart\n// الانتقال لصفحة الاختبار\nGet.to(() => PhoneAuthTestPage());\n\n// أو في Routes\nstatic const String phoneAuthTest = '/phone-auth-test';\n```\n\n### فحص logs التطبيق:\n\n```bash\n# في VS Code Terminal\nflutter logs\n\n# أو\nflutter run --verbose\n```\n\n### استخدام دوال التشخيص:\n\n```dart\nfinal phoneAuthService = Get.find<PhoneAuthService>();\n\n// اختبار الخدمة\nphoneAuthService.testService();\n\n// تشخيص Firebase\nfinal diagnosis = await phoneAuthService.diagnoseFirebaseSetup();\nprint(diagnosis);\n\n// فحص رقم الهاتف\nfinal validation = phoneAuthService.validatePhoneNumber('+9647XXXXXXXX');\nprint(validation);\n```\n\n## نصائح لتجنب الأخطاء\n\n### 1. في التطوير:\n- استخدام أرقام هواتف حقيقية للاختبار\n- عدم الإفراط في إرسال الطلبات\n- اختبار على أجهزة مختلفة\n\n### 2. في الإنتاج:\n- إعداد معالجة أخطاء شاملة\n- عرض رسائل خطأ واضحة للمستخدمين\n- توفير طرق بديلة للتسجيل\n\n### 3. الأمان:\n- عدم حفظ أرقام الاختبار في الكود\n- استخدام بيئات منفصلة للتطوير والإنتاج\n- مراجعة logs بانتظام\n\n## متطلبات الشبكة\n\n### Firebase Auth يتطلب الوصول إلى:\n- `*.googleapis.com`\n- `*.firebase.com` \n- `*.google.com`\n- `identitytoolkit.googleapis.com`\n\n### للشركات/الجامعات:\nقد تحتاج لطلب إلغاء حجب هذه النطاقات من IT.\n\n## الدعم الفني\n\nإذا استمرت المشاكل:\n\n1. **جمع معلومات التشخيص**\n2. **أخذ screenshots للأخطاء**\n3. **نسخ logs التطبيق**\n4. **التواصل مع فريق التطوير**\n\n---\n\n*آخر تحديث: يناير 2025*\n"
        }
    ]
}