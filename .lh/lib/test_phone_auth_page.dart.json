{
    "sourceFile": "lib/test_phone_auth_page.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1753097375564,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1753097375564,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:get/get.dart';\nimport 'package:codora/Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ /Services/phone_auth_service.dart';\n\nclass TestPhoneAuthPage extends StatefulWidget {\n  const TestPhoneAuthPage({super.key});\n\n  @override\n  _TestPhoneAuthPageState createState() => _TestPhoneAuthPageState();\n}\n\nclass _TestPhoneAuthPageState extends State<TestPhoneAuthPage> {\n  final TextEditingController phoneController = TextEditingController();\n  final TextEditingController codeController = TextEditingController();\n  final PhoneAuthService phoneAuthService = Get.find<PhoneAuthService>();\n\n  String statusMessage = 'Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±';\n  bool isLoading = false;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù‡Ø§ØªÙ'),\n        backgroundColor: Colors.blue,\n      ),\n      body: Padding(\n        padding: EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…\n            Card(\n              child: Padding(\n                padding: EdgeInsets.all(16.0),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.start,\n                  children: [\n                    Text(\n                      'ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…',\n                      style: TextStyle(\n                        fontSize: 18,\n                        fontWeight: FontWeight.bold,\n                      ),\n                    ),\n                    SizedBox(height: 8),\n                    Text('ğŸ—ï¸ Project ID: codora-app1'),\n                    Text('ğŸ“± Package: com.homy.codora'),\n                    Text(\n                      'ğŸ”‘ SHA-1: 68:AE:1B:D8:91:FA:07:3B:73:AE:E3:A7:6C:24:BF:68:EC:0E:36:36',\n                    ),\n                    SizedBox(height: 8),\n                    Obx(\n                      () => Text(\n                        'ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©: ${phoneAuthService.isLoading ? \"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©\" : \"Ø¬Ø§Ù‡Ø²\"}',\n                      ),\n                    ),\n                    Obx(\n                      () => Text(\n                        'ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phoneAuthService.phoneNumber}',\n                      ),\n                    ),\n                    Obx(\n                      () => Text(\n                        'ğŸ”‘ Ù…Ø¹Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚: ${phoneAuthService.verificationId}',\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            ),\n\n            SizedBox(height: 16),\n\n            // Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n            Card(\n              child: Padding(\n                padding: EdgeInsets.all(16.0),\n                child: Column(\n                  children: [\n                    Text(\n                      'ğŸ“± Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚',\n                      style: TextStyle(\n                        fontSize: 18,\n                        fontWeight: FontWeight.bold,\n                      ),\n                    ),\n                    SizedBox(height: 16),\n                    TextField(\n                      controller: phoneController,\n                      keyboardType: TextInputType.phone,\n                      decoration: InputDecoration(\n                        labelText: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©)',\n                        hintText: '+966512345678',\n                        border: OutlineInputBorder(),\n                        prefixIcon: Icon(Icons.phone),\n                      ),\n                    ),\n                    SizedBox(height: 16),\n                    SizedBox(\n                      width: double.infinity,\n                      child: ElevatedButton(\n                        onPressed:\n                            isLoading ? null : () => sendVerificationCode(),\n                        style: ElevatedButton.styleFrom(\n                          padding: EdgeInsets.symmetric(vertical: 16),\n                        ),\n                        child:\n                            isLoading\n                                ? CircularProgressIndicator(color: Colors.white)\n                                : Text('Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚'),\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            ),\n\n            SizedBox(height: 16),\n\n            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²\n            Card(\n              child: Padding(\n                padding: EdgeInsets.all(16.0),\n                child: Column(\n                  children: [\n                    Text(\n                      'ğŸ”‘ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²',\n                      style: TextStyle(\n                        fontSize: 18,\n                        fontWeight: FontWeight.bold,\n                      ),\n                    ),\n                    SizedBox(height: 16),\n                    TextField(\n                      controller: codeController,\n                      keyboardType: TextInputType.number,\n                      maxLength: 6,\n                      decoration: InputDecoration(\n                        labelText: 'Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚',\n                        hintText: '123456',\n                        border: OutlineInputBorder(),\n                        prefixIcon: Icon(Icons.lock),\n                      ),\n                    ),\n                    SizedBox(height: 16),\n                    SizedBox(\n                      width: double.infinity,\n                      child: ElevatedButton(\n                        onPressed: isLoading ? null : () => verifyCode(),\n                        style: ElevatedButton.styleFrom(\n                          padding: EdgeInsets.symmetric(vertical: 16),\n                          backgroundColor: Colors.green,\n                        ),\n                        child: Text('ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²'),\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            ),\n\n            SizedBox(height: 16),\n\n            // Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„\n            Expanded(\n              child: Card(\n                child: Padding(\n                  padding: EdgeInsets.all(16.0),\n                  child: Column(\n                    crossAxisAlignment: CrossAxisAlignment.start,\n                    children: [\n                      Text(\n                        'ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø§Ù„Ø©',\n                        style: TextStyle(\n                          fontSize: 18,\n                          fontWeight: FontWeight.bold,\n                        ),\n                      ),\n                      SizedBox(height: 8),\n                      Expanded(\n                        child: Container(\n                          width: double.infinity,\n                          padding: EdgeInsets.all(12),\n                          decoration: BoxDecoration(\n                            color: Colors.grey[100],\n                            borderRadius: BorderRadius.circular(8),\n                            border: Border.all(color: Colors.grey[300]!),\n                          ),\n                          child: SingleChildScrollView(\n                            child: Text(\n                              statusMessage,\n                              style: TextStyle(fontFamily: 'monospace'),\n                            ),\n                          ),\n                        ),\n                      ),\n                    ],\n                  ),\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  void sendVerificationCode() async {\n    if (phoneController.text.trim().isEmpty) {\n      updateStatus('âŒ Ø®Ø·Ø£: ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');\n      return;\n    }\n\n    setState(() {\n      isLoading = true;\n    });\n\n    updateStatus(\n      'ğŸš€ Ø¨Ø¯Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚...\\nğŸ“± Ø§Ù„Ø±Ù‚Ù…: ${phoneController.text}',\n    );\n\n    try {\n      final result = await phoneAuthService.sendVerificationCode(\n        phoneController.text.trim(),\n      );\n\n      if (result.isSuccess) {\n        updateStatus(\n          'âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¨Ù†Ø¬Ø§Ø­!\\nğŸ”‘ Ù…Ø¹Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚: ${result.verificationId}',\n        );\n      } else {\n        updateStatus('âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${result.error}');\n      }\n    } catch (error) {\n      updateStatus('ğŸ’¥ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ${error.toString()}');\n      print('ğŸ’¥ Ø®Ø·Ø£ ÙÙŠ sendVerificationCode: $error');\n    } finally {\n      setState(() {\n        isLoading = false;\n      });\n    }\n  }\n\n  void verifyCode() async {\n    if (codeController.text.trim().isEmpty) {\n      updateStatus('âŒ Ø®Ø·Ø£: ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚');\n      return;\n    }\n\n    if (phoneAuthService.verificationId.isEmpty) {\n      updateStatus('âŒ Ø®Ø·Ø£: Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø±Ù ØªØ­Ù‚Ù‚. ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ø§Ù‹');\n      return;\n    }\n\n    setState(() {\n      isLoading = true;\n    });\n\n    updateStatus('ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²...\\nğŸ”‘ Ø§Ù„Ø±Ù…Ø²: ${codeController.text}');\n\n    try {\n      final result = await phoneAuthService.verifyCode(\n        codeController.text.trim(),\n      );\n\n      if (result.isSuccess) {\n        updateStatus(\n          'ğŸ‰ ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­!\\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${result.user?.uid ?? \"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ\"}',\n        );\n      } else {\n        updateStatus('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚: ${result.error}');\n      }\n    } catch (error) {\n      updateStatus('ğŸ’¥ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚: ${error.toString()}');\n      print('ğŸ’¥ Ø®Ø·Ø£ ÙÙŠ verifyCode: $error');\n    } finally {\n      setState(() {\n        isLoading = false;\n      });\n    }\n  }\n\n  void updateStatus(String message) {\n    setState(() {\n      final timestamp = DateTime.now().toString().substring(11, 19);\n      statusMessage = '[$timestamp] $message\\n\\n$statusMessage';\n    });\n  }\n\n  @override\n  void dispose() {\n    phoneController.dispose();\n    codeController.dispose();\n    super.dispose();\n  }\n}\n"
        }
    ]
}