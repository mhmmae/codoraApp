{
    "sourceFile": "lib/الكود الخاص بتطبيق البائع/seller_app_auth/ui/SellerRegistrationScreen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1752487221618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752487321729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1022 @@\n+import 'dart:io';\n+import 'package:flutter/material.dart';\n+import 'package:flutter_screenutil/flutter_screenutil.dart';\n+import 'package:get/get.dart';\n+import 'package:google_maps_flutter/google_maps_flutter.dart';\n+import 'package:image_picker/image_picker.dart';\n+\n+import '../controllers/SellerRegistrationController.dart';\n+\n+class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n+  const SellerRegistrationScreen({super.key});\n+\n+  // Color scheme احترافي للتطبيق\n+  static const Color primaryColor = Color(0xFF6366F1);\n+  static const Color secondaryColor = Color(0xFF8B5CF6);\n+  static const Color accentColor = Color(0xFF06B6D4);\n+  static const Color successColor = Color(0xFF10B981);\n+  static const Color warningColor = Color(0xFFF59E0B);\n+  static const Color errorColor = Color(0xFFEF4444);\n+  static const Color surfaceColor = Color(0xFFF8FAFC);\n+  static const Color cardColor = Color(0xFFFFFFFF);\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    return Scaffold(\n+      body: Container(\n+        decoration: const BoxDecoration(\n+          gradient: LinearGradient(\n+            begin: Alignment.topLeft,\n+            end: Alignment.bottomRight,\n+            colors: [Color(0xFFF8FAFC), Color(0xFFE2E8F0)],\n+          ),\n+        ),\n+        child: SafeArea(\n+          child: Column(\n+            children: [\n+              _buildAppBar(),\n+              Expanded(\n+                child: SingleChildScrollView(\n+                  physics: const BouncingScrollPhysics(),\n+                  child: Padding(\n+                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n+                    child: Column(\n+                      children: [\n+                        SizedBox(height: 20.h),\n+                        _buildWelcomeSection(),\n+                        _buildPersonalInfoSection(),\n+                        _buildImagesSection(),\n+                        _buildLocationSection(),\n+                        SizedBox(height: 30.h),\n+                        _buildRegisterButton(),\n+                        SizedBox(height: 30.h),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildAppBar() {\n+    return Container(\n+      padding: EdgeInsets.all(20.w),\n+      decoration: BoxDecoration(\n+        color: cardColor,\n+        boxShadow: [\n+          BoxShadow(\n+            color: Colors.black.withOpacity(0.05),\n+            spreadRadius: 0,\n+            blurRadius: 10.r,\n+            offset: Offset(0, 2.h),\n+          ),\n+        ],\n+      ),\n+      child: Row(\n+        children: [\n+          GestureDetector(\n+            onTap: () => Get.back(),\n+            child: Container(\n+              padding: EdgeInsets.all(12.w),\n+              decoration: BoxDecoration(\n+                color: surfaceColor,\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.1)),\n+              ),\n+              child: Icon(\n+                Icons.arrow_back_ios_rounded,\n+                color: primaryColor,\n+                size: 20.sp,\n+              ),\n+            ),\n+          ),\n+          SizedBox(width: 16.w),\n+          Expanded(\n+            child: Text(\n+              'تسجيل حساب بائع',\n+              style: TextStyle(\n+                fontSize: 22.sp,\n+                fontWeight: FontWeight.bold,\n+                color: const Color(0xFF1F2937),\n+              ),\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildWelcomeSection() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1000),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 50 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              padding: EdgeInsets.all(24.w),\n+              margin: EdgeInsets.only(bottom: 30.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.topLeft,\n+                  end: Alignment.bottomRight,\n+                ),\n+                borderRadius: BorderRadius.circular(24.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.3),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 10.h),\n+                  ),\n+                ],\n+              ),\n+              child: Column(\n+                children: [\n+                  Container(\n+                    padding: EdgeInsets.all(16.w),\n+                    decoration: BoxDecoration(\n+                      color: Colors.white.withOpacity(0.2),\n+                      shape: BoxShape.circle,\n+                    ),\n+                    child: Icon(\n+                      Icons.store_rounded,\n+                      size: 40.sp,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 16.h),\n+                  Text(\n+                    'انضم لشبكة البائعين',\n+                    style: TextStyle(\n+                      fontSize: 20.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 8.h),\n+                  Text(\n+                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n+                    textAlign: TextAlign.center,\n+                    style: TextStyle(\n+                      fontSize: 14.sp,\n+                      color: Colors.white.withOpacity(0.9),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildPersonalInfoSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle(\n+          'المعلومات الشخصية',\n+          icon: Icons.person_rounded,\n+        ),\n+        _buildEnhancedTextField(\n+          controller: controller.sellerNameController,\n+          label: 'اسم البائع',\n+          icon: Icons.person_outline_rounded,\n+          animationDelay: 0,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopNameController,\n+          label: 'اسم المتجر',\n+          icon: Icons.store_outlined,\n+          animationDelay: 1,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopPhoneNumberController,\n+          label: 'رقم الهاتف',\n+          icon: Icons.phone_outlined,\n+          keyboardType: TextInputType.phone,\n+          animationDelay: 2,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagesSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة البائع الشخصية',\n+          imageFile: controller.sellerProfileImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: true,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: true,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n+          animationDelay: 0,\n+        ),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة واجهة المتجر',\n+          imageFile: controller.shopFrontImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: false,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: false,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n+          animationDelay: 1,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n+        TweenAnimationBuilder<double>(\n+          tween: Tween(begin: 0.0, end: 1.0),\n+          duration: const Duration(milliseconds: 800),\n+          builder: (context, value, child) {\n+            return Transform.scale(\n+              scale: 0.8 + (0.2 * value),\n+              child: Opacity(\n+                opacity: value,\n+                child: Container(\n+                  margin: EdgeInsets.symmetric(vertical: 12.h),\n+                  decoration: BoxDecoration(\n+                    color: cardColor,\n+                    borderRadius: BorderRadius.circular(20.r),\n+                    boxShadow: [\n+                      BoxShadow(\n+                        color: primaryColor.withOpacity(0.1),\n+                        spreadRadius: 0,\n+                        blurRadius: 20.r,\n+                        offset: Offset(0, 8.h),\n+                      ),\n+                    ],\n+                  ),\n+                  child: Padding(\n+                    padding: EdgeInsets.all(20.w),\n+                    child: Column(\n+                      children: [\n+                        Row(\n+                          children: [\n+                            Container(\n+                              padding: EdgeInsets.all(12.w),\n+                              decoration: BoxDecoration(\n+                                gradient: LinearGradient(\n+                                  colors: [accentColor, primaryColor],\n+                                  begin: Alignment.topLeft,\n+                                  end: Alignment.bottomRight,\n+                                ),\n+                                borderRadius: BorderRadius.circular(12.r),\n+                              ),\n+                              child: Icon(\n+                                Icons.my_location_rounded,\n+                                color: Colors.white,\n+                                size: 24.sp,\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                            Expanded(\n+                              child: Column(\n+                                crossAxisAlignment: CrossAxisAlignment.start,\n+                                children: [\n+                                  Text(\n+                                    'موقع المتجر',\n+                                    style: TextStyle(\n+                                      fontSize: 16.sp,\n+                                      fontWeight: FontWeight.w600,\n+                                      color: const Color(0xFF1F2937),\n+                                    ),\n+                                  ),\n+                                  Text(\n+                                    'اختر موقع متجرك على الخريطة',\n+                                    style: TextStyle(\n+                                      fontSize: 12.sp,\n+                                      color: const Color(0xFF6B7280),\n+                                    ),\n+                                  ),\n+                                ],\n+                              ),\n+                            ),\n+                          ],\n+                        ),\n+                        SizedBox(height: 20.h),\n+                        Obx(\n+                          () =>\n+                              controller.shopLocation.value != null\n+                                  ? _buildLocationPreview()\n+                                  : _buildLocationSelector(),\n+                        ),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            );\n+          },\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationPreview() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 200.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2)),\n+          ),\n+          child: ClipRRect(\n+            borderRadius: BorderRadius.circular(16.r),\n+            child: GoogleMap(\n+              initialCameraPosition: CameraPosition(\n+                target: controller.shopLocation.value!,\n+                zoom: 16,\n+              ),\n+              markers: {\n+                Marker(\n+                  markerId: const MarkerId('selected_location'),\n+                  position: controller.shopLocation.value!,\n+                  icon: BitmapDescriptor.defaultMarkerWithHue(\n+                    BitmapDescriptor.hueBlue,\n+                  ),\n+                ),\n+              },\n+              onTap: (latLng) => controller.shopLocation.value = latLng,\n+              myLocationButtonEnabled: false,\n+              zoomControlsEnabled: false,\n+            ),\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.edit_location_rounded,\n+          label: \"تعديل الموقع\",\n+          onPressed: () => controller.shopLocation.value = null,\n+          gradient: [warningColor, primaryColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSelector() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 150.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            color: surfaceColor,\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2), width: 2),\n+          ),\n+          child: Column(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(16.w),\n+                decoration: BoxDecoration(\n+                  color: primaryColor.withOpacity(0.1),\n+                  shape: BoxShape.circle,\n+                ),\n+                child: Icon(\n+                  Icons.add_location_alt_rounded,\n+                  size: 32.sp,\n+                  color: primaryColor,\n+                ),\n+              ),\n+              SizedBox(height: 12.h),\n+              Text(\n+                'اختر موقع المتجر',\n+                style: TextStyle(\n+                  fontSize: 14.sp,\n+                  color: const Color(0xFF6B7280),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.location_searching_rounded,\n+          label: \"تحديد الموقع\",\n+          onPressed: () => _showLocationPicker(),\n+          gradient: [successColor, accentColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  void _showLocationPicker() {\n+    Get.dialog(\n+      Dialog(\n+        backgroundColor: Colors.transparent,\n+        child: Container(\n+          height: 500.h,\n+          margin: EdgeInsets.all(20.w),\n+          decoration: BoxDecoration(\n+            color: cardColor,\n+            borderRadius: BorderRadius.circular(20.r),\n+          ),\n+          child: Column(\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(20.w),\n+                decoration: BoxDecoration(\n+                  gradient: LinearGradient(\n+                    colors: [primaryColor, secondaryColor],\n+                    begin: Alignment.centerLeft,\n+                    end: Alignment.centerRight,\n+                  ),\n+                  borderRadius: BorderRadius.only(\n+                    topLeft: Radius.circular(20.r),\n+                    topRight: Radius.circular(20.r),\n+                  ),\n+                ),\n+                child: Row(\n+                  children: [\n+                    Icon(\n+                      Icons.location_on_rounded,\n+                      color: Colors.white,\n+                      size: 24.sp,\n+                    ),\n+                    SizedBox(width: 12.w),\n+                    Expanded(\n+                      child: Text(\n+                        'اختر موقع المتجر',\n+                        style: TextStyle(\n+                          fontSize: 18.sp,\n+                          fontWeight: FontWeight.bold,\n+                          color: Colors.white,\n+                        ),\n+                      ),\n+                    ),\n+                    GestureDetector(\n+                      onTap: () => Get.back(),\n+                      child: Container(\n+                        padding: EdgeInsets.all(8.w),\n+                        decoration: BoxDecoration(\n+                          color: Colors.white.withOpacity(0.2),\n+                          shape: BoxShape.circle,\n+                        ),\n+                        child: Icon(\n+                          Icons.close_rounded,\n+                          color: Colors.white,\n+                          size: 20.sp,\n+                        ),\n+                      ),\n+                    ),\n+                  ],\n+                ),\n+              ),\n+              Expanded(\n+                child: GoogleMap(\n+                  initialCameraPosition: const CameraPosition(\n+                    target: LatLng(24.7136, 46.6753), // Riyadh\n+                    zoom: 12,\n+                  ),\n+                  onTap: (latLng) {\n+                    controller.shopLocation.value = latLng;\n+                    Get.back();\n+                  },\n+                  myLocationButtonEnabled: true,\n+                  myLocationEnabled: true,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildRegisterButton() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1200),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              height: 56.h,\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.4),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                ],\n+              ),\n+              child: Obx(\n+                () => Material(\n+                  color: Colors.transparent,\n+                  child: InkWell(\n+                    onTap:\n+                        controller.isLoading.value\n+                            ? null\n+                            : () =>\n+                                controller\n+                                    .initiatePhoneVerificationAndCollectData(),\n+                    borderRadius: BorderRadius.circular(16.r),\n+                    child: Container(\n+                      padding: EdgeInsets.symmetric(horizontal: 24.w),\n+                      child: Row(\n+                        mainAxisAlignment: MainAxisAlignment.center,\n+                        children: [\n+                          if (controller.isLoading.value) ...[\n+                            SizedBox(\n+                              width: 24.w,\n+                              height: 24.h,\n+                              child: CircularProgressIndicator(\n+                                strokeWidth: 2,\n+                                valueColor: AlwaysStoppedAnimation<Color>(\n+                                  Colors.white,\n+                                ),\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                          ] else ...[\n+                            Icon(\n+                              Icons.check_circle_rounded,\n+                              color: Colors.white,\n+                              size: 24.sp,\n+                            ),\n+                            SizedBox(width: 12.w),\n+                          ],\n+                          Text(\n+                            controller.isLoading.value\n+                                ? 'جارٍ التسجيل...'\n+                                : 'إنشاء حساب البائع',\n+                            style: TextStyle(\n+                              fontSize: 18.sp,\n+                              fontWeight: FontWeight.bold,\n+                              color: Colors.white,\n+                            ),\n+                          ),\n+                        ],\n+                      ),\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 800),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 30 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n+              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [\n+                    primaryColor.withOpacity(0.1),\n+                    secondaryColor.withOpacity(0.1),\n+                  ],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.2)),\n+              ),\n+              child: Row(\n+                children: [\n+                  if (icon != null) ...[\n+                    Container(\n+                      padding: EdgeInsets.all(8.w),\n+                      decoration: BoxDecoration(\n+                        color: primaryColor.withOpacity(0.1),\n+                        borderRadius: BorderRadius.circular(8.r),\n+                      ),\n+                      child: Icon(icon, color: primaryColor, size: 20.sp),\n+                    ),\n+                    SizedBox(width: 12.w),\n+                  ],\n+                  Text(\n+                    title,\n+                    style: TextStyle(\n+                      fontSize: 18.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: const Color(0xFF1F2937),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedTextField({\n+    required TextEditingController controller,\n+    required String label,\n+    required IconData icon,\n+    required int animationDelay,\n+    TextInputType? keyboardType,\n+    String? hintText,\n+    int? maxLines,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(50 * (1 - value), 0),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.08),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 4.h),\n+                  ),\n+                ],\n+                border: Border.all(\n+                  color: primaryColor.withOpacity(0.1),\n+                  width: 1,\n+                ),\n+              ),\n+              child: TextFormField(\n+                controller: controller,\n+                keyboardType: keyboardType,\n+                maxLines: maxLines ?? 1,\n+                style: TextStyle(\n+                  fontSize: 16.sp,\n+                  color: const Color(0xFF1F2937),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+                decoration: InputDecoration(\n+                  labelText: label,\n+                  hintText: hintText,\n+                  prefixIcon: Container(\n+                    margin: EdgeInsets.all(12.w),\n+                    padding: EdgeInsets.all(8.w),\n+                    decoration: BoxDecoration(\n+                      gradient: LinearGradient(\n+                        colors: [\n+                          primaryColor.withOpacity(0.1),\n+                          secondaryColor.withOpacity(0.1),\n+                        ],\n+                        begin: Alignment.topLeft,\n+                        end: Alignment.bottomRight,\n+                      ),\n+                      borderRadius: BorderRadius.circular(8.r),\n+                    ),\n+                    child: Icon(icon, color: primaryColor, size: 20.sp),\n+                  ),\n+                  labelStyle: TextStyle(\n+                    color: const Color(0xFF6B7280),\n+                    fontSize: 14.sp,\n+                    fontWeight: FontWeight.w500,\n+                  ),\n+                  hintStyle: TextStyle(\n+                    color: const Color(0xFF9CA3AF),\n+                    fontSize: 14.sp,\n+                  ),\n+                  border: InputBorder.none,\n+                  contentPadding: EdgeInsets.symmetric(\n+                    horizontal: 16.w,\n+                    vertical: 20.h,\n+                  ),\n+                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedImagePicker({\n+    required String label,\n+    required Rxn<File> imageFile,\n+    required Function() onGalleryPressed,\n+    required Function() onCameraPressed,\n+    required Function()? onRemovePressed,\n+    required int animationDelay,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.symmetric(vertical: 12.h),\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(20.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.1),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                  BoxShadow(\n+                    color: Colors.black.withOpacity(0.05),\n+                    spreadRadius: 0,\n+                    blurRadius: 10.r,\n+                    offset: Offset(0, 2.h),\n+                  ),\n+                ],\n+              ),\n+              child: Padding(\n+                padding: EdgeInsets.all(20.w),\n+                child: Column(\n+                  crossAxisAlignment: CrossAxisAlignment.start,\n+                  children: [\n+                    Row(\n+                      children: [\n+                        Container(\n+                          padding: EdgeInsets.all(8.w),\n+                          decoration: BoxDecoration(\n+                            gradient: LinearGradient(\n+                              colors: [primaryColor, secondaryColor],\n+                              begin: Alignment.topLeft,\n+                              end: Alignment.bottomRight,\n+                            ),\n+                            borderRadius: BorderRadius.circular(10.r),\n+                          ),\n+                          child: Icon(\n+                            Icons.add_a_photo_rounded,\n+                            color: Colors.white,\n+                            size: 20.sp,\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: Text(\n+                            label,\n+                            style: TextStyle(\n+                              fontSize: 16.sp,\n+                              fontWeight: FontWeight.w600,\n+                              color: const Color(0xFF1F2937),\n+                            ),\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Center(\n+                      child: Obx(\n+                        () =>\n+                            imageFile.value != null\n+                                ? _buildImagePreview(\n+                                  imageFile.value!,\n+                                  onRemovePressed,\n+                                )\n+                                : _buildImagePlaceholder(),\n+                      ),\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Row(\n+                      children: [\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.photo_library_rounded,\n+                            label: \"المعرض\",\n+                            onPressed: onGalleryPressed,\n+                            gradient: [accentColor, primaryColor],\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.camera_alt_rounded,\n+                            label: \"الكاميرا\",\n+                            onPressed: onCameraPressed,\n+                            gradient: [successColor, accentColor],\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                  ],\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n+    return Stack(\n+      alignment: Alignment.topRight,\n+      children: [\n+        Hero(\n+          tag: imageFile.path,\n+          child: Container(\n+            height: 200.h,\n+            width: double.infinity,\n+            decoration: BoxDecoration(\n+              borderRadius: BorderRadius.circular(16.r),\n+              boxShadow: [\n+                BoxShadow(\n+                  color: Colors.black.withOpacity(0.1),\n+                  spreadRadius: 0,\n+                  blurRadius: 10.r,\n+                  offset: Offset(0, 4.h),\n+                ),\n+              ],\n+            ),\n+            child: ClipRRect(\n+              borderRadius: BorderRadius.circular(16.r),\n+              child: Image.file(imageFile, fit: BoxFit.cover),\n+            ),\n+          ),\n+        ),\n+        if (onRemovePressed != null)\n+          Positioned(\n+            top: 8.h,\n+            right: 8.w,\n+            child: GestureDetector(\n+              onTap: onRemovePressed,\n+              child: Container(\n+                padding: EdgeInsets.all(8.w),\n+                decoration: BoxDecoration(\n+                  color: errorColor,\n+                  shape: BoxShape.circle,\n+                  boxShadow: [\n+                    BoxShadow(\n+                      color: errorColor.withOpacity(0.3),\n+                      spreadRadius: 0,\n+                      blurRadius: 8.r,\n+                      offset: Offset(0, 2.h),\n+                    ),\n+                  ],\n+                ),\n+                child: Icon(\n+                  Icons.close_rounded,\n+                  color: Colors.white,\n+                  size: 18.sp,\n+                ),\n+              ),\n+            ),\n+          ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagePlaceholder() {\n+    return Container(\n+      height: 200.h,\n+      width: double.infinity,\n+      decoration: BoxDecoration(\n+        color: surfaceColor,\n+        borderRadius: BorderRadius.circular(16.r),\n+        border: Border.all(\n+          color: primaryColor.withOpacity(0.2),\n+          width: 2,\n+          strokeAlign: BorderSide.strokeAlignInside,\n+        ),\n+      ),\n+      child: Column(\n+        mainAxisAlignment: MainAxisAlignment.center,\n+        children: [\n+          TweenAnimationBuilder<double>(\n+            tween: Tween(begin: 0.0, end: 1.0),\n+            duration: const Duration(milliseconds: 1500),\n+            builder: (context, value, child) {\n+              return Transform.scale(\n+                scale: 0.8 + (0.2 * value),\n+                child: Container(\n+                  padding: EdgeInsets.all(16.w),\n+                  decoration: BoxDecoration(\n+                    color: primaryColor.withOpacity(0.1),\n+                    shape: BoxShape.circle,\n+                  ),\n+                  child: Icon(\n+                    Icons.add_photo_alternate_rounded,\n+                    size: 48.sp,\n+                    color: primaryColor.withOpacity(0.7),\n+                  ),\n+                ),\n+              );\n+            },\n+          ),\n+          SizedBox(height: 12.h),\n+          Text(\n+            'اضغط لإضافة صورة',\n+            style: TextStyle(\n+              fontSize: 14.sp,\n+              color: const Color(0xFF6B7280),\n+              fontWeight: FontWeight.w500,\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildImageButton({\n+    required IconData icon,\n+    required String label,\n+    required VoidCallback onPressed,\n+    required List<Color> gradient,\n+  }) {\n+    return Material(\n+      color: Colors.transparent,\n+      child: InkWell(\n+        onTap: onPressed,\n+        borderRadius: BorderRadius.circular(12.r),\n+        child: Container(\n+          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n+          decoration: BoxDecoration(\n+            gradient: LinearGradient(\n+              colors: gradient,\n+              begin: Alignment.topLeft,\n+              end: Alignment.bottomRight,\n+            ),\n+            borderRadius: BorderRadius.circular(12.r),\n+            boxShadow: [\n+              BoxShadow(\n+                color: gradient.first.withOpacity(0.3),\n+                spreadRadius: 0,\n+                blurRadius: 8.r,\n+                offset: Offset(0, 4.h),\n+              ),\n+            ],\n+          ),\n+          child: Row(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Icon(icon, color: Colors.white, size: 20.sp),\n+              SizedBox(width: 8.w),\n+              Text(\n+                label,\n+                style: TextStyle(\n+                  color: Colors.white,\n+                  fontSize: 14.sp,\n+                  fontWeight: FontWeight.w600,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+}\n"
                },
                {
                    "date": 1752487425968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1022 @@\n+import 'dart:io';\n+import 'package:flutter/material.dart';\n+import 'package:flutter_screenutil/flutter_screenutil.dart';\n+import 'package:get/get.dart';\n+import 'package:google_maps_flutter/google_maps_flutter.dart';\n+import 'package:image_picker/image_picker.dart';\n+\n+import '../controllers/SellerRegistrationController.dart';\n+\n+class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n+  const SellerRegistrationScreen({super.key});\n+\n+  // Color scheme احترافي للتطبيق\n+  static const Color primaryColor = Color(0xFF6366F1);\n+  static const Color secondaryColor = Color(0xFF8B5CF6);\n+  static const Color accentColor = Color(0xFF06B6D4);\n+  static const Color successColor = Color(0xFF10B981);\n+  static const Color warningColor = Color(0xFFF59E0B);\n+  static const Color errorColor = Color(0xFFEF4444);\n+  static const Color surfaceColor = Color(0xFFF8FAFC);\n+  static const Color cardColor = Color(0xFFFFFFFF);\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    return Scaffold(\n+      body: Container(\n+        decoration: const BoxDecoration(\n+          gradient: LinearGradient(\n+            begin: Alignment.topLeft,\n+            end: Alignment.bottomRight,\n+            colors: [Color(0xFFF8FAFC), Color(0xFFE2E8F0)],\n+          ),\n+        ),\n+        child: SafeArea(\n+          child: Column(\n+            children: [\n+              _buildAppBar(),\n+              Expanded(\n+                child: SingleChildScrollView(\n+                  physics: const BouncingScrollPhysics(),\n+                  child: Padding(\n+                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n+                    child: Column(\n+                      children: [\n+                        SizedBox(height: 20.h),\n+                        _buildWelcomeSection(),\n+                        _buildPersonalInfoSection(),\n+                        _buildImagesSection(),\n+                        _buildLocationSection(),\n+                        SizedBox(height: 30.h),\n+                        _buildRegisterButton(),\n+                        SizedBox(height: 30.h),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildAppBar() {\n+    return Container(\n+      padding: EdgeInsets.all(20.w),\n+      decoration: BoxDecoration(\n+        color: cardColor,\n+        boxShadow: [\n+          BoxShadow(\n+            color: Colors.black.withOpacity(0.05),\n+            spreadRadius: 0,\n+            blurRadius: 10.r,\n+            offset: Offset(0, 2.h),\n+          ),\n+        ],\n+      ),\n+      child: Row(\n+        children: [\n+          GestureDetector(\n+            onTap: () => Get.back(),\n+            child: Container(\n+              padding: EdgeInsets.all(12.w),\n+              decoration: BoxDecoration(\n+                color: surfaceColor,\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.1)),\n+              ),\n+              child: Icon(\n+                Icons.arrow_back_ios_rounded,\n+                color: primaryColor,\n+                size: 20.sp,\n+              ),\n+            ),\n+          ),\n+          SizedBox(width: 16.w),\n+          Expanded(\n+            child: Text(\n+              'تسجيل حساب بائع',\n+              style: TextStyle(\n+                fontSize: 22.sp,\n+                fontWeight: FontWeight.bold,\n+                color: const Color(0xFF1F2937),\n+              ),\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildWelcomeSection() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1000),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 50 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              padding: EdgeInsets.all(24.w),\n+              margin: EdgeInsets.only(bottom: 30.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.topLeft,\n+                  end: Alignment.bottomRight,\n+                ),\n+                borderRadius: BorderRadius.circular(24.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.3),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 10.h),\n+                  ),\n+                ],\n+              ),\n+              child: Column(\n+                children: [\n+                  Container(\n+                    padding: EdgeInsets.all(16.w),\n+                    decoration: BoxDecoration(\n+                      color: Colors.white.withOpacity(0.2),\n+                      shape: BoxShape.circle,\n+                    ),\n+                    child: Icon(\n+                      Icons.store_rounded,\n+                      size: 40.sp,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 16.h),\n+                  Text(\n+                    'انضم لشبكة البائعين',\n+                    style: TextStyle(\n+                      fontSize: 20.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 8.h),\n+                  Text(\n+                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n+                    textAlign: TextAlign.center,\n+                    style: TextStyle(\n+                      fontSize: 14.sp,\n+                      color: Colors.white.withOpacity(0.9),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildPersonalInfoSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle(\n+          'المعلومات الشخصية',\n+          icon: Icons.person_rounded,\n+        ),\n+        _buildEnhancedTextField(\n+          controller: controller.sellerNameController,\n+          label: 'اسم البائع',\n+          icon: Icons.person_outline_rounded,\n+          animationDelay: 0,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopNameController,\n+          label: 'اسم المتجر',\n+          icon: Icons.store_outlined,\n+          animationDelay: 1,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopPhoneNumberController,\n+          label: 'رقم الهاتف',\n+          icon: Icons.phone_outlined,\n+          keyboardType: TextInputType.phone,\n+          animationDelay: 2,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagesSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة البائع الشخصية',\n+          imageFile: controller.sellerProfileImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: true,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: true,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n+          animationDelay: 0,\n+        ),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة واجهة المتجر',\n+          imageFile: controller.shopFrontImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: false,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: false,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n+          animationDelay: 1,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n+        TweenAnimationBuilder<double>(\n+          tween: Tween(begin: 0.0, end: 1.0),\n+          duration: const Duration(milliseconds: 800),\n+          builder: (context, value, child) {\n+            return Transform.scale(\n+              scale: 0.8 + (0.2 * value),\n+              child: Opacity(\n+                opacity: value,\n+                child: Container(\n+                  margin: EdgeInsets.symmetric(vertical: 12.h),\n+                  decoration: BoxDecoration(\n+                    color: cardColor,\n+                    borderRadius: BorderRadius.circular(20.r),\n+                    boxShadow: [\n+                      BoxShadow(\n+                        color: primaryColor.withOpacity(0.1),\n+                        spreadRadius: 0,\n+                        blurRadius: 20.r,\n+                        offset: Offset(0, 8.h),\n+                      ),\n+                    ],\n+                  ),\n+                  child: Padding(\n+                    padding: EdgeInsets.all(20.w),\n+                    child: Column(\n+                      children: [\n+                        Row(\n+                          children: [\n+                            Container(\n+                              padding: EdgeInsets.all(12.w),\n+                              decoration: BoxDecoration(\n+                                gradient: LinearGradient(\n+                                  colors: [accentColor, primaryColor],\n+                                  begin: Alignment.topLeft,\n+                                  end: Alignment.bottomRight,\n+                                ),\n+                                borderRadius: BorderRadius.circular(12.r),\n+                              ),\n+                              child: Icon(\n+                                Icons.my_location_rounded,\n+                                color: Colors.white,\n+                                size: 24.sp,\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                            Expanded(\n+                              child: Column(\n+                                crossAxisAlignment: CrossAxisAlignment.start,\n+                                children: [\n+                                  Text(\n+                                    'موقع المتجر',\n+                                    style: TextStyle(\n+                                      fontSize: 16.sp,\n+                                      fontWeight: FontWeight.w600,\n+                                      color: const Color(0xFF1F2937),\n+                                    ),\n+                                  ),\n+                                  Text(\n+                                    'اختر موقع متجرك على الخريطة',\n+                                    style: TextStyle(\n+                                      fontSize: 12.sp,\n+                                      color: const Color(0xFF6B7280),\n+                                    ),\n+                                  ),\n+                                ],\n+                              ),\n+                            ),\n+                          ],\n+                        ),\n+                        SizedBox(height: 20.h),\n+                        Obx(\n+                          () =>\n+                              controller.shopLocation.value != null\n+                                  ? _buildLocationPreview()\n+                                  : _buildLocationSelector(),\n+                        ),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            );\n+          },\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationPreview() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 200.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2)),\n+          ),\n+          child: ClipRRect(\n+            borderRadius: BorderRadius.circular(16.r),\n+            child: GoogleMap(\n+              initialCameraPosition: CameraPosition(\n+                target: controller.shopLocation.value!,\n+                zoom: 16,\n+              ),\n+              markers: {\n+                Marker(\n+                  markerId: const MarkerId('selected_location'),\n+                  position: controller.shopLocation.value!,\n+                  icon: BitmapDescriptor.defaultMarkerWithHue(\n+                    BitmapDescriptor.hueBlue,\n+                  ),\n+                ),\n+              },\n+              onTap: (latLng) => controller.shopLocation.value = latLng,\n+              myLocationButtonEnabled: false,\n+              zoomControlsEnabled: false,\n+            ),\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.edit_location_rounded,\n+          label: \"تعديل الموقع\",\n+          onPressed: () => controller.shopLocation.value = null,\n+          gradient: [warningColor, primaryColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSelector() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 150.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            color: surfaceColor,\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2), width: 2),\n+          ),\n+          child: Column(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(16.w),\n+                decoration: BoxDecoration(\n+                  color: primaryColor.withOpacity(0.1),\n+                  shape: BoxShape.circle,\n+                ),\n+                child: Icon(\n+                  Icons.add_location_alt_rounded,\n+                  size: 32.sp,\n+                  color: primaryColor,\n+                ),\n+              ),\n+              SizedBox(height: 12.h),\n+              Text(\n+                'اختر موقع المتجر',\n+                style: TextStyle(\n+                  fontSize: 14.sp,\n+                  color: const Color(0xFF6B7280),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.location_searching_rounded,\n+          label: \"تحديد الموقع\",\n+          onPressed: () => _showLocationPicker(),\n+          gradient: [successColor, accentColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  void _showLocationPicker() {\n+    Get.dialog(\n+      Dialog(\n+        backgroundColor: Colors.transparent,\n+        child: Container(\n+          height: 500.h,\n+          margin: EdgeInsets.all(20.w),\n+          decoration: BoxDecoration(\n+            color: cardColor,\n+            borderRadius: BorderRadius.circular(20.r),\n+          ),\n+          child: Column(\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(20.w),\n+                decoration: BoxDecoration(\n+                  gradient: LinearGradient(\n+                    colors: [primaryColor, secondaryColor],\n+                    begin: Alignment.centerLeft,\n+                    end: Alignment.centerRight,\n+                  ),\n+                  borderRadius: BorderRadius.only(\n+                    topLeft: Radius.circular(20.r),\n+                    topRight: Radius.circular(20.r),\n+                  ),\n+                ),\n+                child: Row(\n+                  children: [\n+                    Icon(\n+                      Icons.location_on_rounded,\n+                      color: Colors.white,\n+                      size: 24.sp,\n+                    ),\n+                    SizedBox(width: 12.w),\n+                    Expanded(\n+                      child: Text(\n+                        'اختر موقع المتجر',\n+                        style: TextStyle(\n+                          fontSize: 18.sp,\n+                          fontWeight: FontWeight.bold,\n+                          color: Colors.white,\n+                        ),\n+                      ),\n+                    ),\n+                    GestureDetector(\n+                      onTap: () => Get.back(),\n+                      child: Container(\n+                        padding: EdgeInsets.all(8.w),\n+                        decoration: BoxDecoration(\n+                          color: Colors.white.withOpacity(0.2),\n+                          shape: BoxShape.circle,\n+                        ),\n+                        child: Icon(\n+                          Icons.close_rounded,\n+                          color: Colors.white,\n+                          size: 20.sp,\n+                        ),\n+                      ),\n+                    ),\n+                  ],\n+                ),\n+              ),\n+              Expanded(\n+                child: GoogleMap(\n+                  initialCameraPosition: const CameraPosition(\n+                    target: LatLng(24.7136, 46.6753), // Riyadh\n+                    zoom: 12,\n+                  ),\n+                  onTap: (latLng) {\n+                    controller.shopLocation.value = latLng;\n+                    Get.back();\n+                  },\n+                  myLocationButtonEnabled: true,\n+                  myLocationEnabled: true,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildRegisterButton() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1200),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              height: 56.h,\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.4),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                ],\n+              ),\n+              child: Obx(\n+                () => Material(\n+                  color: Colors.transparent,\n+                  child: InkWell(\n+                    onTap:\n+                        controller.isLoading.value\n+                            ? null\n+                            : () =>\n+                                controller\n+                                    .initiatePhoneVerificationAndCollectData(),\n+                    borderRadius: BorderRadius.circular(16.r),\n+                    child: Container(\n+                      padding: EdgeInsets.symmetric(horizontal: 24.w),\n+                      child: Row(\n+                        mainAxisAlignment: MainAxisAlignment.center,\n+                        children: [\n+                          if (controller.isLoading.value) ...[\n+                            SizedBox(\n+                              width: 24.w,\n+                              height: 24.h,\n+                              child: CircularProgressIndicator(\n+                                strokeWidth: 2,\n+                                valueColor: AlwaysStoppedAnimation<Color>(\n+                                  Colors.white,\n+                                ),\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                          ] else ...[\n+                            Icon(\n+                              Icons.check_circle_rounded,\n+                              color: Colors.white,\n+                              size: 24.sp,\n+                            ),\n+                            SizedBox(width: 12.w),\n+                          ],\n+                          Text(\n+                            controller.isLoading.value\n+                                ? 'جارٍ التسجيل...'\n+                                : 'إنشاء حساب البائع',\n+                            style: TextStyle(\n+                              fontSize: 18.sp,\n+                              fontWeight: FontWeight.bold,\n+                              color: Colors.white,\n+                            ),\n+                          ),\n+                        ],\n+                      ),\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 800),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 30 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n+              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [\n+                    primaryColor.withOpacity(0.1),\n+                    secondaryColor.withOpacity(0.1),\n+                  ],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.2)),\n+              ),\n+              child: Row(\n+                children: [\n+                  if (icon != null) ...[\n+                    Container(\n+                      padding: EdgeInsets.all(8.w),\n+                      decoration: BoxDecoration(\n+                        color: primaryColor.withOpacity(0.1),\n+                        borderRadius: BorderRadius.circular(8.r),\n+                      ),\n+                      child: Icon(icon, color: primaryColor, size: 20.sp),\n+                    ),\n+                    SizedBox(width: 12.w),\n+                  ],\n+                  Text(\n+                    title,\n+                    style: TextStyle(\n+                      fontSize: 18.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: const Color(0xFF1F2937),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedTextField({\n+    required TextEditingController controller,\n+    required String label,\n+    required IconData icon,\n+    required int animationDelay,\n+    TextInputType? keyboardType,\n+    String? hintText,\n+    int? maxLines,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(50 * (1 - value), 0),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.08),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 4.h),\n+                  ),\n+                ],\n+                border: Border.all(\n+                  color: primaryColor.withOpacity(0.1),\n+                  width: 1,\n+                ),\n+              ),\n+              child: TextFormField(\n+                controller: controller,\n+                keyboardType: keyboardType,\n+                maxLines: maxLines ?? 1,\n+                style: TextStyle(\n+                  fontSize: 16.sp,\n+                  color: const Color(0xFF1F2937),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+                decoration: InputDecoration(\n+                  labelText: label,\n+                  hintText: hintText,\n+                  prefixIcon: Container(\n+                    margin: EdgeInsets.all(12.w),\n+                    padding: EdgeInsets.all(8.w),\n+                    decoration: BoxDecoration(\n+                      gradient: LinearGradient(\n+                        colors: [\n+                          primaryColor.withOpacity(0.1),\n+                          secondaryColor.withOpacity(0.1),\n+                        ],\n+                        begin: Alignment.topLeft,\n+                        end: Alignment.bottomRight,\n+                      ),\n+                      borderRadius: BorderRadius.circular(8.r),\n+                    ),\n+                    child: Icon(icon, color: primaryColor, size: 20.sp),\n+                  ),\n+                  labelStyle: TextStyle(\n+                    color: const Color(0xFF6B7280),\n+                    fontSize: 14.sp,\n+                    fontWeight: FontWeight.w500,\n+                  ),\n+                  hintStyle: TextStyle(\n+                    color: const Color(0xFF9CA3AF),\n+                    fontSize: 14.sp,\n+                  ),\n+                  border: InputBorder.none,\n+                  contentPadding: EdgeInsets.symmetric(\n+                    horizontal: 16.w,\n+                    vertical: 20.h,\n+                  ),\n+                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedImagePicker({\n+    required String label,\n+    required Rxn<File> imageFile,\n+    required Function() onGalleryPressed,\n+    required Function() onCameraPressed,\n+    required Function()? onRemovePressed,\n+    required int animationDelay,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.symmetric(vertical: 12.h),\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(20.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.1),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                  BoxShadow(\n+                    color: Colors.black.withOpacity(0.05),\n+                    spreadRadius: 0,\n+                    blurRadius: 10.r,\n+                    offset: Offset(0, 2.h),\n+                  ),\n+                ],\n+              ),\n+              child: Padding(\n+                padding: EdgeInsets.all(20.w),\n+                child: Column(\n+                  crossAxisAlignment: CrossAxisAlignment.start,\n+                  children: [\n+                    Row(\n+                      children: [\n+                        Container(\n+                          padding: EdgeInsets.all(8.w),\n+                          decoration: BoxDecoration(\n+                            gradient: LinearGradient(\n+                              colors: [primaryColor, secondaryColor],\n+                              begin: Alignment.topLeft,\n+                              end: Alignment.bottomRight,\n+                            ),\n+                            borderRadius: BorderRadius.circular(10.r),\n+                          ),\n+                          child: Icon(\n+                            Icons.add_a_photo_rounded,\n+                            color: Colors.white,\n+                            size: 20.sp,\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: Text(\n+                            label,\n+                            style: TextStyle(\n+                              fontSize: 16.sp,\n+                              fontWeight: FontWeight.w600,\n+                              color: const Color(0xFF1F2937),\n+                            ),\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Center(\n+                      child: Obx(\n+                        () =>\n+                            imageFile.value != null\n+                                ? _buildImagePreview(\n+                                  imageFile.value!,\n+                                  onRemovePressed,\n+                                )\n+                                : _buildImagePlaceholder(),\n+                      ),\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Row(\n+                      children: [\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.photo_library_rounded,\n+                            label: \"المعرض\",\n+                            onPressed: onGalleryPressed,\n+                            gradient: [accentColor, primaryColor],\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.camera_alt_rounded,\n+                            label: \"الكاميرا\",\n+                            onPressed: onCameraPressed,\n+                            gradient: [successColor, accentColor],\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                  ],\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n+    return Stack(\n+      alignment: Alignment.topRight,\n+      children: [\n+        Hero(\n+          tag: imageFile.path,\n+          child: Container(\n+            height: 200.h,\n+            width: double.infinity,\n+            decoration: BoxDecoration(\n+              borderRadius: BorderRadius.circular(16.r),\n+              boxShadow: [\n+                BoxShadow(\n+                  color: Colors.black.withOpacity(0.1),\n+                  spreadRadius: 0,\n+                  blurRadius: 10.r,\n+                  offset: Offset(0, 4.h),\n+                ),\n+              ],\n+            ),\n+            child: ClipRRect(\n+              borderRadius: BorderRadius.circular(16.r),\n+              child: Image.file(imageFile, fit: BoxFit.cover),\n+            ),\n+          ),\n+        ),\n+        if (onRemovePressed != null)\n+          Positioned(\n+            top: 8.h,\n+            right: 8.w,\n+            child: GestureDetector(\n+              onTap: onRemovePressed,\n+              child: Container(\n+                padding: EdgeInsets.all(8.w),\n+                decoration: BoxDecoration(\n+                  color: errorColor,\n+                  shape: BoxShape.circle,\n+                  boxShadow: [\n+                    BoxShadow(\n+                      color: errorColor.withOpacity(0.3),\n+                      spreadRadius: 0,\n+                      blurRadius: 8.r,\n+                      offset: Offset(0, 2.h),\n+                    ),\n+                  ],\n+                ),\n+                child: Icon(\n+                  Icons.close_rounded,\n+                  color: Colors.white,\n+                  size: 18.sp,\n+                ),\n+              ),\n+            ),\n+          ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagePlaceholder() {\n+    return Container(\n+      height: 200.h,\n+      width: double.infinity,\n+      decoration: BoxDecoration(\n+        color: surfaceColor,\n+        borderRadius: BorderRadius.circular(16.r),\n+        border: Border.all(\n+          color: primaryColor.withOpacity(0.2),\n+          width: 2,\n+          strokeAlign: BorderSide.strokeAlignInside,\n+        ),\n+      ),\n+      child: Column(\n+        mainAxisAlignment: MainAxisAlignment.center,\n+        children: [\n+          TweenAnimationBuilder<double>(\n+            tween: Tween(begin: 0.0, end: 1.0),\n+            duration: const Duration(milliseconds: 1500),\n+            builder: (context, value, child) {\n+              return Transform.scale(\n+                scale: 0.8 + (0.2 * value),\n+                child: Container(\n+                  padding: EdgeInsets.all(16.w),\n+                  decoration: BoxDecoration(\n+                    color: primaryColor.withOpacity(0.1),\n+                    shape: BoxShape.circle,\n+                  ),\n+                  child: Icon(\n+                    Icons.add_photo_alternate_rounded,\n+                    size: 48.sp,\n+                    color: primaryColor.withOpacity(0.7),\n+                  ),\n+                ),\n+              );\n+            },\n+          ),\n+          SizedBox(height: 12.h),\n+          Text(\n+            'اضغط لإضافة صورة',\n+            style: TextStyle(\n+              fontSize: 14.sp,\n+              color: const Color(0xFF6B7280),\n+              fontWeight: FontWeight.w500,\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildImageButton({\n+    required IconData icon,\n+    required String label,\n+    required VoidCallback onPressed,\n+    required List<Color> gradient,\n+  }) {\n+    return Material(\n+      color: Colors.transparent,\n+      child: InkWell(\n+        onTap: onPressed,\n+        borderRadius: BorderRadius.circular(12.r),\n+        child: Container(\n+          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n+          decoration: BoxDecoration(\n+            gradient: LinearGradient(\n+              colors: gradient,\n+              begin: Alignment.topLeft,\n+              end: Alignment.bottomRight,\n+            ),\n+            borderRadius: BorderRadius.circular(12.r),\n+            boxShadow: [\n+              BoxShadow(\n+                color: gradient.first.withOpacity(0.3),\n+                spreadRadius: 0,\n+                blurRadius: 8.r,\n+                offset: Offset(0, 4.h),\n+              ),\n+            ],\n+          ),\n+          child: Row(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Icon(icon, color: Colors.white, size: 20.sp),\n+              SizedBox(width: 8.w),\n+              Text(\n+                label,\n+                style: TextStyle(\n+                  color: Colors.white,\n+                  fontSize: 14.sp,\n+                  fontWeight: FontWeight.w600,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+}\n"
                },
                {
                    "date": 1752488107530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1022 @@\n+import 'dart:io';\n+import 'package:flutter/material.dart';\n+import 'package:flutter_screenutil/flutter_screenutil.dart';\n+import 'package:get/get.dart';\n+import 'package:google_maps_flutter/google_maps_flutter.dart';\n+import 'package:image_picker/image_picker.dart';\n+\n+import '../controllers/SellerRegistrationController.dart';\n+\n+class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n+  const SellerRegistrationScreen({super.key});\n+\n+  // Color scheme احترافي للتطبيق\n+  static const Color primaryColor = Color(0xFF6366F1);\n+  static const Color secondaryColor = Color(0xFF8B5CF6);\n+  static const Color accentColor = Color(0xFF06B6D4);\n+  static const Color successColor = Color(0xFF10B981);\n+  static const Color warningColor = Color(0xFFF59E0B);\n+  static const Color errorColor = Color(0xFFEF4444);\n+  static const Color surfaceColor = Color(0xFFF8FAFC);\n+  static const Color cardColor = Color(0xFFFFFFFF);\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    return Scaffold(\n+      body: Container(\n+        decoration: const BoxDecoration(\n+          gradient: LinearGradient(\n+            begin: Alignment.topLeft,\n+            end: Alignment.bottomRight,\n+            colors: [Color(0xFFF8FAFC), Color(0xFFE2E8F0)],\n+          ),\n+        ),\n+        child: SafeArea(\n+          child: Column(\n+            children: [\n+              _buildAppBar(),\n+              Expanded(\n+                child: SingleChildScrollView(\n+                  physics: const BouncingScrollPhysics(),\n+                  child: Padding(\n+                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n+                    child: Column(\n+                      children: [\n+                        SizedBox(height: 20.h),\n+                        _buildWelcomeSection(),\n+                        _buildPersonalInfoSection(),\n+                        _buildImagesSection(),\n+                        _buildLocationSection(),\n+                        SizedBox(height: 30.h),\n+                        _buildRegisterButton(),\n+                        SizedBox(height: 30.h),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildAppBar() {\n+    return Container(\n+      padding: EdgeInsets.all(20.w),\n+      decoration: BoxDecoration(\n+        color: cardColor,\n+        boxShadow: [\n+          BoxShadow(\n+            color: Colors.black.withOpacity(0.05),\n+            spreadRadius: 0,\n+            blurRadius: 10.r,\n+            offset: Offset(0, 2.h),\n+          ),\n+        ],\n+      ),\n+      child: Row(\n+        children: [\n+          GestureDetector(\n+            onTap: () => Get.back(),\n+            child: Container(\n+              padding: EdgeInsets.all(12.w),\n+              decoration: BoxDecoration(\n+                color: surfaceColor,\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.1)),\n+              ),\n+              child: Icon(\n+                Icons.arrow_back_ios_rounded,\n+                color: primaryColor,\n+                size: 20.sp,\n+              ),\n+            ),\n+          ),\n+          SizedBox(width: 16.w),\n+          Expanded(\n+            child: Text(\n+              'تسجيل حساب بائع',\n+              style: TextStyle(\n+                fontSize: 22.sp,\n+                fontWeight: FontWeight.bold,\n+                color: const Color(0xFF1F2937),\n+              ),\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildWelcomeSection() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1000),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 50 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              padding: EdgeInsets.all(24.w),\n+              margin: EdgeInsets.only(bottom: 30.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.topLeft,\n+                  end: Alignment.bottomRight,\n+                ),\n+                borderRadius: BorderRadius.circular(24.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.3),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 10.h),\n+                  ),\n+                ],\n+              ),\n+              child: Column(\n+                children: [\n+                  Container(\n+                    padding: EdgeInsets.all(16.w),\n+                    decoration: BoxDecoration(\n+                      color: Colors.white.withOpacity(0.2),\n+                      shape: BoxShape.circle,\n+                    ),\n+                    child: Icon(\n+                      Icons.store_rounded,\n+                      size: 40.sp,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 16.h),\n+                  Text(\n+                    'انضم لشبكة البائعين',\n+                    style: TextStyle(\n+                      fontSize: 20.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 8.h),\n+                  Text(\n+                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n+                    textAlign: TextAlign.center,\n+                    style: TextStyle(\n+                      fontSize: 14.sp,\n+                      color: Colors.white.withOpacity(0.9),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildPersonalInfoSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle(\n+          'المعلومات الشخصية',\n+          icon: Icons.person_rounded,\n+        ),\n+        _buildEnhancedTextField(\n+          controller: controller.sellerNameController,\n+          label: 'اسم البائع',\n+          icon: Icons.person_outline_rounded,\n+          animationDelay: 0,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopNameController,\n+          label: 'اسم المتجر',\n+          icon: Icons.store_outlined,\n+          animationDelay: 1,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopPhoneNumberController,\n+          label: 'رقم الهاتف',\n+          icon: Icons.phone_outlined,\n+          keyboardType: TextInputType.phone,\n+          animationDelay: 2,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagesSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة البائع الشخصية',\n+          imageFile: controller.sellerProfileImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: true,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: true,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n+          animationDelay: 0,\n+        ),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة واجهة المتجر',\n+          imageFile: controller.shopFrontImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: false,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: false,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n+          animationDelay: 1,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n+        TweenAnimationBuilder<double>(\n+          tween: Tween(begin: 0.0, end: 1.0),\n+          duration: const Duration(milliseconds: 800),\n+          builder: (context, value, child) {\n+            return Transform.scale(\n+              scale: 0.8 + (0.2 * value),\n+              child: Opacity(\n+                opacity: value,\n+                child: Container(\n+                  margin: EdgeInsets.symmetric(vertical: 12.h),\n+                  decoration: BoxDecoration(\n+                    color: cardColor,\n+                    borderRadius: BorderRadius.circular(20.r),\n+                    boxShadow: [\n+                      BoxShadow(\n+                        color: primaryColor.withOpacity(0.1),\n+                        spreadRadius: 0,\n+                        blurRadius: 20.r,\n+                        offset: Offset(0, 8.h),\n+                      ),\n+                    ],\n+                  ),\n+                  child: Padding(\n+                    padding: EdgeInsets.all(20.w),\n+                    child: Column(\n+                      children: [\n+                        Row(\n+                          children: [\n+                            Container(\n+                              padding: EdgeInsets.all(12.w),\n+                              decoration: BoxDecoration(\n+                                gradient: LinearGradient(\n+                                  colors: [accentColor, primaryColor],\n+                                  begin: Alignment.topLeft,\n+                                  end: Alignment.bottomRight,\n+                                ),\n+                                borderRadius: BorderRadius.circular(12.r),\n+                              ),\n+                              child: Icon(\n+                                Icons.my_location_rounded,\n+                                color: Colors.white,\n+                                size: 24.sp,\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                            Expanded(\n+                              child: Column(\n+                                crossAxisAlignment: CrossAxisAlignment.start,\n+                                children: [\n+                                  Text(\n+                                    'موقع المتجر',\n+                                    style: TextStyle(\n+                                      fontSize: 16.sp,\n+                                      fontWeight: FontWeight.w600,\n+                                      color: const Color(0xFF1F2937),\n+                                    ),\n+                                  ),\n+                                  Text(\n+                                    'اختر موقع متجرك على الخريطة',\n+                                    style: TextStyle(\n+                                      fontSize: 12.sp,\n+                                      color: const Color(0xFF6B7280),\n+                                    ),\n+                                  ),\n+                                ],\n+                              ),\n+                            ),\n+                          ],\n+                        ),\n+                        SizedBox(height: 20.h),\n+                        Obx(\n+                          () =>\n+                              controller.shopLocation.value != null\n+                                  ? _buildLocationPreview()\n+                                  : _buildLocationSelector(),\n+                        ),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            );\n+          },\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationPreview() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 200.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2)),\n+          ),\n+          child: ClipRRect(\n+            borderRadius: BorderRadius.circular(16.r),\n+            child: GoogleMap(\n+              initialCameraPosition: CameraPosition(\n+                target: controller.shopLocation.value!,\n+                zoom: 16,\n+              ),\n+              markers: {\n+                Marker(\n+                  markerId: const MarkerId('selected_location'),\n+                  position: controller.shopLocation.value!,\n+                  icon: BitmapDescriptor.defaultMarkerWithHue(\n+                    BitmapDescriptor.hueBlue,\n+                  ),\n+                ),\n+              },\n+              onTap: (latLng) => controller.shopLocation.value = latLng,\n+              myLocationButtonEnabled: false,\n+              zoomControlsEnabled: false,\n+            ),\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.edit_location_rounded,\n+          label: \"تعديل الموقع\",\n+          onPressed: () => controller.shopLocation.value = null,\n+          gradient: [warningColor, primaryColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSelector() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 150.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            color: surfaceColor,\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2), width: 2),\n+          ),\n+          child: Column(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(16.w),\n+                decoration: BoxDecoration(\n+                  color: primaryColor.withOpacity(0.1),\n+                  shape: BoxShape.circle,\n+                ),\n+                child: Icon(\n+                  Icons.add_location_alt_rounded,\n+                  size: 32.sp,\n+                  color: primaryColor,\n+                ),\n+              ),\n+              SizedBox(height: 12.h),\n+              Text(\n+                'اختر موقع المتجر',\n+                style: TextStyle(\n+                  fontSize: 14.sp,\n+                  color: const Color(0xFF6B7280),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.location_searching_rounded,\n+          label: \"تحديد الموقع\",\n+          onPressed: () => _showLocationPicker(),\n+          gradient: [successColor, accentColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  void _showLocationPicker() {\n+    Get.dialog(\n+      Dialog(\n+        backgroundColor: Colors.transparent,\n+        child: Container(\n+          height: 500.h,\n+          margin: EdgeInsets.all(20.w),\n+          decoration: BoxDecoration(\n+            color: cardColor,\n+            borderRadius: BorderRadius.circular(20.r),\n+          ),\n+          child: Column(\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(20.w),\n+                decoration: BoxDecoration(\n+                  gradient: LinearGradient(\n+                    colors: [primaryColor, secondaryColor],\n+                    begin: Alignment.centerLeft,\n+                    end: Alignment.centerRight,\n+                  ),\n+                  borderRadius: BorderRadius.only(\n+                    topLeft: Radius.circular(20.r),\n+                    topRight: Radius.circular(20.r),\n+                  ),\n+                ),\n+                child: Row(\n+                  children: [\n+                    Icon(\n+                      Icons.location_on_rounded,\n+                      color: Colors.white,\n+                      size: 24.sp,\n+                    ),\n+                    SizedBox(width: 12.w),\n+                    Expanded(\n+                      child: Text(\n+                        'اختر موقع المتجر',\n+                        style: TextStyle(\n+                          fontSize: 18.sp,\n+                          fontWeight: FontWeight.bold,\n+                          color: Colors.white,\n+                        ),\n+                      ),\n+                    ),\n+                    GestureDetector(\n+                      onTap: () => Get.back(),\n+                      child: Container(\n+                        padding: EdgeInsets.all(8.w),\n+                        decoration: BoxDecoration(\n+                          color: Colors.white.withOpacity(0.2),\n+                          shape: BoxShape.circle,\n+                        ),\n+                        child: Icon(\n+                          Icons.close_rounded,\n+                          color: Colors.white,\n+                          size: 20.sp,\n+                        ),\n+                      ),\n+                    ),\n+                  ],\n+                ),\n+              ),\n+              Expanded(\n+                child: GoogleMap(\n+                  initialCameraPosition: const CameraPosition(\n+                    target: LatLng(24.7136, 46.6753), // Riyadh\n+                    zoom: 12,\n+                  ),\n+                  onTap: (latLng) {\n+                    controller.shopLocation.value = latLng;\n+                    Get.back();\n+                  },\n+                  myLocationButtonEnabled: true,\n+                  myLocationEnabled: true,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildRegisterButton() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1200),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              height: 56.h,\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.4),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                ],\n+              ),\n+              child: Obx(\n+                () => Material(\n+                  color: Colors.transparent,\n+                  child: InkWell(\n+                    onTap:\n+                        controller.isLoading.value\n+                            ? null\n+                            : () =>\n+                                controller\n+                                    .initiatePhoneVerificationAndCollectData(),\n+                    borderRadius: BorderRadius.circular(16.r),\n+                    child: Container(\n+                      padding: EdgeInsets.symmetric(horizontal: 24.w),\n+                      child: Row(\n+                        mainAxisAlignment: MainAxisAlignment.center,\n+                        children: [\n+                          if (controller.isLoading.value) ...[\n+                            SizedBox(\n+                              width: 24.w,\n+                              height: 24.h,\n+                              child: CircularProgressIndicator(\n+                                strokeWidth: 2,\n+                                valueColor: AlwaysStoppedAnimation<Color>(\n+                                  Colors.white,\n+                                ),\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                          ] else ...[\n+                            Icon(\n+                              Icons.check_circle_rounded,\n+                              color: Colors.white,\n+                              size: 24.sp,\n+                            ),\n+                            SizedBox(width: 12.w),\n+                          ],\n+                          Text(\n+                            controller.isLoading.value\n+                                ? 'جارٍ التسجيل...'\n+                                : 'إنشاء حساب البائع',\n+                            style: TextStyle(\n+                              fontSize: 18.sp,\n+                              fontWeight: FontWeight.bold,\n+                              color: Colors.white,\n+                            ),\n+                          ),\n+                        ],\n+                      ),\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 800),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 30 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n+              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [\n+                    primaryColor.withOpacity(0.1),\n+                    secondaryColor.withOpacity(0.1),\n+                  ],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.2)),\n+              ),\n+              child: Row(\n+                children: [\n+                  if (icon != null) ...[\n+                    Container(\n+                      padding: EdgeInsets.all(8.w),\n+                      decoration: BoxDecoration(\n+                        color: primaryColor.withOpacity(0.1),\n+                        borderRadius: BorderRadius.circular(8.r),\n+                      ),\n+                      child: Icon(icon, color: primaryColor, size: 20.sp),\n+                    ),\n+                    SizedBox(width: 12.w),\n+                  ],\n+                  Text(\n+                    title,\n+                    style: TextStyle(\n+                      fontSize: 18.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: const Color(0xFF1F2937),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedTextField({\n+    required TextEditingController controller,\n+    required String label,\n+    required IconData icon,\n+    required int animationDelay,\n+    TextInputType? keyboardType,\n+    String? hintText,\n+    int? maxLines,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(50 * (1 - value), 0),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.08),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 4.h),\n+                  ),\n+                ],\n+                border: Border.all(\n+                  color: primaryColor.withOpacity(0.1),\n+                  width: 1,\n+                ),\n+              ),\n+              child: TextFormField(\n+                controller: controller,\n+                keyboardType: keyboardType,\n+                maxLines: maxLines ?? 1,\n+                style: TextStyle(\n+                  fontSize: 16.sp,\n+                  color: const Color(0xFF1F2937),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+                decoration: InputDecoration(\n+                  labelText: label,\n+                  hintText: hintText,\n+                  prefixIcon: Container(\n+                    margin: EdgeInsets.all(12.w),\n+                    padding: EdgeInsets.all(8.w),\n+                    decoration: BoxDecoration(\n+                      gradient: LinearGradient(\n+                        colors: [\n+                          primaryColor.withOpacity(0.1),\n+                          secondaryColor.withOpacity(0.1),\n+                        ],\n+                        begin: Alignment.topLeft,\n+                        end: Alignment.bottomRight,\n+                      ),\n+                      borderRadius: BorderRadius.circular(8.r),\n+                    ),\n+                    child: Icon(icon, color: primaryColor, size: 20.sp),\n+                  ),\n+                  labelStyle: TextStyle(\n+                    color: const Color(0xFF6B7280),\n+                    fontSize: 14.sp,\n+                    fontWeight: FontWeight.w500,\n+                  ),\n+                  hintStyle: TextStyle(\n+                    color: const Color(0xFF9CA3AF),\n+                    fontSize: 14.sp,\n+                  ),\n+                  border: InputBorder.none,\n+                  contentPadding: EdgeInsets.symmetric(\n+                    horizontal: 16.w,\n+                    vertical: 20.h,\n+                  ),\n+                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedImagePicker({\n+    required String label,\n+    required Rxn<File> imageFile,\n+    required Function() onGalleryPressed,\n+    required Function() onCameraPressed,\n+    required Function()? onRemovePressed,\n+    required int animationDelay,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.symmetric(vertical: 12.h),\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(20.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.1),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                  BoxShadow(\n+                    color: Colors.black.withOpacity(0.05),\n+                    spreadRadius: 0,\n+                    blurRadius: 10.r,\n+                    offset: Offset(0, 2.h),\n+                  ),\n+                ],\n+              ),\n+              child: Padding(\n+                padding: EdgeInsets.all(20.w),\n+                child: Column(\n+                  crossAxisAlignment: CrossAxisAlignment.start,\n+                  children: [\n+                    Row(\n+                      children: [\n+                        Container(\n+                          padding: EdgeInsets.all(8.w),\n+                          decoration: BoxDecoration(\n+                            gradient: LinearGradient(\n+                              colors: [primaryColor, secondaryColor],\n+                              begin: Alignment.topLeft,\n+                              end: Alignment.bottomRight,\n+                            ),\n+                            borderRadius: BorderRadius.circular(10.r),\n+                          ),\n+                          child: Icon(\n+                            Icons.add_a_photo_rounded,\n+                            color: Colors.white,\n+                            size: 20.sp,\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: Text(\n+                            label,\n+                            style: TextStyle(\n+                              fontSize: 16.sp,\n+                              fontWeight: FontWeight.w600,\n+                              color: const Color(0xFF1F2937),\n+                            ),\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Center(\n+                      child: Obx(\n+                        () =>\n+                            imageFile.value != null\n+                                ? _buildImagePreview(\n+                                  imageFile.value!,\n+                                  onRemovePressed,\n+                                )\n+                                : _buildImagePlaceholder(),\n+                      ),\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Row(\n+                      children: [\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.photo_library_rounded,\n+                            label: \"المعرض\",\n+                            onPressed: onGalleryPressed,\n+                            gradient: [accentColor, primaryColor],\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.camera_alt_rounded,\n+                            label: \"الكاميرا\",\n+                            onPressed: onCameraPressed,\n+                            gradient: [successColor, accentColor],\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                  ],\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n+    return Stack(\n+      alignment: Alignment.topRight,\n+      children: [\n+        Hero(\n+          tag: imageFile.path,\n+          child: Container(\n+            height: 200.h,\n+            width: double.infinity,\n+            decoration: BoxDecoration(\n+              borderRadius: BorderRadius.circular(16.r),\n+              boxShadow: [\n+                BoxShadow(\n+                  color: Colors.black.withOpacity(0.1),\n+                  spreadRadius: 0,\n+                  blurRadius: 10.r,\n+                  offset: Offset(0, 4.h),\n+                ),\n+              ],\n+            ),\n+            child: ClipRRect(\n+              borderRadius: BorderRadius.circular(16.r),\n+              child: Image.file(imageFile, fit: BoxFit.cover),\n+            ),\n+          ),\n+        ),\n+        if (onRemovePressed != null)\n+          Positioned(\n+            top: 8.h,\n+            right: 8.w,\n+            child: GestureDetector(\n+              onTap: onRemovePressed,\n+              child: Container(\n+                padding: EdgeInsets.all(8.w),\n+                decoration: BoxDecoration(\n+                  color: errorColor,\n+                  shape: BoxShape.circle,\n+                  boxShadow: [\n+                    BoxShadow(\n+                      color: errorColor.withOpacity(0.3),\n+                      spreadRadius: 0,\n+                      blurRadius: 8.r,\n+                      offset: Offset(0, 2.h),\n+                    ),\n+                  ],\n+                ),\n+                child: Icon(\n+                  Icons.close_rounded,\n+                  color: Colors.white,\n+                  size: 18.sp,\n+                ),\n+              ),\n+            ),\n+          ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagePlaceholder() {\n+    return Container(\n+      height: 200.h,\n+      width: double.infinity,\n+      decoration: BoxDecoration(\n+        color: surfaceColor,\n+        borderRadius: BorderRadius.circular(16.r),\n+        border: Border.all(\n+          color: primaryColor.withOpacity(0.2),\n+          width: 2,\n+          strokeAlign: BorderSide.strokeAlignInside,\n+        ),\n+      ),\n+      child: Column(\n+        mainAxisAlignment: MainAxisAlignment.center,\n+        children: [\n+          TweenAnimationBuilder<double>(\n+            tween: Tween(begin: 0.0, end: 1.0),\n+            duration: const Duration(milliseconds: 1500),\n+            builder: (context, value, child) {\n+              return Transform.scale(\n+                scale: 0.8 + (0.2 * value),\n+                child: Container(\n+                  padding: EdgeInsets.all(16.w),\n+                  decoration: BoxDecoration(\n+                    color: primaryColor.withOpacity(0.1),\n+                    shape: BoxShape.circle,\n+                  ),\n+                  child: Icon(\n+                    Icons.add_photo_alternate_rounded,\n+                    size: 48.sp,\n+                    color: primaryColor.withOpacity(0.7),\n+                  ),\n+                ),\n+              );\n+            },\n+          ),\n+          SizedBox(height: 12.h),\n+          Text(\n+            'اضغط لإضافة صورة',\n+            style: TextStyle(\n+              fontSize: 14.sp,\n+              color: const Color(0xFF6B7280),\n+              fontWeight: FontWeight.w500,\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildImageButton({\n+    required IconData icon,\n+    required String label,\n+    required VoidCallback onPressed,\n+    required List<Color> gradient,\n+  }) {\n+    return Material(\n+      color: Colors.transparent,\n+      child: InkWell(\n+        onTap: onPressed,\n+        borderRadius: BorderRadius.circular(12.r),\n+        child: Container(\n+          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n+          decoration: BoxDecoration(\n+            gradient: LinearGradient(\n+              colors: gradient,\n+              begin: Alignment.topLeft,\n+              end: Alignment.bottomRight,\n+            ),\n+            borderRadius: BorderRadius.circular(12.r),\n+            boxShadow: [\n+              BoxShadow(\n+                color: gradient.first.withOpacity(0.3),\n+                spreadRadius: 0,\n+                blurRadius: 8.r,\n+                offset: Offset(0, 4.h),\n+              ),\n+            ],\n+          ),\n+          child: Row(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Icon(icon, color: Colors.white, size: 20.sp),\n+              SizedBox(width: 8.w),\n+              Text(\n+                label,\n+                style: TextStyle(\n+                  color: Colors.white,\n+                  fontSize: 14.sp,\n+                  fontWeight: FontWeight.w600,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+}\n"
                },
                {
                    "date": 1752488116033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1022 @@\n+import 'dart:io';\n+import 'package:flutter/material.dart';\n+import 'package:flutter_screenutil/flutter_screenutil.dart';\n+import 'package:get/get.dart';\n+import 'package:google_maps_flutter/google_maps_flutter.dart';\n+import 'package:image_picker/image_picker.dart';\n+\n+import '../controllers/SellerRegistrationController.dart';\n+\n+class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n+  const SellerRegistrationScreen({super.key});\n+\n+  // Color scheme احترافي للتطبيق\n+  static const Color primaryColor = Color(0xFF6366F1);\n+  static const Color secondaryColor = Color(0xFF8B5CF6);\n+  static const Color accentColor = Color(0xFF06B6D4);\n+  static const Color successColor = Color(0xFF10B981);\n+  static const Color warningColor = Color(0xFFF59E0B);\n+  static const Color errorColor = Color(0xFFEF4444);\n+  static const Color surfaceColor = Color(0xFFF8FAFC);\n+  static const Color cardColor = Color(0xFFFFFFFF);\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    return Scaffold(\n+      body: Container(\n+        decoration: const BoxDecoration(\n+          gradient: LinearGradient(\n+            begin: Alignment.topLeft,\n+            end: Alignment.bottomRight,\n+            colors: [Color(0xFFF8FAFC), Color(0xFFE2E8F0)],\n+          ),\n+        ),\n+        child: SafeArea(\n+          child: Column(\n+            children: [\n+              _buildAppBar(),\n+              Expanded(\n+                child: SingleChildScrollView(\n+                  physics: const BouncingScrollPhysics(),\n+                  child: Padding(\n+                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n+                    child: Column(\n+                      children: [\n+                        SizedBox(height: 20.h),\n+                        _buildWelcomeSection(),\n+                        _buildPersonalInfoSection(),\n+                        _buildImagesSection(),\n+                        _buildLocationSection(),\n+                        SizedBox(height: 30.h),\n+                        _buildRegisterButton(),\n+                        SizedBox(height: 30.h),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildAppBar() {\n+    return Container(\n+      padding: EdgeInsets.all(20.w),\n+      decoration: BoxDecoration(\n+        color: cardColor,\n+        boxShadow: [\n+          BoxShadow(\n+            color: Colors.black.withOpacity(0.05),\n+            spreadRadius: 0,\n+            blurRadius: 10.r,\n+            offset: Offset(0, 2.h),\n+          ),\n+        ],\n+      ),\n+      child: Row(\n+        children: [\n+          GestureDetector(\n+            onTap: () => Get.back(),\n+            child: Container(\n+              padding: EdgeInsets.all(12.w),\n+              decoration: BoxDecoration(\n+                color: surfaceColor,\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.1)),\n+              ),\n+              child: Icon(\n+                Icons.arrow_back_ios_rounded,\n+                color: primaryColor,\n+                size: 20.sp,\n+              ),\n+            ),\n+          ),\n+          SizedBox(width: 16.w),\n+          Expanded(\n+            child: Text(\n+              'تسجيل حساب بائع',\n+              style: TextStyle(\n+                fontSize: 22.sp,\n+                fontWeight: FontWeight.bold,\n+                color: const Color(0xFF1F2937),\n+              ),\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildWelcomeSection() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1000),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 50 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              padding: EdgeInsets.all(24.w),\n+              margin: EdgeInsets.only(bottom: 30.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.topLeft,\n+                  end: Alignment.bottomRight,\n+                ),\n+                borderRadius: BorderRadius.circular(24.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.3),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 10.h),\n+                  ),\n+                ],\n+              ),\n+              child: Column(\n+                children: [\n+                  Container(\n+                    padding: EdgeInsets.all(16.w),\n+                    decoration: BoxDecoration(\n+                      color: Colors.white.withOpacity(0.2),\n+                      shape: BoxShape.circle,\n+                    ),\n+                    child: Icon(\n+                      Icons.store_rounded,\n+                      size: 40.sp,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 16.h),\n+                  Text(\n+                    'انضم لشبكة البائعين',\n+                    style: TextStyle(\n+                      fontSize: 20.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: Colors.white,\n+                    ),\n+                  ),\n+                  SizedBox(height: 8.h),\n+                  Text(\n+                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n+                    textAlign: TextAlign.center,\n+                    style: TextStyle(\n+                      fontSize: 14.sp,\n+                      color: Colors.white.withOpacity(0.9),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildPersonalInfoSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle(\n+          'المعلومات الشخصية',\n+          icon: Icons.person_rounded,\n+        ),\n+        _buildEnhancedTextField(\n+          controller: controller.sellerNameController,\n+          label: 'اسم البائع',\n+          icon: Icons.person_outline_rounded,\n+          animationDelay: 0,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopNameController,\n+          label: 'اسم المتجر',\n+          icon: Icons.store_outlined,\n+          animationDelay: 1,\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildEnhancedTextField(\n+          controller: controller.shopPhoneNumberController,\n+          label: 'رقم الهاتف',\n+          icon: Icons.phone_outlined,\n+          keyboardType: TextInputType.phone,\n+          animationDelay: 2,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagesSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة البائع الشخصية',\n+          imageFile: controller.sellerProfileImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: true,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: true,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n+          animationDelay: 0,\n+        ),\n+        _buildEnhancedImagePicker(\n+          label: 'صورة واجهة المتجر',\n+          imageFile: controller.shopFrontImageFile,\n+          onGalleryPressed:\n+              () => controller.pickImage(\n+                ImageSource.gallery,\n+                isProfileImage: false,\n+              ),\n+          onCameraPressed:\n+              () => controller.pickImage(\n+                ImageSource.camera,\n+                isProfileImage: false,\n+              ),\n+          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n+          animationDelay: 1,\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSection() {\n+    return Column(\n+      children: [\n+        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n+        TweenAnimationBuilder<double>(\n+          tween: Tween(begin: 0.0, end: 1.0),\n+          duration: const Duration(milliseconds: 800),\n+          builder: (context, value, child) {\n+            return Transform.scale(\n+              scale: 0.8 + (0.2 * value),\n+              child: Opacity(\n+                opacity: value,\n+                child: Container(\n+                  margin: EdgeInsets.symmetric(vertical: 12.h),\n+                  decoration: BoxDecoration(\n+                    color: cardColor,\n+                    borderRadius: BorderRadius.circular(20.r),\n+                    boxShadow: [\n+                      BoxShadow(\n+                        color: primaryColor.withOpacity(0.1),\n+                        spreadRadius: 0,\n+                        blurRadius: 20.r,\n+                        offset: Offset(0, 8.h),\n+                      ),\n+                    ],\n+                  ),\n+                  child: Padding(\n+                    padding: EdgeInsets.all(20.w),\n+                    child: Column(\n+                      children: [\n+                        Row(\n+                          children: [\n+                            Container(\n+                              padding: EdgeInsets.all(12.w),\n+                              decoration: BoxDecoration(\n+                                gradient: LinearGradient(\n+                                  colors: [accentColor, primaryColor],\n+                                  begin: Alignment.topLeft,\n+                                  end: Alignment.bottomRight,\n+                                ),\n+                                borderRadius: BorderRadius.circular(12.r),\n+                              ),\n+                              child: Icon(\n+                                Icons.my_location_rounded,\n+                                color: Colors.white,\n+                                size: 24.sp,\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                            Expanded(\n+                              child: Column(\n+                                crossAxisAlignment: CrossAxisAlignment.start,\n+                                children: [\n+                                  Text(\n+                                    'موقع المتجر',\n+                                    style: TextStyle(\n+                                      fontSize: 16.sp,\n+                                      fontWeight: FontWeight.w600,\n+                                      color: const Color(0xFF1F2937),\n+                                    ),\n+                                  ),\n+                                  Text(\n+                                    'اختر موقع متجرك على الخريطة',\n+                                    style: TextStyle(\n+                                      fontSize: 12.sp,\n+                                      color: const Color(0xFF6B7280),\n+                                    ),\n+                                  ),\n+                                ],\n+                              ),\n+                            ),\n+                          ],\n+                        ),\n+                        SizedBox(height: 20.h),\n+                        Obx(\n+                          () =>\n+                              controller.shopLocation.value != null\n+                                  ? _buildLocationPreview()\n+                                  : _buildLocationSelector(),\n+                        ),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            );\n+          },\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationPreview() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 200.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2)),\n+          ),\n+          child: ClipRRect(\n+            borderRadius: BorderRadius.circular(16.r),\n+            child: GoogleMap(\n+              initialCameraPosition: CameraPosition(\n+                target: controller.shopLocation.value!,\n+                zoom: 16,\n+              ),\n+              markers: {\n+                Marker(\n+                  markerId: const MarkerId('selected_location'),\n+                  position: controller.shopLocation.value!,\n+                  icon: BitmapDescriptor.defaultMarkerWithHue(\n+                    BitmapDescriptor.hueBlue,\n+                  ),\n+                ),\n+              },\n+              onTap: (latLng) => controller.shopLocation.value = latLng,\n+              myLocationButtonEnabled: false,\n+              zoomControlsEnabled: false,\n+            ),\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.edit_location_rounded,\n+          label: \"تعديل الموقع\",\n+          onPressed: () => controller.shopLocation.value = null,\n+          gradient: [warningColor, primaryColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildLocationSelector() {\n+    return Column(\n+      children: [\n+        Container(\n+          height: 150.h,\n+          width: double.infinity,\n+          decoration: BoxDecoration(\n+            color: surfaceColor,\n+            borderRadius: BorderRadius.circular(16.r),\n+            border: Border.all(color: primaryColor.withOpacity(0.2), width: 2),\n+          ),\n+          child: Column(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(16.w),\n+                decoration: BoxDecoration(\n+                  color: primaryColor.withOpacity(0.1),\n+                  shape: BoxShape.circle,\n+                ),\n+                child: Icon(\n+                  Icons.add_location_alt_rounded,\n+                  size: 32.sp,\n+                  color: primaryColor,\n+                ),\n+              ),\n+              SizedBox(height: 12.h),\n+              Text(\n+                'اختر موقع المتجر',\n+                style: TextStyle(\n+                  fontSize: 14.sp,\n+                  color: const Color(0xFF6B7280),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+        SizedBox(height: 16.h),\n+        _buildImageButton(\n+          icon: Icons.location_searching_rounded,\n+          label: \"تحديد الموقع\",\n+          onPressed: () => _showLocationPicker(),\n+          gradient: [successColor, accentColor],\n+        ),\n+      ],\n+    );\n+  }\n+\n+  void _showLocationPicker() {\n+    Get.dialog(\n+      Dialog(\n+        backgroundColor: Colors.transparent,\n+        child: Container(\n+          height: 500.h,\n+          margin: EdgeInsets.all(20.w),\n+          decoration: BoxDecoration(\n+            color: cardColor,\n+            borderRadius: BorderRadius.circular(20.r),\n+          ),\n+          child: Column(\n+            children: [\n+              Container(\n+                padding: EdgeInsets.all(20.w),\n+                decoration: BoxDecoration(\n+                  gradient: LinearGradient(\n+                    colors: [primaryColor, secondaryColor],\n+                    begin: Alignment.centerLeft,\n+                    end: Alignment.centerRight,\n+                  ),\n+                  borderRadius: BorderRadius.only(\n+                    topLeft: Radius.circular(20.r),\n+                    topRight: Radius.circular(20.r),\n+                  ),\n+                ),\n+                child: Row(\n+                  children: [\n+                    Icon(\n+                      Icons.location_on_rounded,\n+                      color: Colors.white,\n+                      size: 24.sp,\n+                    ),\n+                    SizedBox(width: 12.w),\n+                    Expanded(\n+                      child: Text(\n+                        'اختر موقع المتجر',\n+                        style: TextStyle(\n+                          fontSize: 18.sp,\n+                          fontWeight: FontWeight.bold,\n+                          color: Colors.white,\n+                        ),\n+                      ),\n+                    ),\n+                    GestureDetector(\n+                      onTap: () => Get.back(),\n+                      child: Container(\n+                        padding: EdgeInsets.all(8.w),\n+                        decoration: BoxDecoration(\n+                          color: Colors.white.withOpacity(0.2),\n+                          shape: BoxShape.circle,\n+                        ),\n+                        child: Icon(\n+                          Icons.close_rounded,\n+                          color: Colors.white,\n+                          size: 20.sp,\n+                        ),\n+                      ),\n+                    ),\n+                  ],\n+                ),\n+              ),\n+              Expanded(\n+                child: GoogleMap(\n+                  initialCameraPosition: const CameraPosition(\n+                    target: LatLng(24.7136, 46.6753), // Riyadh\n+                    zoom: 12,\n+                  ),\n+                  onTap: (latLng) {\n+                    controller.shopLocation.value = latLng;\n+                    Get.back();\n+                  },\n+                  myLocationButtonEnabled: true,\n+                  myLocationEnabled: true,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  Widget _buildRegisterButton() {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 1200),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              width: double.infinity,\n+              height: 56.h,\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [primaryColor, secondaryColor],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.4),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                ],\n+              ),\n+              child: Obx(\n+                () => Material(\n+                  color: Colors.transparent,\n+                  child: InkWell(\n+                    onTap:\n+                        controller.isLoading.value\n+                            ? null\n+                            : () =>\n+                                controller\n+                                    .initiatePhoneVerificationAndCollectData(),\n+                    borderRadius: BorderRadius.circular(16.r),\n+                    child: Container(\n+                      padding: EdgeInsets.symmetric(horizontal: 24.w),\n+                      child: Row(\n+                        mainAxisAlignment: MainAxisAlignment.center,\n+                        children: [\n+                          if (controller.isLoading.value) ...[\n+                            SizedBox(\n+                              width: 24.w,\n+                              height: 24.h,\n+                              child: CircularProgressIndicator(\n+                                strokeWidth: 2,\n+                                valueColor: AlwaysStoppedAnimation<Color>(\n+                                  Colors.white,\n+                                ),\n+                              ),\n+                            ),\n+                            SizedBox(width: 16.w),\n+                          ] else ...[\n+                            Icon(\n+                              Icons.check_circle_rounded,\n+                              color: Colors.white,\n+                              size: 24.sp,\n+                            ),\n+                            SizedBox(width: 12.w),\n+                          ],\n+                          Text(\n+                            controller.isLoading.value\n+                                ? 'جارٍ التسجيل...'\n+                                : 'إنشاء حساب البائع',\n+                            style: TextStyle(\n+                              fontSize: 18.sp,\n+                              fontWeight: FontWeight.bold,\n+                              color: Colors.white,\n+                            ),\n+                          ),\n+                        ],\n+                      ),\n+                    ),\n+                  ),\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: const Duration(milliseconds: 800),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(0, 30 * (1 - value)),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n+              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n+              decoration: BoxDecoration(\n+                gradient: LinearGradient(\n+                  colors: [\n+                    primaryColor.withOpacity(0.1),\n+                    secondaryColor.withOpacity(0.1),\n+                  ],\n+                  begin: Alignment.centerLeft,\n+                  end: Alignment.centerRight,\n+                ),\n+                borderRadius: BorderRadius.circular(12.r),\n+                border: Border.all(color: primaryColor.withOpacity(0.2)),\n+              ),\n+              child: Row(\n+                children: [\n+                  if (icon != null) ...[\n+                    Container(\n+                      padding: EdgeInsets.all(8.w),\n+                      decoration: BoxDecoration(\n+                        color: primaryColor.withOpacity(0.1),\n+                        borderRadius: BorderRadius.circular(8.r),\n+                      ),\n+                      child: Icon(icon, color: primaryColor, size: 20.sp),\n+                    ),\n+                    SizedBox(width: 12.w),\n+                  ],\n+                  Text(\n+                    title,\n+                    style: TextStyle(\n+                      fontSize: 18.sp,\n+                      fontWeight: FontWeight.bold,\n+                      color: const Color(0xFF1F2937),\n+                    ),\n+                  ),\n+                ],\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedTextField({\n+    required TextEditingController controller,\n+    required String label,\n+    required IconData icon,\n+    required int animationDelay,\n+    TextInputType? keyboardType,\n+    String? hintText,\n+    int? maxLines,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.translate(\n+          offset: Offset(50 * (1 - value), 0),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(16.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.08),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 4.h),\n+                  ),\n+                ],\n+                border: Border.all(\n+                  color: primaryColor.withOpacity(0.1),\n+                  width: 1,\n+                ),\n+              ),\n+              child: TextFormField(\n+                controller: controller,\n+                keyboardType: keyboardType,\n+                maxLines: maxLines ?? 1,\n+                style: TextStyle(\n+                  fontSize: 16.sp,\n+                  color: const Color(0xFF1F2937),\n+                  fontWeight: FontWeight.w500,\n+                ),\n+                decoration: InputDecoration(\n+                  labelText: label,\n+                  hintText: hintText,\n+                  prefixIcon: Container(\n+                    margin: EdgeInsets.all(12.w),\n+                    padding: EdgeInsets.all(8.w),\n+                    decoration: BoxDecoration(\n+                      gradient: LinearGradient(\n+                        colors: [\n+                          primaryColor.withOpacity(0.1),\n+                          secondaryColor.withOpacity(0.1),\n+                        ],\n+                        begin: Alignment.topLeft,\n+                        end: Alignment.bottomRight,\n+                      ),\n+                      borderRadius: BorderRadius.circular(8.r),\n+                    ),\n+                    child: Icon(icon, color: primaryColor, size: 20.sp),\n+                  ),\n+                  labelStyle: TextStyle(\n+                    color: const Color(0xFF6B7280),\n+                    fontSize: 14.sp,\n+                    fontWeight: FontWeight.w500,\n+                  ),\n+                  hintStyle: TextStyle(\n+                    color: const Color(0xFF9CA3AF),\n+                    fontSize: 14.sp,\n+                  ),\n+                  border: InputBorder.none,\n+                  contentPadding: EdgeInsets.symmetric(\n+                    horizontal: 16.w,\n+                    vertical: 20.h,\n+                  ),\n+                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildEnhancedImagePicker({\n+    required String label,\n+    required Rxn<File> imageFile,\n+    required Function() onGalleryPressed,\n+    required Function() onCameraPressed,\n+    required Function()? onRemovePressed,\n+    required int animationDelay,\n+  }) {\n+    return TweenAnimationBuilder<double>(\n+      tween: Tween(begin: 0.0, end: 1.0),\n+      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n+      builder: (context, value, child) {\n+        return Transform.scale(\n+          scale: 0.8 + (0.2 * value),\n+          child: Opacity(\n+            opacity: value,\n+            child: Container(\n+              margin: EdgeInsets.symmetric(vertical: 12.h),\n+              decoration: BoxDecoration(\n+                color: cardColor,\n+                borderRadius: BorderRadius.circular(20.r),\n+                boxShadow: [\n+                  BoxShadow(\n+                    color: primaryColor.withOpacity(0.1),\n+                    spreadRadius: 0,\n+                    blurRadius: 20.r,\n+                    offset: Offset(0, 8.h),\n+                  ),\n+                  BoxShadow(\n+                    color: Colors.black.withOpacity(0.05),\n+                    spreadRadius: 0,\n+                    blurRadius: 10.r,\n+                    offset: Offset(0, 2.h),\n+                  ),\n+                ],\n+              ),\n+              child: Padding(\n+                padding: EdgeInsets.all(20.w),\n+                child: Column(\n+                  crossAxisAlignment: CrossAxisAlignment.start,\n+                  children: [\n+                    Row(\n+                      children: [\n+                        Container(\n+                          padding: EdgeInsets.all(8.w),\n+                          decoration: BoxDecoration(\n+                            gradient: LinearGradient(\n+                              colors: [primaryColor, secondaryColor],\n+                              begin: Alignment.topLeft,\n+                              end: Alignment.bottomRight,\n+                            ),\n+                            borderRadius: BorderRadius.circular(10.r),\n+                          ),\n+                          child: Icon(\n+                            Icons.add_a_photo_rounded,\n+                            color: Colors.white,\n+                            size: 20.sp,\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: Text(\n+                            label,\n+                            style: TextStyle(\n+                              fontSize: 16.sp,\n+                              fontWeight: FontWeight.w600,\n+                              color: const Color(0xFF1F2937),\n+                            ),\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Center(\n+                      child: Obx(\n+                        () =>\n+                            imageFile.value != null\n+                                ? _buildImagePreview(\n+                                  imageFile.value!,\n+                                  onRemovePressed,\n+                                )\n+                                : _buildImagePlaceholder(),\n+                      ),\n+                    ),\n+                    SizedBox(height: 16.h),\n+                    Row(\n+                      children: [\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.photo_library_rounded,\n+                            label: \"المعرض\",\n+                            onPressed: onGalleryPressed,\n+                            gradient: [accentColor, primaryColor],\n+                          ),\n+                        ),\n+                        SizedBox(width: 12.w),\n+                        Expanded(\n+                          child: _buildImageButton(\n+                            icon: Icons.camera_alt_rounded,\n+                            label: \"الكاميرا\",\n+                            onPressed: onCameraPressed,\n+                            gradient: [successColor, accentColor],\n+                          ),\n+                        ),\n+                      ],\n+                    ),\n+                  ],\n+                ),\n+              ),\n+            ),\n+          ),\n+        );\n+      },\n+    );\n+  }\n+\n+  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n+    return Stack(\n+      alignment: Alignment.topRight,\n+      children: [\n+        Hero(\n+          tag: imageFile.path,\n+          child: Container(\n+            height: 200.h,\n+            width: double.infinity,\n+            decoration: BoxDecoration(\n+              borderRadius: BorderRadius.circular(16.r),\n+              boxShadow: [\n+                BoxShadow(\n+                  color: Colors.black.withOpacity(0.1),\n+                  spreadRadius: 0,\n+                  blurRadius: 10.r,\n+                  offset: Offset(0, 4.h),\n+                ),\n+              ],\n+            ),\n+            child: ClipRRect(\n+              borderRadius: BorderRadius.circular(16.r),\n+              child: Image.file(imageFile, fit: BoxFit.cover),\n+            ),\n+          ),\n+        ),\n+        if (onRemovePressed != null)\n+          Positioned(\n+            top: 8.h,\n+            right: 8.w,\n+            child: GestureDetector(\n+              onTap: onRemovePressed,\n+              child: Container(\n+                padding: EdgeInsets.all(8.w),\n+                decoration: BoxDecoration(\n+                  color: errorColor,\n+                  shape: BoxShape.circle,\n+                  boxShadow: [\n+                    BoxShadow(\n+                      color: errorColor.withOpacity(0.3),\n+                      spreadRadius: 0,\n+                      blurRadius: 8.r,\n+                      offset: Offset(0, 2.h),\n+                    ),\n+                  ],\n+                ),\n+                child: Icon(\n+                  Icons.close_rounded,\n+                  color: Colors.white,\n+                  size: 18.sp,\n+                ),\n+              ),\n+            ),\n+          ),\n+      ],\n+    );\n+  }\n+\n+  Widget _buildImagePlaceholder() {\n+    return Container(\n+      height: 200.h,\n+      width: double.infinity,\n+      decoration: BoxDecoration(\n+        color: surfaceColor,\n+        borderRadius: BorderRadius.circular(16.r),\n+        border: Border.all(\n+          color: primaryColor.withOpacity(0.2),\n+          width: 2,\n+          strokeAlign: BorderSide.strokeAlignInside,\n+        ),\n+      ),\n+      child: Column(\n+        mainAxisAlignment: MainAxisAlignment.center,\n+        children: [\n+          TweenAnimationBuilder<double>(\n+            tween: Tween(begin: 0.0, end: 1.0),\n+            duration: const Duration(milliseconds: 1500),\n+            builder: (context, value, child) {\n+              return Transform.scale(\n+                scale: 0.8 + (0.2 * value),\n+                child: Container(\n+                  padding: EdgeInsets.all(16.w),\n+                  decoration: BoxDecoration(\n+                    color: primaryColor.withOpacity(0.1),\n+                    shape: BoxShape.circle,\n+                  ),\n+                  child: Icon(\n+                    Icons.add_photo_alternate_rounded,\n+                    size: 48.sp,\n+                    color: primaryColor.withOpacity(0.7),\n+                  ),\n+                ),\n+              );\n+            },\n+          ),\n+          SizedBox(height: 12.h),\n+          Text(\n+            'اضغط لإضافة صورة',\n+            style: TextStyle(\n+              fontSize: 14.sp,\n+              color: const Color(0xFF6B7280),\n+              fontWeight: FontWeight.w500,\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildImageButton({\n+    required IconData icon,\n+    required String label,\n+    required VoidCallback onPressed,\n+    required List<Color> gradient,\n+  }) {\n+    return Material(\n+      color: Colors.transparent,\n+      child: InkWell(\n+        onTap: onPressed,\n+        borderRadius: BorderRadius.circular(12.r),\n+        child: Container(\n+          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n+          decoration: BoxDecoration(\n+            gradient: LinearGradient(\n+              colors: gradient,\n+              begin: Alignment.topLeft,\n+              end: Alignment.bottomRight,\n+            ),\n+            borderRadius: BorderRadius.circular(12.r),\n+            boxShadow: [\n+              BoxShadow(\n+                color: gradient.first.withOpacity(0.3),\n+                spreadRadius: 0,\n+                blurRadius: 8.r,\n+                offset: Offset(0, 4.h),\n+              ),\n+            ],\n+          ),\n+          child: Row(\n+            mainAxisAlignment: MainAxisAlignment.center,\n+            children: [\n+              Icon(icon, color: Colors.white, size: 20.sp),\n+              SizedBox(width: 8.w),\n+              Text(\n+                label,\n+                style: TextStyle(\n+                  color: Colors.white,\n+                  fontSize: 14.sp,\n+                  fontWeight: FontWeight.w600,\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+}\n"
                },
                {
                    "date": 1752490158822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,10 +44,12 @@\n                       children: [\n                         SizedBox(height: 20.h),\n                         _buildWelcomeSection(),\n                         _buildPersonalInfoSection(),\n+                        _buildCategorySection(),\n                         _buildImagesSection(),\n                         _buildLocationSection(),\n+                        _buildWorkingHoursSection(),\n                         SizedBox(height: 30.h),\n                         _buildRegisterButton(),\n                         SizedBox(height: 30.h),\n                       ],\n@@ -180,2083 +182,172 @@\n     );\n   }\n \n   Widget _buildPersonalInfoSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle(\n-          'المعلومات الشخصية',\n-          icon: Icons.person_rounded,\n-        ),\n-        _buildEnhancedTextField(\n-          controller: controller.sellerNameController,\n-          label: 'اسم البائع',\n-          icon: Icons.person_outline_rounded,\n-          animationDelay: 0,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopNameController,\n-          label: 'اسم المتجر',\n-          icon: Icons.store_outlined,\n-          animationDelay: 1,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopPhoneNumberController,\n-          label: 'رقم الهاتف',\n-          icon: Icons.phone_outlined,\n-          keyboardType: TextInputType.phone,\n-          animationDelay: 2,\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildImagesSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة البائع الشخصية',\n-          imageFile: controller.sellerProfileImageFile,\n-          onGalleryPressed:\n-              () => controller.pickImage(\n-                ImageSource.gallery,\n-                isProfileImage: true,\n-              ),\n-          onCameraPressed:\n-              () => controller.pickImage(\n-                ImageSource.camera,\n-                isProfileImage: true,\n-              ),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n-          animationDelay: 0,\n-        ),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة واجهة المتجر',\n-          imageFile: controller.shopFrontImageFile,\n-          onGalleryPressed:\n-              () => controller.pickImage(\n-                ImageSource.gallery,\n-                isProfileImage: false,\n-              ),\n-          onCameraPressed:\n-              () => controller.pickImage(\n-                ImageSource.camera,\n-                isProfileImage: false,\n-              ),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n-          animationDelay: 1,\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n-        TweenAnimationBuilder<double>(\n-          tween: Tween(begin: 0.0, end: 1.0),\n-          duration: const Duration(milliseconds: 800),\n-          builder: (context, value, child) {\n-            return Transform.scale(\n-              scale: 0.8 + (0.2 * value),\n-              child: Opacity(\n-                opacity: value,\n-                child: Container(\n-                  margin: EdgeInsets.symmetric(vertical: 12.h),\n-                  decoration: BoxDecoration(\n-                    color: cardColor,\n-                    borderRadius: BorderRadius.circular(20.r),\n-                    boxShadow: [\n-                      BoxShadow(\n-                        color: primaryColor.withOpacity(0.1),\n-                        spreadRadius: 0,\n-                        blurRadius: 20.r,\n-                        offset: Offset(0, 8.h),\n-                      ),\n-                    ],\n-                  ),\n-                  child: Padding(\n-                    padding: EdgeInsets.all(20.w),\n-                    child: Column(\n-                      children: [\n-                        Row(\n-                          children: [\n-                            Container(\n-                              padding: EdgeInsets.all(12.w),\n-                              decoration: BoxDecoration(\n-                                gradient: LinearGradient(\n-                                  colors: [accentColor, primaryColor],\n-                                  begin: Alignment.topLeft,\n-                                  end: Alignment.bottomRight,\n-                                ),\n-                                borderRadius: BorderRadius.circular(12.r),\n-                              ),\n-                              child: Icon(\n-                                Icons.my_location_rounded,\n-                                color: Colors.white,\n-                                size: 24.sp,\n-                              ),\n-                            ),\n-                            SizedBox(width: 16.w),\n-                            Expanded(\n-                              child: Column(\n-                                crossAxisAlignment: CrossAxisAlignment.start,\n-                                children: [\n-                                  Text(\n-                                    'موقع المتجر',\n-                                    style: TextStyle(\n-                                      fontSize: 16.sp,\n-                                      fontWeight: FontWeight.w600,\n-                                      color: const Color(0xFF1F2937),\n-                                    ),\n-                                  ),\n-                                  Text(\n-                                    'اختر موقع متجرك على الخريطة',\n-                                    style: TextStyle(\n-                                      fontSize: 12.sp,\n-                                      color: const Color(0xFF6B7280),\n-                                    ),\n-                                  ),\n-                                ],\n-                              ),\n-                            ),\n-                          ],\n-                        ),\n-                        SizedBox(height: 20.h),\n-                        Obx(\n-                          () =>\n-                              controller.shopLocation.value != null\n-                                  ? _buildLocationPreview()\n-                                  : _buildLocationSelector(),\n-                        ),\n-                      ],\n-                    ),\n-                  ),\n-                ),\n-              ),\n-            );\n-          },\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationPreview() {\n-    return Column(\n-      children: [\n-        Container(\n-          height: 200.h,\n-          width: double.infinity,\n-          decoration: BoxDecoration(\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(color: primaryColor.withOpacity(0.2)),\n-          ),\n-          child: ClipRRect(\n-            borderRadius: BorderRadius.circular(16.r),\n-            child: GoogleMap(\n-              initialCameraPosition: CameraPosition(\n-                target: controller.shopLocation.value!,\n-                zoom: 16,\n-              ),\n-              markers: {\n-                Marker(\n-                  markerId: const MarkerId('selected_location'),\n-                  position: controller.shopLocation.value!,\n-                  icon: BitmapDescriptor.defaultMarkerWithHue(\n-                    BitmapDescriptor.hueBlue,\n-                  ),\n-                ),\n-              },\n-              onTap: (latLng) => controller.shopLocation.value = latLng,\n-              myLocationButtonEnabled: false,\n-              zoomControlsEnabled: false,\n-            ),\n-          ),\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.edit_location_rounded,\n-          label: \"تعديل الموقع\",\n-          onPressed: () => controller.shopLocation.value = null,\n-          gradient: [warningColor, primaryColor],\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationSelector() {\n-    return Column(\n-      children: [\n-        Container(\n-          height: 150.h,\n-          width: double.infinity,\n-          decoration: BoxDecoration(\n-            color: surfaceColor,\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(color: primaryColor.withOpacity(0.2), width: 2),\n-          ),\n-          child: Column(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(16.w),\n-                decoration: BoxDecoration(\n-                  color: primaryColor.withOpacity(0.1),\n-                  shape: BoxShape.circle,\n-                ),\n-                child: Icon(\n-                  Icons.add_location_alt_rounded,\n-                  size: 32.sp,\n-                  color: primaryColor,\n-                ),\n-              ),\n-              SizedBox(height: 12.h),\n-              Text(\n-                'اختر موقع المتجر',\n-                style: TextStyle(\n-                  fontSize: 14.sp,\n-                  color: const Color(0xFF6B7280),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.location_searching_rounded,\n-          label: \"تحديد الموقع\",\n-          onPressed: () => _showLocationPicker(),\n-          gradient: [successColor, accentColor],\n-        ),\n-      ],\n-    );\n-  }\n-\n-  void _showLocationPicker() {\n-    Get.dialog(\n-      Dialog(\n-        backgroundColor: Colors.transparent,\n-        child: Container(\n-          height: 500.h,\n-          margin: EdgeInsets.all(20.w),\n-          decoration: BoxDecoration(\n-            color: cardColor,\n-            borderRadius: BorderRadius.circular(20.r),\n-          ),\n-          child: Column(\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(20.w),\n-                decoration: BoxDecoration(\n-                  gradient: LinearGradient(\n-                    colors: [primaryColor, secondaryColor],\n-                    begin: Alignment.centerLeft,\n-                    end: Alignment.centerRight,\n-                  ),\n-                  borderRadius: BorderRadius.only(\n-                    topLeft: Radius.circular(20.r),\n-                    topRight: Radius.circular(20.r),\n-                  ),\n-                ),\n-                child: Row(\n-                  children: [\n-                    Icon(\n-                      Icons.location_on_rounded,\n-                      color: Colors.white,\n-                      size: 24.sp,\n-                    ),\n-                    SizedBox(width: 12.w),\n-                    Expanded(\n-                      child: Text(\n-                        'اختر موقع المتجر',\n-                        style: TextStyle(\n-                          fontSize: 18.sp,\n-                          fontWeight: FontWeight.bold,\n-                          color: Colors.white,\n-                        ),\n-                      ),\n-                    ),\n-                    GestureDetector(\n-                      onTap: () => Get.back(),\n-                      child: Container(\n-                        padding: EdgeInsets.all(8.w),\n-                        decoration: BoxDecoration(\n-                          color: Colors.white.withOpacity(0.2),\n-                          shape: BoxShape.circle,\n-                        ),\n-                        child: Icon(\n-                          Icons.close_rounded,\n-                          color: Colors.white,\n-                          size: 20.sp,\n-                        ),\n-                      ),\n-                    ),\n-                  ],\n-                ),\n-              ),\n-              Expanded(\n-                child: GoogleMap(\n-                  initialCameraPosition: const CameraPosition(\n-                    target: LatLng(24.7136, 46.6753), // Riyadh\n-                    zoom: 12,\n-                  ),\n-                  onTap: (latLng) {\n-                    controller.shopLocation.value = latLng;\n-                    Get.back();\n-                  },\n-                  myLocationButtonEnabled: true,\n-                  myLocationEnabled: true,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildRegisterButton() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1200),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              height: 56.h,\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.4),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                ],\n-              ),\n-              child: Obx(\n-                () => Material(\n-                  color: Colors.transparent,\n-                  child: InkWell(\n-                    onTap:\n-                        controller.isLoading.value\n-                            ? null\n-                            : () =>\n-                                controller\n-                                    .initiatePhoneVerificationAndCollectData(),\n-                    borderRadius: BorderRadius.circular(16.r),\n-                    child: Container(\n-                      padding: EdgeInsets.symmetric(horizontal: 24.w),\n-                      child: Row(\n-                        mainAxisAlignment: MainAxisAlignment.center,\n-                        children: [\n-                          if (controller.isLoading.value) ...[\n-                            SizedBox(\n-                              width: 24.w,\n-                              height: 24.h,\n-                              child: CircularProgressIndicator(\n-                                strokeWidth: 2,\n-                                valueColor: AlwaysStoppedAnimation<Color>(\n-                                  Colors.white,\n-                                ),\n-                              ),\n-                            ),\n-                            SizedBox(width: 16.w),\n-                          ] else ...[\n-                            Icon(\n-                              Icons.check_circle_rounded,\n-                              color: Colors.white,\n-                              size: 24.sp,\n-                            ),\n-                            SizedBox(width: 12.w),\n-                          ],\n-                          Text(\n-                            controller.isLoading.value\n-                                ? 'جارٍ التسجيل...'\n-                                : 'إنشاء حساب البائع',\n-                            style: TextStyle(\n-                              fontSize: 18.sp,\n-                              fontWeight: FontWeight.bold,\n-                              color: Colors.white,\n-                            ),\n-                          ),\n-                        ],\n-                      ),\n-                    ),\n-                  ),\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 800),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 30 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n-              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [\n-                    primaryColor.withOpacity(0.1),\n-                    secondaryColor.withOpacity(0.1),\n-                  ],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.2)),\n-              ),\n-              child: Row(\n-                children: [\n-                  if (icon != null) ...[\n-                    Container(\n-                      padding: EdgeInsets.all(8.w),\n-                      decoration: BoxDecoration(\n-                        color: primaryColor.withOpacity(0.1),\n-                        borderRadius: BorderRadius.circular(8.r),\n-                      ),\n-                      child: Icon(icon, color: primaryColor, size: 20.sp),\n-                    ),\n-                    SizedBox(width: 12.w),\n-                  ],\n-                  Text(\n-                    title,\n-                    style: TextStyle(\n-                      fontSize: 18.sp,\n-                      fontWeight: FontWeight.bold,\n-                      color: const Color(0xFF1F2937),\n-                    ),\n-                  ),\n-                ],\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedTextField({\n-    required TextEditingController controller,\n-    required String label,\n-    required IconData icon,\n-    required int animationDelay,\n-    TextInputType? keyboardType,\n-    String? hintText,\n-    int? maxLines,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(50 * (1 - value), 0),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.08),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 4.h),\n-                  ),\n-                ],\n-                border: Border.all(\n-                  color: primaryColor.withOpacity(0.1),\n-                  width: 1,\n-                ),\n-              ),\n-              child: TextFormField(\n-                controller: controller,\n-                keyboardType: keyboardType,\n-                maxLines: maxLines ?? 1,\n-                style: TextStyle(\n-                  fontSize: 16.sp,\n-                  color: const Color(0xFF1F2937),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-                decoration: InputDecoration(\n-                  labelText: label,\n-                  hintText: hintText,\n-                  prefixIcon: Container(\n-                    margin: EdgeInsets.all(12.w),\n-                    padding: EdgeInsets.all(8.w),\n-                    decoration: BoxDecoration(\n-                      gradient: LinearGradient(\n-                        colors: [\n-                          primaryColor.withOpacity(0.1),\n-                          secondaryColor.withOpacity(0.1),\n-                        ],\n-                        begin: Alignment.topLeft,\n-                        end: Alignment.bottomRight,\n-                      ),\n-                      borderRadius: BorderRadius.circular(8.r),\n-                    ),\n-                    child: Icon(icon, color: primaryColor, size: 20.sp),\n-                  ),\n-                  labelStyle: TextStyle(\n-                    color: const Color(0xFF6B7280),\n-                    fontSize: 14.sp,\n-                    fontWeight: FontWeight.w500,\n-                  ),\n-                  hintStyle: TextStyle(\n-                    color: const Color(0xFF9CA3AF),\n-                    fontSize: 14.sp,\n-                  ),\n-                  border: InputBorder.none,\n-                  contentPadding: EdgeInsets.symmetric(\n-                    horizontal: 16.w,\n-                    vertical: 20.h,\n-                  ),\n-                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedImagePicker({\n-    required String label,\n-    required Rxn<File> imageFile,\n-    required Function() onGalleryPressed,\n-    required Function() onCameraPressed,\n-    required Function()? onRemovePressed,\n-    required int animationDelay,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.symmetric(vertical: 12.h),\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(20.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.1),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                  BoxShadow(\n-                    color: Colors.black.withOpacity(0.05),\n-                    spreadRadius: 0,\n-                    blurRadius: 10.r,\n-                    offset: Offset(0, 2.h),\n-                  ),\n-                ],\n-              ),\n-              child: Padding(\n-                padding: EdgeInsets.all(20.w),\n-                child: Column(\n-                  crossAxisAlignment: CrossAxisAlignment.start,\n-                  children: [\n-                    Row(\n-                      children: [\n-                        Container(\n-                          padding: EdgeInsets.all(8.w),\n-                          decoration: BoxDecoration(\n-                            gradient: LinearGradient(\n-                              colors: [primaryColor, secondaryColor],\n-                              begin: Alignment.topLeft,\n-                              end: Alignment.bottomRight,\n-                            ),\n-                            borderRadius: BorderRadius.circular(10.r),\n-                          ),\n-                          child: Icon(\n-                            Icons.add_a_photo_rounded,\n-                            color: Colors.white,\n-                            size: 20.sp,\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: Text(\n-                            label,\n-                            style: TextStyle(\n-                              fontSize: 16.sp,\n-                              fontWeight: FontWeight.w600,\n-                              color: const Color(0xFF1F2937),\n-                            ),\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Center(\n-                      child: Obx(\n-                        () =>\n-                            imageFile.value != null\n-                                ? _buildImagePreview(\n-                                  imageFile.value!,\n-                                  onRemovePressed,\n-                                )\n-                                : _buildImagePlaceholder(),\n-                      ),\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Row(\n-                      children: [\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.photo_library_rounded,\n-                            label: \"المعرض\",\n-                            onPressed: onGalleryPressed,\n-                            gradient: [accentColor, primaryColor],\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.camera_alt_rounded,\n-                            label: \"الكاميرا\",\n-                            onPressed: onCameraPressed,\n-                            gradient: [successColor, accentColor],\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                  ],\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n-    return Stack(\n-      alignment: Alignment.topRight,\n-      children: [\n-        Hero(\n-          tag: imageFile.path,\n-          child: Container(\n-            height: 200.h,\n-            width: double.infinity,\n-            decoration: BoxDecoration(\n-              borderRadius: BorderRadius.circular(16.r),\n-              boxShadow: [\n-                BoxShadow(\n-                  color: Colors.black.withOpacity(0.1),\n-                  spreadRadius: 0,\n-                  blurRadius: 10.r,\n-                  offset: Offset(0, 4.h),\n-                ),\n-              ],\n-            ),\n-            child: ClipRRect(\n-              borderRadius: BorderRadius.circular(16.r),\n-              child: Image.file(imageFile, fit: BoxFit.cover),\n-            ),\n-          ),\n-        ),\n-        if (onRemovePressed != null)\n-          Positioned(\n-            top: 8.h,\n-            right: 8.w,\n-            child: GestureDetector(\n-              onTap: onRemovePressed,\n-              child: Container(\n-                padding: EdgeInsets.all(8.w),\n-                decoration: BoxDecoration(\n-                  color: errorColor,\n-                  shape: BoxShape.circle,\n-                  boxShadow: [\n-                    BoxShadow(\n-                      color: errorColor.withOpacity(0.3),\n-                      spreadRadius: 0,\n-                      blurRadius: 8.r,\n-                      offset: Offset(0, 2.h),\n-                    ),\n-                  ],\n-                ),\n-                child: Icon(\n-                  Icons.close_rounded,\n-                  color: Colors.white,\n-                  size: 18.sp,\n-                ),\n-              ),\n-            ),\n-          ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildImagePlaceholder() {\n-    return Container(\n-      height: 200.h,\n-      width: double.infinity,\n-      decoration: BoxDecoration(\n-        color: surfaceColor,\n-        borderRadius: BorderRadius.circular(16.r),\n-        border: Border.all(\n-          color: primaryColor.withOpacity(0.2),\n-          width: 2,\n-          strokeAlign: BorderSide.strokeAlignInside,\n-        ),\n-      ),\n+    return Form(\n+      key: controller.formKey,\n       child: Column(\n-        mainAxisAlignment: MainAxisAlignment.center,\n         children: [\n-          TweenAnimationBuilder<double>(\n-            tween: Tween(begin: 0.0, end: 1.0),\n-            duration: const Duration(milliseconds: 1500),\n-            builder: (context, value, child) {\n-              return Transform.scale(\n-                scale: 0.8 + (0.2 * value),\n-                child: Container(\n-                  padding: EdgeInsets.all(16.w),\n-                  decoration: BoxDecoration(\n-                    color: primaryColor.withOpacity(0.1),\n-                    shape: BoxShape.circle,\n-                  ),\n-                  child: Icon(\n-                    Icons.add_photo_alternate_rounded,\n-                    size: 48.sp,\n-                    color: primaryColor.withOpacity(0.7),\n-                  ),\n-                ),\n-              );\n+          _buildAnimatedSectionTitle(\n+            'المعلومات الشخصية',\n+            icon: Icons.person_rounded,\n+          ),\n+          _buildEnhancedTextField(\n+            controller: controller.sellerNameController,\n+            label: 'اسم البائع',\n+            icon: Icons.person_outline_rounded,\n+            animationDelay: 0,\n+            validator: (value) {\n+              if (value == null || value.trim().isEmpty) {\n+                return 'يرجى إدخال اسم البائع';\n+              }\n+              return null;\n             },\n           ),\n-          SizedBox(height: 12.h),\n-          Text(\n-            'اضغط لإضافة صورة',\n-            style: TextStyle(\n-              fontSize: 14.sp,\n-              color: const Color(0xFF6B7280),\n-              fontWeight: FontWeight.w500,\n-            ),\n+          SizedBox(height: 16.h),\n+          _buildEnhancedTextField(\n+            controller: controller.shopNameController,\n+            label: 'اسم المتجر',\n+            icon: Icons.store_outlined,\n+            animationDelay: 1,\n+            validator: (value) {\n+              if (value == null || value.trim().isEmpty) {\n+                return 'يرجى إدخال اسم المتجر';\n+              }\n+              return null;\n+            },\n           ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  Widget _buildImageButton({\n-    required IconData icon,\n-    required String label,\n-    required VoidCallback onPressed,\n-    required List<Color> gradient,\n-  }) {\n-    return Material(\n-      color: Colors.transparent,\n-      child: InkWell(\n-        onTap: onPressed,\n-        borderRadius: BorderRadius.circular(12.r),\n-        child: Container(\n-          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n-          decoration: BoxDecoration(\n-            gradient: LinearGradient(\n-              colors: gradient,\n-              begin: Alignment.topLeft,\n-              end: Alignment.bottomRight,\n-            ),\n-            borderRadius: BorderRadius.circular(12.r),\n-            boxShadow: [\n-              BoxShadow(\n-                color: gradient.first.withOpacity(0.3),\n-                spreadRadius: 0,\n-                blurRadius: 8.r,\n-                offset: Offset(0, 4.h),\n-              ),\n-            ],\n+          SizedBox(height: 16.h),\n+          _buildEnhancedTextField(\n+            controller: controller.shopPhoneNumberController,\n+            label: 'رقم الهاتف',\n+            icon: Icons.phone_outlined,\n+            keyboardType: TextInputType.phone,\n+            animationDelay: 2,\n+            validator: (value) {\n+              if (value == null || value.trim().isEmpty) {\n+                return 'يرجى إدخال رقم الهاتف';\n+              }\n+              final phoneRegExp = RegExp(r'^07[3-9]\\d{8}$');\n+              if (!phoneRegExp.hasMatch(value.replaceAll(RegExp(r'\\s+'), ''))) {\n+                return 'يرجى إدخال رقم هاتف عراقي صحيح (07xxxxxxxx)';\n+              }\n+              return null;\n+            },\n           ),\n-          child: Row(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              Icon(icon, color: Colors.white, size: 20.sp),\n-              SizedBox(width: 8.w),\n-              Text(\n-                label,\n-                style: TextStyle(\n-                  color: Colors.white,\n-                  fontSize: 14.sp,\n-                  fontWeight: FontWeight.w600,\n-                ),\n-              ),\n-            ],\n+          SizedBox(height: 16.h),\n+          _buildEnhancedTextField(\n+            controller: controller.shopDescriptionController,\n+            label: 'وصف المتجر',\n+            icon: Icons.description_outlined,\n+            animationDelay: 3,\n+            maxLines: 3,\n+            hintText: 'أدخل وصفاً مختصراً عن متجرك ومنتجاتك',\n           ),\n-        ),\n-      ),\n-    );\n-  }\n-}\n-import 'dart:io';\n-import 'package:flutter/material.dart';\n-import 'package:flutter_screenutil/flutter_screenutil.dart';\n-import 'package:get/get.dart';\n-import 'package:google_maps_flutter/google_maps_flutter.dart';\n-import 'package:image_picker/image_picker.dart';\n-\n-import '../controllers/SellerRegistrationController.dart';\n-\n-class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n-  const SellerRegistrationScreen({super.key});\n-\n-  // Color scheme احترافي للتطبيق\n-  static const Color primaryColor = Color(0xFF6366F1);\n-  static const Color secondaryColor = Color(0xFF8B5CF6);\n-  static const Color accentColor = Color(0xFF06B6D4);\n-  static const Color successColor = Color(0xFF10B981);\n-  static const Color warningColor = Color(0xFFF59E0B);\n-  static const Color errorColor = Color(0xFFEF4444);\n-  static const Color surfaceColor = Color(0xFFF8FAFC);\n-  static const Color cardColor = Color(0xFFFFFFFF);\n-\n-  @override\n-  Widget build(BuildContext context) {\n-    return Scaffold(\n-      body: Container(\n-        decoration: const BoxDecoration(\n-          gradient: LinearGradient(\n-            begin: Alignment.topLeft,\n-            end: Alignment.bottomRight,\n-            colors: [Color(0xFFF8FAFC), Color(0xFFE2E8F0)],\n+          SizedBox(height: 16.h),\n+          _buildEnhancedTextField(\n+            controller: controller.streetAddressController,\n+            label: 'عنوان الشارع (اختياري)',\n+            icon: Icons.location_city_outlined,\n+            animationDelay: 4,\n+            hintText: 'مثال: شارع الكفاح، حي المنصور',\n           ),\n-        ),\n-        child: SafeArea(\n-          child: Column(\n-            children: [\n-              _buildAppBar(),\n-              Expanded(\n-                child: SingleChildScrollView(\n-                  physics: const BouncingScrollPhysics(),\n-                  child: Padding(\n-                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n-                    child: Column(\n-                      children: [\n-                        SizedBox(height: 20.h),\n-                        _buildWelcomeSection(),\n-                        _buildPersonalInfoSection(),\n-                        _buildImagesSection(),\n-                        _buildLocationSection(),\n-                        SizedBox(height: 30.h),\n-                        _buildRegisterButton(),\n-                        SizedBox(height: 30.h),\n-                      ],\n-                    ),\n-                  ),\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildAppBar() {\n-    return Container(\n-      padding: EdgeInsets.all(20.w),\n-      decoration: BoxDecoration(\n-        color: cardColor,\n-        boxShadow: [\n-          BoxShadow(\n-            color: Colors.black.withOpacity(0.05),\n-            spreadRadius: 0,\n-            blurRadius: 10.r,\n-            offset: Offset(0, 2.h),\n-          ),\n         ],\n       ),\n-      child: Row(\n-        children: [\n-          GestureDetector(\n-            onTap: () => Get.back(),\n-            child: Container(\n-              padding: EdgeInsets.all(12.w),\n-              decoration: BoxDecoration(\n-                color: surfaceColor,\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.1)),\n-              ),\n-              child: Icon(\n-                Icons.arrow_back_ios_rounded,\n-                color: primaryColor,\n-                size: 20.sp,\n-              ),\n-            ),\n-          ),\n-          SizedBox(width: 16.w),\n-          Expanded(\n-            child: Text(\n-              'تسجيل حساب بائع',\n-              style: TextStyle(\n-                fontSize: 22.sp,\n-                fontWeight: FontWeight.bold,\n-                color: const Color(0xFF1F2937),\n-              ),\n-            ),\n-          ),\n-        ],\n-      ),\n     );\n   }\n \n-  Widget _buildWelcomeSection() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1000),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 50 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              padding: EdgeInsets.all(24.w),\n-              margin: EdgeInsets.only(bottom: 30.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.topLeft,\n-                  end: Alignment.bottomRight,\n-                ),\n-                borderRadius: BorderRadius.circular(24.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.3),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 10.h),\n-                  ),\n-                ],\n-              ),\n-              child: Column(\n-                children: [\n-                  Container(\n-                    padding: EdgeInsets.all(16.w),\n-                    decoration: BoxDecoration(\n-                      color: Colors.white.withOpacity(0.2),\n-                      shape: BoxShape.circle,\n-                    ),\n-                    child: Icon(\n-                      Icons.store_rounded,\n-                      size: 40.sp,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 16.h),\n-                  Text(\n-                    'انضم لشبكة البائعين',\n-                    style: TextStyle(\n-                      fontSize: 20.sp,\n-                      fontWeight: FontWeight.bold,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 8.h),\n-                  Text(\n-                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n-                    textAlign: TextAlign.center,\n-                    style: TextStyle(\n-                      fontSize: 14.sp,\n-                      color: Colors.white.withOpacity(0.9),\n-                    ),\n-                  ),\n-                ],\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildPersonalInfoSection() {\n+  Widget _buildCategorySection() {\n     return Column(\n       children: [\n         _buildAnimatedSectionTitle(\n-          'المعلومات الشخصية',\n-          icon: Icons.person_rounded,\n+          'فئة المتجر',\n+          icon: Icons.category_rounded,\n         ),\n-        _buildEnhancedTextField(\n-          controller: controller.sellerNameController,\n-          label: 'اسم البائع',\n-          icon: Icons.person_outline_rounded,\n-          animationDelay: 0,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopNameController,\n-          label: 'اسم المتجر',\n-          icon: Icons.store_outlined,\n-          animationDelay: 1,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopPhoneNumberController,\n-          label: 'رقم الهاتف',\n-          icon: Icons.phone_outlined,\n-          keyboardType: TextInputType.phone,\n-          animationDelay: 2,\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildImagesSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة البائع الشخصية',\n-          imageFile: controller.sellerProfileImageFile,\n-          onGalleryPressed:\n-              () => controller.pickImage(\n-                ImageSource.gallery,\n-                isProfileImage: true,\n-              ),\n-          onCameraPressed:\n-              () => controller.pickImage(\n-                ImageSource.camera,\n-                isProfileImage: true,\n-              ),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n-          animationDelay: 0,\n-        ),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة واجهة المتجر',\n-          imageFile: controller.shopFrontImageFile,\n-          onGalleryPressed:\n-              () => controller.pickImage(\n-                ImageSource.gallery,\n-                isProfileImage: false,\n-              ),\n-          onCameraPressed:\n-              () => controller.pickImage(\n-                ImageSource.camera,\n-                isProfileImage: false,\n-              ),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n-          animationDelay: 1,\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n         TweenAnimationBuilder<double>(\n           tween: Tween(begin: 0.0, end: 1.0),\n           duration: const Duration(milliseconds: 800),\n           builder: (context, value, child) {\n-            return Transform.scale(\n-              scale: 0.8 + (0.2 * value),\n+            return Transform.translate(\n+              offset: Offset(50 * (1 - value), 0),\n               child: Opacity(\n                 opacity: value,\n                 child: Container(\n-                  margin: EdgeInsets.symmetric(vertical: 12.h),\n                   decoration: BoxDecoration(\n                     color: cardColor,\n-                    borderRadius: BorderRadius.circular(20.r),\n+                    borderRadius: BorderRadius.circular(16.r),\n                     boxShadow: [\n                       BoxShadow(\n-                        color: primaryColor.withOpacity(0.1),\n+                        color: primaryColor.withOpacity(0.08),\n                         spreadRadius: 0,\n                         blurRadius: 20.r,\n-                        offset: Offset(0, 8.h),\n+                        offset: Offset(0, 4.h),\n                       ),\n                     ],\n-                  ),\n-                  child: Padding(\n-                    padding: EdgeInsets.all(20.w),\n-                    child: Column(\n-                      children: [\n-                        Row(\n-                          children: [\n-                            Container(\n-                              padding: EdgeInsets.all(12.w),\n-                              decoration: BoxDecoration(\n-                                gradient: LinearGradient(\n-                                  colors: [accentColor, primaryColor],\n-                                  begin: Alignment.topLeft,\n-                                  end: Alignment.bottomRight,\n-                                ),\n-                                borderRadius: BorderRadius.circular(12.r),\n-                              ),\n-                              child: Icon(\n-                                Icons.my_location_rounded,\n-                                color: Colors.white,\n-                                size: 24.sp,\n-                              ),\n-                            ),\n-                            SizedBox(width: 16.w),\n-                            Expanded(\n-                              child: Column(\n-                                crossAxisAlignment: CrossAxisAlignment.start,\n-                                children: [\n-                                  Text(\n-                                    'موقع المتجر',\n-                                    style: TextStyle(\n-                                      fontSize: 16.sp,\n-                                      fontWeight: FontWeight.w600,\n-                                      color: const Color(0xFF1F2937),\n-                                    ),\n-                                  ),\n-                                  Text(\n-                                    'اختر موقع متجرك على الخريطة',\n-                                    style: TextStyle(\n-                                      fontSize: 12.sp,\n-                                      color: const Color(0xFF6B7280),\n-                                    ),\n-                                  ),\n-                                ],\n-                              ),\n-                            ),\n-                          ],\n-                        ),\n-                        SizedBox(height: 20.h),\n-                        Obx(\n-                          () =>\n-                              controller.shopLocation.value != null\n-                                  ? _buildLocationPreview()\n-                                  : _buildLocationSelector(),\n-                        ),\n-                      ],\n+                    border: Border.all(\n+                      color: primaryColor.withOpacity(0.1),\n+                      width: 1,\n                     ),\n                   ),\n-                ),\n-              ),\n-            );\n-          },\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationPreview() {\n-    return Column(\n-      children: [\n-        Container(\n-          height: 200.h,\n-          width: double.infinity,\n-          decoration: BoxDecoration(\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(color: primaryColor.withOpacity(0.2)),\n-          ),\n-          child: ClipRRect(\n-            borderRadius: BorderRadius.circular(16.r),\n-            child: GoogleMap(\n-              initialCameraPosition: CameraPosition(\n-                target: controller.shopLocation.value!,\n-                zoom: 16,\n-              ),\n-              markers: {\n-                Marker(\n-                  markerId: const MarkerId('selected_location'),\n-                  position: controller.shopLocation.value!,\n-                  icon: BitmapDescriptor.defaultMarkerWithHue(\n-                    BitmapDescriptor.hueBlue,\n-                  ),\n-                ),\n-              },\n-              onTap: (latLng) => controller.shopLocation.value = latLng,\n-              myLocationButtonEnabled: false,\n-              zoomControlsEnabled: false,\n-            ),\n-          ),\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.edit_location_rounded,\n-          label: \"تعديل الموقع\",\n-          onPressed: () => controller.shopLocation.value = null,\n-          gradient: [warningColor, primaryColor],\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationSelector() {\n-    return Column(\n-      children: [\n-        Container(\n-          height: 150.h,\n-          width: double.infinity,\n-          decoration: BoxDecoration(\n-            color: surfaceColor,\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(color: primaryColor.withOpacity(0.2), width: 2),\n-          ),\n-          child: Column(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(16.w),\n-                decoration: BoxDecoration(\n-                  color: primaryColor.withOpacity(0.1),\n-                  shape: BoxShape.circle,\n-                ),\n-                child: Icon(\n-                  Icons.add_location_alt_rounded,\n-                  size: 32.sp,\n-                  color: primaryColor,\n-                ),\n-              ),\n-              SizedBox(height: 12.h),\n-              Text(\n-                'اختر موقع المتجر',\n-                style: TextStyle(\n-                  fontSize: 14.sp,\n-                  color: const Color(0xFF6B7280),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.location_searching_rounded,\n-          label: \"تحديد الموقع\",\n-          onPressed: () => _showLocationPicker(),\n-          gradient: [successColor, accentColor],\n-        ),\n-      ],\n-    );\n-  }\n-\n-  void _showLocationPicker() {\n-    Get.dialog(\n-      Dialog(\n-        backgroundColor: Colors.transparent,\n-        child: Container(\n-          height: 500.h,\n-          margin: EdgeInsets.all(20.w),\n-          decoration: BoxDecoration(\n-            color: cardColor,\n-            borderRadius: BorderRadius.circular(20.r),\n-          ),\n-          child: Column(\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(20.w),\n-                decoration: BoxDecoration(\n-                  gradient: LinearGradient(\n-                    colors: [primaryColor, secondaryColor],\n-                    begin: Alignment.centerLeft,\n-                    end: Alignment.centerRight,\n-                  ),\n-                  borderRadius: BorderRadius.only(\n-                    topLeft: Radius.circular(20.r),\n-                    topRight: Radius.circular(20.r),\n-                  ),\n-                ),\n-                child: Row(\n-                  children: [\n-                    Icon(\n-                      Icons.location_on_rounded,\n-                      color: Colors.white,\n-                      size: 24.sp,\n-                    ),\n-                    SizedBox(width: 12.w),\n-                    Expanded(\n-                      child: Text(\n-                        'اختر موقع المتجر',\n-                        style: TextStyle(\n-                          fontSize: 18.sp,\n-                          fontWeight: FontWeight.bold,\n-                          color: Colors.white,\n-                        ),\n-                      ),\n-                    ),\n-                    GestureDetector(\n-                      onTap: () => Get.back(),\n-                      child: Container(\n+                  child: Obx(() => DropdownButtonFormField<String>(\n+                    value: controller.selectedShopCategory.value,\n+                    decoration: InputDecoration(\n+                      labelText: 'اختر فئة المتجر',\n+                      prefixIcon: Container(\n+                        margin: EdgeInsets.all(12.w),\n                         padding: EdgeInsets.all(8.w),\n                         decoration: BoxDecoration(\n-                          color: Colors.white.withOpacity(0.2),\n-                          shape: BoxShape.circle,\n+                          gradient: LinearGradient(\n+                            colors: [\n+                              primaryColor.withOpacity(0.1),\n+                              secondaryColor.withOpacity(0.1),\n+                            ],\n+                            begin: Alignment.topLeft,\n+                            end: Alignment.bottomRight,\n+                          ),\n+                          borderRadius: BorderRadius.circular(8.r),\n                         ),\n-                        child: Icon(\n-                          Icons.close_rounded,\n-                          color: Colors.white,\n-                          size: 20.sp,\n-                        ),\n+                        child: Icon(Icons.category_outlined, color: primaryColor, size: 20.sp),\n                       ),\n-                    ),\n-                  ],\n-                ),\n-              ),\n-              Expanded(\n-                child: GoogleMap(\n-                  initialCameraPosition: const CameraPosition(\n-                    target: LatLng(24.7136, 46.6753), // Riyadh\n-                    zoom: 12,\n-                  ),\n-                  onTap: (latLng) {\n-                    controller.shopLocation.value = latLng;\n-                    Get.back();\n-                  },\n-                  myLocationButtonEnabled: true,\n-                  myLocationEnabled: true,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildRegisterButton() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1200),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              height: 56.h,\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.4),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                ],\n-              ),\n-              child: Obx(\n-                () => Material(\n-                  color: Colors.transparent,\n-                  child: InkWell(\n-                    onTap:\n-                        controller.isLoading.value\n-                            ? null\n-                            : () =>\n-                                controller\n-                                    .initiatePhoneVerificationAndCollectData(),\n-                    borderRadius: BorderRadius.circular(16.r),\n-                    child: Container(\n-                      padding: EdgeInsets.symmetric(horizontal: 24.w),\n-                      child: Row(\n-                        mainAxisAlignment: MainAxisAlignment.center,\n-                        children: [\n-                          if (controller.isLoading.value) ...[\n-                            SizedBox(\n-                              width: 24.w,\n-                              height: 24.h,\n-                              child: CircularProgressIndicator(\n-                                strokeWidth: 2,\n-                                valueColor: AlwaysStoppedAnimation<Color>(\n-                                  Colors.white,\n-                                ),\n-                              ),\n-                            ),\n-                            SizedBox(width: 16.w),\n-                          ] else ...[\n-                            Icon(\n-                              Icons.check_circle_rounded,\n-                              color: Colors.white,\n-                              size: 24.sp,\n-                            ),\n-                            SizedBox(width: 12.w),\n-                          ],\n-                          Text(\n-                            controller.isLoading.value\n-                                ? 'جارٍ التسجيل...'\n-                                : 'إنشاء حساب البائع',\n-                            style: TextStyle(\n-                              fontSize: 18.sp,\n-                              fontWeight: FontWeight.bold,\n-                              color: Colors.white,\n-                            ),\n-                          ),\n-                        ],\n+                      labelStyle: TextStyle(\n+                        color: const Color(0xFF6B7280),\n+                        fontSize: 14.sp,\n+                        fontWeight: FontWeight.w500,\n                       ),\n-                    ),\n-                  ),\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 800),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 30 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n-              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [\n-                    primaryColor.withOpacity(0.1),\n-                    secondaryColor.withOpacity(0.1),\n-                  ],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.2)),\n-              ),\n-              child: Row(\n-                children: [\n-                  if (icon != null) ...[\n-                    Container(\n-                      padding: EdgeInsets.all(8.w),\n-                      decoration: BoxDecoration(\n-                        color: primaryColor.withOpacity(0.1),\n-                        borderRadius: BorderRadius.circular(8.r),\n+                      border: InputBorder.none,\n+                      contentPadding: EdgeInsets.symmetric(\n+                        horizontal: 16.w,\n+                        vertical: 20.h,\n                       ),\n-                      child: Icon(icon, color: primaryColor, size: 20.sp),\n                     ),\n-                    SizedBox(width: 12.w),\n-                  ],\n-                  Text(\n-                    title,\n                     style: TextStyle(\n-                      fontSize: 18.sp,\n-                      fontWeight: FontWeight.bold,\n+                      fontSize: 16.sp,\n                       color: const Color(0xFF1F2937),\n+                      fontWeight: FontWeight.w500,\n                     ),\n-                  ),\n-                ],\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedTextField({\n-    required TextEditingController controller,\n-    required String label,\n-    required IconData icon,\n-    required int animationDelay,\n-    TextInputType? keyboardType,\n-    String? hintText,\n-    int? maxLines,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(50 * (1 - value), 0),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.08),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 4.h),\n-                  ),\n-                ],\n-                border: Border.all(\n-                  color: primaryColor.withOpacity(0.1),\n-                  width: 1,\n+                    items: controller.shopCategories.map((String category) {\n+                      return DropdownMenuItem<String>(\n+                        value: category,\n+                        child: Text(category),\n+                      );\n+                    }).toList(),\n+                    onChanged: controller.onCategoryChanged,\n+                    validator: (value) {\n+                      if (value == null || value.isEmpty) {\n+                        return 'يرجى اختيار فئة المتجر';\n+                      }\n+                      return null;\n+                    },\n+                  )),\n                 ),\n               ),\n-              child: TextFormField(\n-                controller: controller,\n-                keyboardType: keyboardType,\n-                maxLines: maxLines ?? 1,\n-                style: TextStyle(\n-                  fontSize: 16.sp,\n-                  color: const Color(0xFF1F2937),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-                decoration: InputDecoration(\n-                  labelText: label,\n-                  hintText: hintText,\n-                  prefixIcon: Container(\n-                    margin: EdgeInsets.all(12.w),\n-                    padding: EdgeInsets.all(8.w),\n-                    decoration: BoxDecoration(\n-                      gradient: LinearGradient(\n-                        colors: [\n-                          primaryColor.withOpacity(0.1),\n-                          secondaryColor.withOpacity(0.1),\n-                        ],\n-                        begin: Alignment.topLeft,\n-                        end: Alignment.bottomRight,\n-                      ),\n-                      borderRadius: BorderRadius.circular(8.r),\n-                    ),\n-                    child: Icon(icon, color: primaryColor, size: 20.sp),\n-                  ),\n-                  labelStyle: TextStyle(\n-                    color: const Color(0xFF6B7280),\n-                    fontSize: 14.sp,\n-                    fontWeight: FontWeight.w500,\n-                  ),\n-                  hintStyle: TextStyle(\n-                    color: const Color(0xFF9CA3AF),\n-                    fontSize: 14.sp,\n-                  ),\n-                  border: InputBorder.none,\n-                  contentPadding: EdgeInsets.symmetric(\n-                    horizontal: 16.w,\n-                    vertical: 20.h,\n-                  ),\n-                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedImagePicker({\n-    required String label,\n-    required Rxn<File> imageFile,\n-    required Function() onGalleryPressed,\n-    required Function() onCameraPressed,\n-    required Function()? onRemovePressed,\n-    required int animationDelay,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.symmetric(vertical: 12.h),\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(20.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.1),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                  BoxShadow(\n-                    color: Colors.black.withOpacity(0.05),\n-                    spreadRadius: 0,\n-                    blurRadius: 10.r,\n-                    offset: Offset(0, 2.h),\n-                  ),\n-                ],\n-              ),\n-              child: Padding(\n-                padding: EdgeInsets.all(20.w),\n-                child: Column(\n-                  crossAxisAlignment: CrossAxisAlignment.start,\n-                  children: [\n-                    Row(\n-                      children: [\n-                        Container(\n-                          padding: EdgeInsets.all(8.w),\n-                          decoration: BoxDecoration(\n-                            gradient: LinearGradient(\n-                              colors: [primaryColor, secondaryColor],\n-                              begin: Alignment.topLeft,\n-                              end: Alignment.bottomRight,\n-                            ),\n-                            borderRadius: BorderRadius.circular(10.r),\n-                          ),\n-                          child: Icon(\n-                            Icons.add_a_photo_rounded,\n-                            color: Colors.white,\n-                            size: 20.sp,\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: Text(\n-                            label,\n-                            style: TextStyle(\n-                              fontSize: 16.sp,\n-                              fontWeight: FontWeight.w600,\n-                              color: const Color(0xFF1F2937),\n-                            ),\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Center(\n-                      child: Obx(\n-                        () =>\n-                            imageFile.value != null\n-                                ? _buildImagePreview(\n-                                  imageFile.value!,\n-                                  onRemovePressed,\n-                                )\n-                                : _buildImagePlaceholder(),\n-                      ),\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Row(\n-                      children: [\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.photo_library_rounded,\n-                            label: \"المعرض\",\n-                            onPressed: onGalleryPressed,\n-                            gradient: [accentColor, primaryColor],\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.camera_alt_rounded,\n-                            label: \"الكاميرا\",\n-                            onPressed: onCameraPressed,\n-                            gradient: [successColor, accentColor],\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                  ],\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n-    return Stack(\n-      alignment: Alignment.topRight,\n-      children: [\n-        Hero(\n-          tag: imageFile.path,\n-          child: Container(\n-            height: 200.h,\n-            width: double.infinity,\n-            decoration: BoxDecoration(\n-              borderRadius: BorderRadius.circular(16.r),\n-              boxShadow: [\n-                BoxShadow(\n-                  color: Colors.black.withOpacity(0.1),\n-                  spreadRadius: 0,\n-                  blurRadius: 10.r,\n-                  offset: Offset(0, 4.h),\n-                ),\n-              ],\n-            ),\n-            child: ClipRRect(\n-              borderRadius: BorderRadius.circular(16.r),\n-              child: Image.file(imageFile, fit: BoxFit.cover),\n-            ),\n-          ),\n+            );\n+          },\n         ),\n-        if (onRemovePressed != null)\n-          Positioned(\n-            top: 8.h,\n-            right: 8.w,\n-            child: GestureDetector(\n-              onTap: onRemovePressed,\n-              child: Container(\n-                padding: EdgeInsets.all(8.w),\n-                decoration: BoxDecoration(\n-                  color: errorColor,\n-                  shape: BoxShape.circle,\n-                  boxShadow: [\n-                    BoxShadow(\n-                      color: errorColor.withOpacity(0.3),\n-                      spreadRadius: 0,\n-                      blurRadius: 8.r,\n-                      offset: Offset(0, 2.h),\n-                    ),\n-                  ],\n-                ),\n-                child: Icon(\n-                  Icons.close_rounded,\n-                  color: Colors.white,\n-                  size: 18.sp,\n-                ),\n-              ),\n-            ),\n-          ),\n       ],\n     );\n   }\n \n-  Widget _buildImagePlaceholder() {\n-    return Container(\n-      height: 200.h,\n-      width: double.infinity,\n-      decoration: BoxDecoration(\n-        color: surfaceColor,\n-        borderRadius: BorderRadius.circular(16.r),\n-        border: Border.all(\n-          color: primaryColor.withOpacity(0.2),\n-          width: 2,\n-          strokeAlign: BorderSide.strokeAlignInside,\n-        ),\n-      ),\n-      child: Column(\n-        mainAxisAlignment: MainAxisAlignment.center,\n-        children: [\n-          TweenAnimationBuilder<double>(\n-            tween: Tween(begin: 0.0, end: 1.0),\n-            duration: const Duration(milliseconds: 1500),\n-            builder: (context, value, child) {\n-              return Transform.scale(\n-                scale: 0.8 + (0.2 * value),\n-                child: Container(\n-                  padding: EdgeInsets.all(16.w),\n-                  decoration: BoxDecoration(\n-                    color: primaryColor.withOpacity(0.1),\n-                    shape: BoxShape.circle,\n-                  ),\n-                  child: Icon(\n-                    Icons.add_photo_alternate_rounded,\n-                    size: 48.sp,\n-                    color: primaryColor.withOpacity(0.7),\n-                  ),\n-                ),\n-              );\n-            },\n-          ),\n-          SizedBox(height: 12.h),\n-          Text(\n-            'اضغط لإضافة صورة',\n-            style: TextStyle(\n-              fontSize: 14.sp,\n-              color: const Color(0xFF6B7280),\n-              fontWeight: FontWeight.w500,\n-            ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  Widget _buildImageButton({\n-    required IconData icon,\n-    required String label,\n-    required VoidCallback onPressed,\n-    required List<Color> gradient,\n-  }) {\n-    return Material(\n-      color: Colors.transparent,\n-      child: InkWell(\n-        onTap: onPressed,\n-        borderRadius: BorderRadius.circular(12.r),\n-        child: Container(\n-          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n-          decoration: BoxDecoration(\n-            gradient: LinearGradient(\n-              colors: gradient,\n-              begin: Alignment.topLeft,\n-              end: Alignment.bottomRight,\n-            ),\n-            borderRadius: BorderRadius.circular(12.r),\n-            boxShadow: [\n-              BoxShadow(\n-                color: gradient.first.withOpacity(0.3),\n-                spreadRadius: 0,\n-                blurRadius: 8.r,\n-                offset: Offset(0, 4.h),\n-              ),\n-            ],\n-          ),\n-          child: Row(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              Icon(icon, color: Colors.white, size: 20.sp),\n-              SizedBox(width: 8.w),\n-              Text(\n-                label,\n-                style: TextStyle(\n-                  color: Colors.white,\n-                  fontSize: 14.sp,\n-                  fontWeight: FontWeight.w600,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-}\n-import 'dart:io';\n-import 'package:flutter/material.dart';\n-import 'package:flutter_screenutil/flutter_screenutil.dart';\n-import 'package:get/get.dart';\n-import 'package:google_maps_flutter/google_maps_flutter.dart';\n-import 'package:image_picker/image_picker.dart';\n-\n-import '../controllers/SellerRegistrationController.dart';\n-\n-class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n-  const SellerRegistrationScreen({super.key});\n-\n-  // Color scheme احترافي للتطبيق\n-  static const Color primaryColor = Color(0xFF6366F1);\n-  static const Color secondaryColor = Color(0xFF8B5CF6);\n-  static const Color accentColor = Color(0xFF06B6D4);\n-  static const Color successColor = Color(0xFF10B981);\n-  static const Color warningColor = Color(0xFFF59E0B);\n-  static const Color errorColor = Color(0xFFEF4444);\n-  static const Color surfaceColor = Color(0xFFF8FAFC);\n-  static const Color cardColor = Color(0xFFFFFFFF);\n-\n-  @override\n-  Widget build(BuildContext context) {\n-    return Scaffold(\n-      body: Container(\n-        decoration: const BoxDecoration(\n-          gradient: LinearGradient(\n-            begin: Alignment.topLeft,\n-            end: Alignment.bottomRight,\n-            colors: [Color(0xFFF8FAFC), Color(0xFFE2E8F0)],\n-          ),\n-        ),\n-        child: SafeArea(\n-          child: Column(\n-            children: [\n-              _buildAppBar(),\n-              Expanded(\n-                child: SingleChildScrollView(\n-                  physics: const BouncingScrollPhysics(),\n-                  child: Padding(\n-                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n-                    child: Column(\n-                      children: [\n-                        SizedBox(height: 20.h),\n-                        _buildWelcomeSection(),\n-                        _buildPersonalInfoSection(),\n-                        _buildImagesSection(),\n-                        _buildLocationSection(),\n-                        SizedBox(height: 30.h),\n-                        _buildRegisterButton(),\n-                        SizedBox(height: 30.h),\n-                      ],\n-                    ),\n-                  ),\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildAppBar() {\n-    return Container(\n-      padding: EdgeInsets.all(20.w),\n-      decoration: BoxDecoration(\n-        color: cardColor,\n-        boxShadow: [\n-          BoxShadow(\n-            color: Colors.black.withOpacity(0.05),\n-            spreadRadius: 0,\n-            blurRadius: 10.r,\n-            offset: Offset(0, 2.h),\n-          ),\n-        ],\n-      ),\n-      child: Row(\n-        children: [\n-          GestureDetector(\n-            onTap: () => Get.back(),\n-            child: Container(\n-              padding: EdgeInsets.all(12.w),\n-              decoration: BoxDecoration(\n-                color: surfaceColor,\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.1)),\n-              ),\n-              child: Icon(\n-                Icons.arrow_back_ios_rounded,\n-                color: primaryColor,\n-                size: 20.sp,\n-              ),\n-            ),\n-          ),\n-          SizedBox(width: 16.w),\n-          Expanded(\n-            child: Text(\n-              'تسجيل حساب بائع',\n-              style: TextStyle(\n-                fontSize: 22.sp,\n-                fontWeight: FontWeight.bold,\n-                color: const Color(0xFF1F2937),\n-              ),\n-            ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  Widget _buildWelcomeSection() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1000),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 50 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              padding: EdgeInsets.all(24.w),\n-              margin: EdgeInsets.only(bottom: 30.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.topLeft,\n-                  end: Alignment.bottomRight,\n-                ),\n-                borderRadius: BorderRadius.circular(24.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.3),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 10.h),\n-                  ),\n-                ],\n-              ),\n-              child: Column(\n-                children: [\n-                  Container(\n-                    padding: EdgeInsets.all(16.w),\n-                    decoration: BoxDecoration(\n-                      color: Colors.white.withOpacity(0.2),\n-                      shape: BoxShape.circle,\n-                    ),\n-                    child: Icon(\n-                      Icons.store_rounded,\n-                      size: 40.sp,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 16.h),\n-                  Text(\n-                    'انضم لشبكة البائعين',\n-                    style: TextStyle(\n-                      fontSize: 20.sp,\n-                      fontWeight: FontWeight.bold,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 8.h),\n-                  Text(\n-                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n-                    textAlign: TextAlign.center,\n-                    style: TextStyle(\n-                      fontSize: 14.sp,\n-                      color: Colors.white.withOpacity(0.9),\n-                    ),\n-                  ),\n-                ],\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildPersonalInfoSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle(\n-          'المعلومات الشخصية',\n-          icon: Icons.person_rounded,\n-        ),\n-        _buildEnhancedTextField(\n-          controller: controller.sellerNameController,\n-          label: 'اسم البائع',\n-          icon: Icons.person_outline_rounded,\n-          animationDelay: 0,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopNameController,\n-          label: 'اسم المتجر',\n-          icon: Icons.store_outlined,\n-          animationDelay: 1,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopPhoneNumberController,\n-          label: 'رقم الهاتف',\n-          icon: Icons.phone_outlined,\n-          keyboardType: TextInputType.phone,\n-          animationDelay: 2,\n-        ),\n-      ],\n-    );\n-  }\n-\n   Widget _buildImagesSection() {\n     return Column(\n       children: [\n         _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n@@ -2598,10 +689,9 @@\n                     onTap:\n                         controller.isLoading.value\n                             ? null\n                             : () =>\n-                                controller\n-                                    .initiatePhoneVerificationAndCollectData(),\n+                                controller.submitRegistration(context),\n                     borderRadius: BorderRadius.circular(16.r),\n                     child: Container(\n                       padding: EdgeInsets.symmetric(horizontal: 24.w),\n                       child: Row(\n@@ -2711,8 +801,9 @@\n     required int animationDelay,\n     TextInputType? keyboardType,\n     String? hintText,\n     int? maxLines,\n+    String? Function(String?)? validator,\n   }) {\n     return TweenAnimationBuilder<double>(\n       tween: Tween(begin: 0.0, end: 1.0),\n       duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n@@ -2781,8 +872,9 @@\n                     vertical: 20.h,\n                   ),\n                   floatingLabelBehavior: FloatingLabelBehavior.auto,\n                 ),\n+                validator: validator,\n               ),\n             ),\n           ),\n         );\n@@ -3062,270 +1154,19 @@\n         ),\n       ),\n     );\n   }\n-}\n-import 'dart:io';\n-import 'package:flutter/material.dart';\n-import 'package:flutter_screenutil/flutter_screenutil.dart';\n-import 'package:get/get.dart';\n-import 'package:google_maps_flutter/google_maps_flutter.dart';\n-import 'package:image_picker/image_picker.dart';\n \n-import '../controllers/SellerRegistrationController.dart';\n-\n-class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n-  const SellerRegistrationScreen({super.key});\n-\n-  // Color scheme احترافي للتطبيق\n-  static const Color primaryColor = Color(0xFF6366F1);\n-  static const Color secondaryColor = Color(0xFF8B5CF6);\n-  static const Color accentColor = Color(0xFF06B6D4);\n-  static const Color successColor = Color(0xFF10B981);\n-  static const Color warningColor = Color(0xFFF59E0B);\n-  static const Color errorColor = Color(0xFFEF4444);\n-  static const Color surfaceColor = Color(0xFFF8FAFC);\n-  static const Color cardColor = Color(0xFFFFFFFF);\n-\n-  @override\n-  Widget build(BuildContext context) {\n-    return Scaffold(\n-      body: Container(\n-        decoration: const BoxDecoration(\n-          gradient: LinearGradient(\n-            begin: Alignment.topLeft,\n-            end: Alignment.bottomRight,\n-            colors: [Color(0xFFF8FAFC), Color(0xFFE2E8F0)],\n-          ),\n-        ),\n-        child: SafeArea(\n-          child: Column(\n-            children: [\n-              _buildAppBar(),\n-              Expanded(\n-                child: SingleChildScrollView(\n-                  physics: const BouncingScrollPhysics(),\n-                  child: Padding(\n-                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n-                    child: Column(\n-                      children: [\n-                        SizedBox(height: 20.h),\n-                        _buildWelcomeSection(),\n-                        _buildPersonalInfoSection(),\n-                        _buildImagesSection(),\n-                        _buildLocationSection(),\n-                        SizedBox(height: 30.h),\n-                        _buildRegisterButton(),\n-                        SizedBox(height: 30.h),\n-                      ],\n-                    ),\n-                  ),\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildAppBar() {\n-    return Container(\n-      padding: EdgeInsets.all(20.w),\n-      decoration: BoxDecoration(\n-        color: cardColor,\n-        boxShadow: [\n-          BoxShadow(\n-            color: Colors.black.withOpacity(0.05),\n-            spreadRadius: 0,\n-            blurRadius: 10.r,\n-            offset: Offset(0, 2.h),\n-          ),\n-        ],\n-      ),\n-      child: Row(\n-        children: [\n-          GestureDetector(\n-            onTap: () => Get.back(),\n-            child: Container(\n-              padding: EdgeInsets.all(12.w),\n-              decoration: BoxDecoration(\n-                color: surfaceColor,\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.1)),\n-              ),\n-              child: Icon(\n-                Icons.arrow_back_ios_rounded,\n-                color: primaryColor,\n-                size: 20.sp,\n-              ),\n-            ),\n-          ),\n-          SizedBox(width: 16.w),\n-          Expanded(\n-            child: Text(\n-              'تسجيل حساب بائع',\n-              style: TextStyle(\n-                fontSize: 22.sp,\n-                fontWeight: FontWeight.bold,\n-                color: const Color(0xFF1F2937),\n-              ),\n-            ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  Widget _buildWelcomeSection() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1000),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 50 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              padding: EdgeInsets.all(24.w),\n-              margin: EdgeInsets.only(bottom: 30.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.topLeft,\n-                  end: Alignment.bottomRight,\n-                ),\n-                borderRadius: BorderRadius.circular(24.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.3),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 10.h),\n-                  ),\n-                ],\n-              ),\n-              child: Column(\n-                children: [\n-                  Container(\n-                    padding: EdgeInsets.all(16.w),\n-                    decoration: BoxDecoration(\n-                      color: Colors.white.withOpacity(0.2),\n-                      shape: BoxShape.circle,\n-                    ),\n-                    child: Icon(\n-                      Icons.store_rounded,\n-                      size: 40.sp,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 16.h),\n-                  Text(\n-                    'انضم لشبكة البائعين',\n-                    style: TextStyle(\n-                      fontSize: 20.sp,\n-                      fontWeight: FontWeight.bold,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 8.h),\n-                  Text(\n-                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n-                    textAlign: TextAlign.center,\n-                    style: TextStyle(\n-                      fontSize: 14.sp,\n-                      color: Colors.white.withOpacity(0.9),\n-                    ),\n-                  ),\n-                ],\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildPersonalInfoSection() {\n+  Widget _buildWorkingHoursSection() {\n     return Column(\n       children: [\n         _buildAnimatedSectionTitle(\n-          'المعلومات الشخصية',\n-          icon: Icons.person_rounded,\n+          'أوقات العمل',\n+          icon: Icons.access_time_rounded,\n         ),\n-        _buildEnhancedTextField(\n-          controller: controller.sellerNameController,\n-          label: 'اسم البائع',\n-          icon: Icons.person_outline_rounded,\n-          animationDelay: 0,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopNameController,\n-          label: 'اسم المتجر',\n-          icon: Icons.store_outlined,\n-          animationDelay: 1,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopPhoneNumberController,\n-          label: 'رقم الهاتف',\n-          icon: Icons.phone_outlined,\n-          keyboardType: TextInputType.phone,\n-          animationDelay: 2,\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildImagesSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة البائع الشخصية',\n-          imageFile: controller.sellerProfileImageFile,\n-          onGalleryPressed:\n-              () => controller.pickImage(\n-                ImageSource.gallery,\n-                isProfileImage: true,\n-              ),\n-          onCameraPressed:\n-              () => controller.pickImage(\n-                ImageSource.camera,\n-                isProfileImage: true,\n-              ),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n-          animationDelay: 0,\n-        ),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة واجهة المتجر',\n-          imageFile: controller.shopFrontImageFile,\n-          onGalleryPressed:\n-              () => controller.pickImage(\n-                ImageSource.gallery,\n-                isProfileImage: false,\n-              ),\n-          onCameraPressed:\n-              () => controller.pickImage(\n-                ImageSource.camera,\n-                isProfileImage: false,\n-              ),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n-          animationDelay: 1,\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n         TweenAnimationBuilder<double>(\n           tween: Tween(begin: 0.0, end: 1.0),\n-          duration: const Duration(milliseconds: 800),\n+          duration: const Duration(milliseconds: 1000),\n           builder: (context, value, child) {\n             return Transform.scale(\n               scale: 0.8 + (0.2 * value),\n               child: Opacity(\n@@ -3346,23 +1187,24 @@\n                   ),\n                   child: Padding(\n                     padding: EdgeInsets.all(20.w),\n                     child: Column(\n+                      crossAxisAlignment: CrossAxisAlignment.start,\n                       children: [\n                         Row(\n                           children: [\n                             Container(\n                               padding: EdgeInsets.all(12.w),\n                               decoration: BoxDecoration(\n                                 gradient: LinearGradient(\n-                                  colors: [accentColor, primaryColor],\n+                                  colors: [primaryColor, secondaryColor],\n                                   begin: Alignment.topLeft,\n                                   end: Alignment.bottomRight,\n                                 ),\n                                 borderRadius: BorderRadius.circular(12.r),\n                               ),\n                               child: Icon(\n-                                Icons.my_location_rounded,\n+                                Icons.schedule_rounded,\n                                 color: Colors.white,\n                                 size: 24.sp,\n                               ),\n                             ),\n@@ -3371,17 +1213,17 @@\n                               child: Column(\n                                 crossAxisAlignment: CrossAxisAlignment.start,\n                                 children: [\n                                   Text(\n-                                    'موقع المتجر',\n+                                    'أوقات عمل المتجر',\n                                     style: TextStyle(\n                                       fontSize: 16.sp,\n                                       fontWeight: FontWeight.w600,\n                                       color: const Color(0xFF1F2937),\n                                     ),\n                                   ),\n                                   Text(\n-                                    'اختر موقع متجرك على الخريطة',\n+                                    'حدد أيام وأوقات عمل متجرك',\n                                     style: TextStyle(\n                                       fontSize: 12.sp,\n                                       color: const Color(0xFF6B7280),\n                                     ),\n@@ -3391,14 +1233,9 @@\n                             ),\n                           ],\n                         ),\n                         SizedBox(height: 20.h),\n-                        Obx(\n-                          () =>\n-                              controller.shopLocation.value != null\n-                                  ? _buildLocationPreview()\n-                                  : _buildLocationSelector(),\n-                        ),\n+                        Obx(() => _buildWorkingDaysList()),\n                       ],\n                     ),\n                   ),\n                 ),\n@@ -3409,1673 +1246,191 @@\n       ],\n     );\n   }\n \n-  Widget _buildLocationPreview() {\n+  Widget _buildWorkingDaysList() {\n     return Column(\n-      children: [\n-        Container(\n-          height: 200.h,\n-          width: double.infinity,\n-          decoration: BoxDecoration(\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(color: primaryColor.withOpacity(0.2)),\n-          ),\n-          child: ClipRRect(\n-            borderRadius: BorderRadius.circular(16.r),\n-            child: GoogleMap(\n-              initialCameraPosition: CameraPosition(\n-                target: controller.shopLocation.value!,\n-                zoom: 16,\n-              ),\n-              markers: {\n-                Marker(\n-                  markerId: const MarkerId('selected_location'),\n-                  position: controller.shopLocation.value!,\n-                  icon: BitmapDescriptor.defaultMarkerWithHue(\n-                    BitmapDescriptor.hueBlue,\n-                  ),\n-                ),\n-              },\n-              onTap: (latLng) => controller.shopLocation.value = latLng,\n-              myLocationButtonEnabled: false,\n-              zoomControlsEnabled: false,\n-            ),\n-          ),\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.edit_location_rounded,\n-          label: \"تعديل الموقع\",\n-          onPressed: () => controller.shopLocation.value = null,\n-          gradient: [warningColor, primaryColor],\n-        ),\n-      ],\n-    );\n-  }\n+      children: controller.dayKeys.map((dayKey) {\n+        final dayData = controller.workingHours[dayKey]!;\n+        final dayName = dayData['name_ar'] as String;\n+        final isOpen = dayData['isOpen'] as bool;\n+        final opensAt = dayData['opensAt'] as String?;\n+        final closesAt = dayData['closesAt'] as String?;\n \n-  Widget _buildLocationSelector() {\n-    return Column(\n-      children: [\n-        Container(\n-          height: 150.h,\n-          width: double.infinity,\n+        return Container(\n+          margin: EdgeInsets.only(bottom: 12.h),\n           decoration: BoxDecoration(\n-            color: surfaceColor,\n+            color: isOpen ? primaryColor.withOpacity(0.05) : surfaceColor,\n             borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(color: primaryColor.withOpacity(0.2), width: 2),\n-          ),\n-          child: Column(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(16.w),\n-                decoration: BoxDecoration(\n-                  color: primaryColor.withOpacity(0.1),\n-                  shape: BoxShape.circle,\n-                ),\n-                child: Icon(\n-                  Icons.add_location_alt_rounded,\n-                  size: 32.sp,\n-                  color: primaryColor,\n-                ),\n-              ),\n-              SizedBox(height: 12.h),\n-              Text(\n-                'اختر موقع المتجر',\n-                style: TextStyle(\n-                  fontSize: 14.sp,\n-                  color: const Color(0xFF6B7280),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.location_searching_rounded,\n-          label: \"تحديد الموقع\",\n-          onPressed: () => _showLocationPicker(),\n-          gradient: [successColor, accentColor],\n-        ),\n-      ],\n-    );\n-  }\n-\n-  void _showLocationPicker() {\n-    Get.dialog(\n-      Dialog(\n-        backgroundColor: Colors.transparent,\n-        child: Container(\n-          height: 500.h,\n-          margin: EdgeInsets.all(20.w),\n-          decoration: BoxDecoration(\n-            color: cardColor,\n-            borderRadius: BorderRadius.circular(20.r),\n-          ),\n-          child: Column(\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(20.w),\n-                decoration: BoxDecoration(\n-                  gradient: LinearGradient(\n-                    colors: [primaryColor, secondaryColor],\n-                    begin: Alignment.centerLeft,\n-                    end: Alignment.centerRight,\n-                  ),\n-                  borderRadius: BorderRadius.only(\n-                    topLeft: Radius.circular(20.r),\n-                    topRight: Radius.circular(20.r),\n-                  ),\n-                ),\n-                child: Row(\n-                  children: [\n-                    Icon(\n-                      Icons.location_on_rounded,\n-                      color: Colors.white,\n-                      size: 24.sp,\n-                    ),\n-                    SizedBox(width: 12.w),\n-                    Expanded(\n-                      child: Text(\n-                        'اختر موقع المتجر',\n-                        style: TextStyle(\n-                          fontSize: 18.sp,\n-                          fontWeight: FontWeight.bold,\n-                          color: Colors.white,\n-                        ),\n-                      ),\n-                    ),\n-                    GestureDetector(\n-                      onTap: () => Get.back(),\n-                      child: Container(\n-                        padding: EdgeInsets.all(8.w),\n-                        decoration: BoxDecoration(\n-                          color: Colors.white.withOpacity(0.2),\n-                          shape: BoxShape.circle,\n-                        ),\n-                        child: Icon(\n-                          Icons.close_rounded,\n-                          color: Colors.white,\n-                          size: 20.sp,\n-                        ),\n-                      ),\n-                    ),\n-                  ],\n-                ),\n-              ),\n-              Expanded(\n-                child: GoogleMap(\n-                  initialCameraPosition: const CameraPosition(\n-                    target: LatLng(24.7136, 46.6753), // Riyadh\n-                    zoom: 12,\n-                  ),\n-                  onTap: (latLng) {\n-                    controller.shopLocation.value = latLng;\n-                    Get.back();\n-                  },\n-                  myLocationButtonEnabled: true,\n-                  myLocationEnabled: true,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildRegisterButton() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1200),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              height: 56.h,\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.4),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                ],\n-              ),\n-              child: Obx(\n-                () => Material(\n-                  color: Colors.transparent,\n-                  child: InkWell(\n-                    onTap:\n-                        controller.isLoading.value\n-                            ? null\n-                            : () =>\n-                                controller\n-                                    .initiatePhoneVerificationAndCollectData(),\n-                    borderRadius: BorderRadius.circular(16.r),\n-                    child: Container(\n-                      padding: EdgeInsets.symmetric(horizontal: 24.w),\n-                      child: Row(\n-                        mainAxisAlignment: MainAxisAlignment.center,\n-                        children: [\n-                          if (controller.isLoading.value) ...[\n-                            SizedBox(\n-                              width: 24.w,\n-                              height: 24.h,\n-                              child: CircularProgressIndicator(\n-                                strokeWidth: 2,\n-                                valueColor: AlwaysStoppedAnimation<Color>(\n-                                  Colors.white,\n-                                ),\n-                              ),\n-                            ),\n-                            SizedBox(width: 16.w),\n-                          ] else ...[\n-                            Icon(\n-                              Icons.check_circle_rounded,\n-                              color: Colors.white,\n-                              size: 24.sp,\n-                            ),\n-                            SizedBox(width: 12.w),\n-                          ],\n-                          Text(\n-                            controller.isLoading.value\n-                                ? 'جارٍ التسجيل...'\n-                                : 'إنشاء حساب البائع',\n-                            style: TextStyle(\n-                              fontSize: 18.sp,\n-                              fontWeight: FontWeight.bold,\n-                              color: Colors.white,\n-                            ),\n-                          ),\n-                        ],\n-                      ),\n-                    ),\n-                  ),\n-                ),\n-              ),\n+            border: Border.all(\n+              color: isOpen ? primaryColor.withOpacity(0.2) : Colors.grey.withOpacity(0.2),\n+              width: 1,\n             ),\n           ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 800),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 30 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n-              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [\n-                    primaryColor.withOpacity(0.1),\n-                    secondaryColor.withOpacity(0.1),\n-                  ],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.2)),\n-              ),\n-              child: Row(\n-                children: [\n-                  if (icon != null) ...[\n-                    Container(\n-                      padding: EdgeInsets.all(8.w),\n-                      decoration: BoxDecoration(\n-                        color: primaryColor.withOpacity(0.1),\n-                        borderRadius: BorderRadius.circular(8.r),\n-                      ),\n-                      child: Icon(icon, color: primaryColor, size: 20.sp),\n-                    ),\n-                    SizedBox(width: 12.w),\n-                  ],\n-                  Text(\n-                    title,\n-                    style: TextStyle(\n-                      fontSize: 18.sp,\n-                      fontWeight: FontWeight.bold,\n-                      color: const Color(0xFF1F2937),\n-                    ),\n-                  ),\n-                ],\n-              ),\n+          child: Theme(\n+            data: Theme.of(Get.context!).copyWith(\n+              dividerColor: Colors.transparent,\n             ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedTextField({\n-    required TextEditingController controller,\n-    required String label,\n-    required IconData icon,\n-    required int animationDelay,\n-    TextInputType? keyboardType,\n-    String? hintText,\n-    int? maxLines,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(50 * (1 - value), 0),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.08),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 4.h),\n-                  ),\n-                ],\n-                border: Border.all(\n-                  color: primaryColor.withOpacity(0.1),\n-                  width: 1,\n-                ),\n-              ),\n-              child: TextFormField(\n-                controller: controller,\n-                keyboardType: keyboardType,\n-                maxLines: maxLines ?? 1,\n-                style: TextStyle(\n-                  fontSize: 16.sp,\n-                  color: const Color(0xFF1F2937),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-                decoration: InputDecoration(\n-                  labelText: label,\n-                  hintText: hintText,\n-                  prefixIcon: Container(\n-                    margin: EdgeInsets.all(12.w),\n-                    padding: EdgeInsets.all(8.w),\n-                    decoration: BoxDecoration(\n-                      gradient: LinearGradient(\n-                        colors: [\n-                          primaryColor.withOpacity(0.1),\n-                          secondaryColor.withOpacity(0.1),\n-                        ],\n-                        begin: Alignment.topLeft,\n-                        end: Alignment.bottomRight,\n-                      ),\n-                      borderRadius: BorderRadius.circular(8.r),\n-                    ),\n-                    child: Icon(icon, color: primaryColor, size: 20.sp),\n-                  ),\n-                  labelStyle: TextStyle(\n-                    color: const Color(0xFF6B7280),\n-                    fontSize: 14.sp,\n-                    fontWeight: FontWeight.w500,\n-                  ),\n-                  hintStyle: TextStyle(\n-                    color: const Color(0xFF9CA3AF),\n-                    fontSize: 14.sp,\n-                  ),\n-                  border: InputBorder.none,\n-                  contentPadding: EdgeInsets.symmetric(\n-                    horizontal: 16.w,\n-                    vertical: 20.h,\n-                  ),\n-                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedImagePicker({\n-    required String label,\n-    required Rxn<File> imageFile,\n-    required Function() onGalleryPressed,\n-    required Function() onCameraPressed,\n-    required Function()? onRemovePressed,\n-    required int animationDelay,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.symmetric(vertical: 12.h),\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(20.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.1),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                  BoxShadow(\n-                    color: Colors.black.withOpacity(0.05),\n-                    spreadRadius: 0,\n-                    blurRadius: 10.r,\n-                    offset: Offset(0, 2.h),\n-                  ),\n-                ],\n-              ),\n-              child: Padding(\n-                padding: EdgeInsets.all(20.w),\n-                child: Column(\n-                  crossAxisAlignment: CrossAxisAlignment.start,\n-                  children: [\n-                    Row(\n-                      children: [\n-                        Container(\n-                          padding: EdgeInsets.all(8.w),\n-                          decoration: BoxDecoration(\n-                            gradient: LinearGradient(\n-                              colors: [primaryColor, secondaryColor],\n-                              begin: Alignment.topLeft,\n-                              end: Alignment.bottomRight,\n-                            ),\n-                            borderRadius: BorderRadius.circular(10.r),\n-                          ),\n-                          child: Icon(\n-                            Icons.add_a_photo_rounded,\n-                            color: Colors.white,\n-                            size: 20.sp,\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: Text(\n-                            label,\n-                            style: TextStyle(\n-                              fontSize: 16.sp,\n-                              fontWeight: FontWeight.w600,\n-                              color: const Color(0xFF1F2937),\n-                            ),\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Center(\n-                      child: Obx(\n-                        () =>\n-                            imageFile.value != null\n-                                ? _buildImagePreview(\n-                                  imageFile.value!,\n-                                  onRemovePressed,\n-                                )\n-                                : _buildImagePlaceholder(),\n-                      ),\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Row(\n-                      children: [\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.photo_library_rounded,\n-                            label: \"المعرض\",\n-                            onPressed: onGalleryPressed,\n-                            gradient: [accentColor, primaryColor],\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.camera_alt_rounded,\n-                            label: \"الكاميرا\",\n-                            onPressed: onCameraPressed,\n-                            gradient: [successColor, accentColor],\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                  ],\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n-    return Stack(\n-      alignment: Alignment.topRight,\n-      children: [\n-        Hero(\n-          tag: imageFile.path,\n-          child: Container(\n-            height: 200.h,\n-            width: double.infinity,\n-            decoration: BoxDecoration(\n-              borderRadius: BorderRadius.circular(16.r),\n-              boxShadow: [\n-                BoxShadow(\n-                  color: Colors.black.withOpacity(0.1),\n-                  spreadRadius: 0,\n-                  blurRadius: 10.r,\n-                  offset: Offset(0, 4.h),\n-                ),\n-              ],\n-            ),\n-            child: ClipRRect(\n-              borderRadius: BorderRadius.circular(16.r),\n-              child: Image.file(imageFile, fit: BoxFit.cover),\n-            ),\n-          ),\n-        ),\n-        if (onRemovePressed != null)\n-          Positioned(\n-            top: 8.h,\n-            right: 8.w,\n-            child: GestureDetector(\n-              onTap: onRemovePressed,\n-              child: Container(\n+            child: ExpansionTile(\n+              key: ValueKey(dayKey),\n+              initiallyExpanded: false,\n+              tilePadding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 8.h),\n+              childrenPadding: EdgeInsets.all(16.w),\n+              leading: Container(\n                 padding: EdgeInsets.all(8.w),\n                 decoration: BoxDecoration(\n-                  color: errorColor,\n-                  shape: BoxShape.circle,\n-                  boxShadow: [\n-                    BoxShadow(\n-                      color: errorColor.withOpacity(0.3),\n-                      spreadRadius: 0,\n-                      blurRadius: 8.r,\n-                      offset: Offset(0, 2.h),\n-                    ),\n-                  ],\n+                  color: isOpen ? primaryColor.withOpacity(0.1) : Colors.grey.withOpacity(0.1),\n+                  borderRadius: BorderRadius.circular(8.r),\n                 ),\n                 child: Icon(\n-                  Icons.close_rounded,\n-                  color: Colors.white,\n-                  size: 18.sp,\n+                  isOpen ? Icons.store_rounded : Icons.store_mall_directory_outlined,\n+                  color: isOpen ? primaryColor : Colors.grey,\n+                  size: 20.sp,\n                 ),\n               ),\n-            ),\n-          ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildImagePlaceholder() {\n-    return Container(\n-      height: 200.h,\n-      width: double.infinity,\n-      decoration: BoxDecoration(\n-        color: surfaceColor,\n-        borderRadius: BorderRadius.circular(16.r),\n-        border: Border.all(\n-          color: primaryColor.withOpacity(0.2),\n-          width: 2,\n-          strokeAlign: BorderSide.strokeAlignInside,\n-        ),\n-      ),\n-      child: Column(\n-        mainAxisAlignment: MainAxisAlignment.center,\n-        children: [\n-          TweenAnimationBuilder<double>(\n-            tween: Tween(begin: 0.0, end: 1.0),\n-            duration: const Duration(milliseconds: 1500),\n-            builder: (context, value, child) {\n-              return Transform.scale(\n-                scale: 0.8 + (0.2 * value),\n-                child: Container(\n-                  padding: EdgeInsets.all(16.w),\n-                  decoration: BoxDecoration(\n-                    color: primaryColor.withOpacity(0.1),\n-                    shape: BoxShape.circle,\n-                  ),\n-                  child: Icon(\n-                    Icons.add_photo_alternate_rounded,\n-                    size: 48.sp,\n-                    color: primaryColor.withOpacity(0.7),\n-                  ),\n-                ),\n-              );\n-            },\n-          ),\n-          SizedBox(height: 12.h),\n-          Text(\n-            'اضغط لإضافة صورة',\n-            style: TextStyle(\n-              fontSize: 14.sp,\n-              color: const Color(0xFF6B7280),\n-              fontWeight: FontWeight.w500,\n-            ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  Widget _buildImageButton({\n-    required IconData icon,\n-    required String label,\n-    required VoidCallback onPressed,\n-    required List<Color> gradient,\n-  }) {\n-    return Material(\n-      color: Colors.transparent,\n-      child: InkWell(\n-        onTap: onPressed,\n-        borderRadius: BorderRadius.circular(12.r),\n-        child: Container(\n-          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n-          decoration: BoxDecoration(\n-            gradient: LinearGradient(\n-              colors: gradient,\n-              begin: Alignment.topLeft,\n-              end: Alignment.bottomRight,\n-            ),\n-            borderRadius: BorderRadius.circular(12.r),\n-            boxShadow: [\n-              BoxShadow(\n-                color: gradient.first.withOpacity(0.3),\n-                spreadRadius: 0,\n-                blurRadius: 8.r,\n-                offset: Offset(0, 4.h),\n-              ),\n-            ],\n-          ),\n-          child: Row(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              Icon(icon, color: Colors.white, size: 20.sp),\n-              SizedBox(width: 8.w),\n-              Text(\n-                label,\n+              title: Text(\n+                dayName,\n                 style: TextStyle(\n-                  color: Colors.white,\n-                  fontSize: 14.sp,\n+                  fontSize: 16.sp,\n                   fontWeight: FontWeight.w600,\n+                  color: isOpen ? const Color(0xFF1F2937) : const Color(0xFF6B7280),\n                 ),\n               ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-}\n-import 'dart:io';\n-import 'package:flutter/material.dart';\n-import 'package:flutter_screenutil/flutter_screenutil.dart';\n-import 'package:get/get.dart';\n-import 'package:google_maps_flutter/google_maps_flutter.dart';\n-import 'package:image_picker/image_picker.dart';\n-\n-import '../controllers/SellerRegistrationController.dart';\n-\n-class SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n-  const SellerRegistrationScreen({super.key});\n-\n-  // Color scheme احترافي للتطبيق\n-  static const Color primaryColor = Color(0xFF6366F1);\n-  static const Color secondaryColor = Color(0xFF8B5CF6);\n-  static const Color accentColor = Color(0xFF06B6D4);\n-  static const Color successColor = Color(0xFF10B981);\n-  static const Color warningColor = Color(0xFFF59E0B);\n-  static const Color errorColor = Color(0xFFEF4444);\n-  static const Color surfaceColor = Color(0xFFF8FAFC);\n-  static const Color cardColor = Color(0xFFFFFFFF);\n-\n-  @override\n-  Widget build(BuildContext context) {\n-    return Scaffold(\n-      body: Container(\n-        decoration: const BoxDecoration(\n-          gradient: LinearGradient(\n-            begin: Alignment.topLeft,\n-            end: Alignment.bottomRight,\n-            colors: [\n-              Color(0xFFF8FAFC),\n-              Color(0xFFE2E8F0),\n-            ],\n-          ),\n-        ),\n-        child: SafeArea(\n-          child: Column(\n-            children: [\n-              _buildAppBar(),\n-              Expanded(\n-                child: SingleChildScrollView(\n-                  physics: const BouncingScrollPhysics(),\n-                  child: Padding(\n-                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n-                    child: Column(\n-                      children: [\n-                        SizedBox(height: 20.h),\n-                        _buildWelcomeSection(),\n-                        _buildPersonalInfoSection(),\n-                        _buildImagesSection(),\n-                        _buildLocationSection(),\n-                        SizedBox(height: 30.h),\n-                        _buildRegisterButton(),\n-                        SizedBox(height: 30.h),\n-                      ],\n+              subtitle: isOpen && opensAt != null && closesAt != null\n+                  ? Text(\n+                      '$opensAt - $closesAt',\n+                      style: TextStyle(\n+                        fontSize: 12.sp,\n+                        color: primaryColor,\n+                        fontWeight: FontWeight.w500,\n+                      ),\n+                    )\n+                  : Text(\n+                      isOpen ? 'محدد كمفتوح - اختر الأوقات' : 'مغلق',\n+                      style: TextStyle(\n+                        fontSize: 12.sp,\n+                        color: isOpen ? warningColor : const Color(0xFF9CA3AF),\n+                      ),\n                     ),\n-                  ),\n-                ),\n+              trailing: Switch(\n+                value: isOpen,\n+                onChanged: (value) => controller.toggleDayOpen(dayKey),\n+                activeColor: primaryColor,\n+                inactiveThumbColor: Colors.grey,\n+                inactiveTrackColor: Colors.grey.withOpacity(0.3),\n               ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildAppBar() {\n-    return Container(\n-      padding: EdgeInsets.all(20.w),\n-      decoration: BoxDecoration(\n-        color: cardColor,\n-        boxShadow: [\n-          BoxShadow(\n-            color: Colors.black.withOpacity(0.05),\n-            spreadRadius: 0,\n-            blurRadius: 10.r,\n-            offset: Offset(0, 2.h),\n-          ),\n-        ],\n-      ),\n-      child: Row(\n-        children: [\n-          GestureDetector(\n-            onTap: () => Get.back(),\n-            child: Container(\n-              padding: EdgeInsets.all(12.w),\n-              decoration: BoxDecoration(\n-                color: surfaceColor,\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.1)),\n-              ),\n-              child: Icon(\n-                Icons.arrow_back_ios_rounded,\n-                color: primaryColor,\n-                size: 20.sp,\n-              ),\n+              children: isOpen ? [\n+                _buildTimeSelectionRow(dayKey, dayData),\n+              ] : [],\n             ),\n           ),\n-          SizedBox(width: 16.w),\n-          Expanded(\n-            child: Text(\n-              'تسجيل حساب بائع',\n-              style: TextStyle(\n-                fontSize: 22.sp,\n-                fontWeight: FontWeight.bold,\n-                color: const Color(0xFF1F2937),\n-              ),\n-            ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  Widget _buildWelcomeSection() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1000),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 50 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              padding: EdgeInsets.all(24.w),\n-              margin: EdgeInsets.only(bottom: 30.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.topLeft,\n-                  end: Alignment.bottomRight,\n-                ),\n-                borderRadius: BorderRadius.circular(24.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.3),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 10.h),\n-                  ),\n-                ],\n-              ),\n-              child: Column(\n-                children: [\n-                  Container(\n-                    padding: EdgeInsets.all(16.w),\n-                    decoration: BoxDecoration(\n-                      color: Colors.white.withOpacity(0.2),\n-                      shape: BoxShape.circle,\n-                    ),\n-                    child: Icon(\n-                      Icons.store_rounded,\n-                      size: 40.sp,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 16.h),\n-                  Text(\n-                    'انضم لشبكة البائعين',\n-                    style: TextStyle(\n-                      fontSize: 20.sp,\n-                      fontWeight: FontWeight.bold,\n-                      color: Colors.white,\n-                    ),\n-                  ),\n-                  SizedBox(height: 8.h),\n-                  Text(\n-                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n-                    textAlign: TextAlign.center,\n-                    style: TextStyle(\n-                      fontSize: 14.sp,\n-                      color: Colors.white.withOpacity(0.9),\n-                    ),\n-                  ),\n-                ],\n-              ),\n-            ),\n-          ),\n         );\n-      },\n+      }).toList(),\n     );\n   }\n \n-  Widget _buildPersonalInfoSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('المعلومات الشخصية', icon: Icons.person_rounded),\n-        _buildEnhancedTextField(\n-          controller: controller.sellerNameController,\n-          label: 'اسم البائع',\n-          icon: Icons.person_outline_rounded,\n-          animationDelay: 0,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopNameController,\n-          label: 'اسم المتجر',\n-          icon: Icons.store_outlined,\n-          animationDelay: 1,\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildEnhancedTextField(\n-          controller: controller.shopPhoneNumberController,\n-          label: 'رقم الهاتف',\n-          icon: Icons.phone_outlined,\n-          keyboardType: TextInputType.phone,\n-          animationDelay: 2,\n-        ),\n-      ],\n-    );\n-  }\n+  Widget _buildTimeSelectionRow(String dayKey, Map<String, dynamic> dayData) {\n+    final opensAt = dayData['opensAt'] as String?;\n+    final closesAt = dayData['closesAt'] as String?;\n \n-  Widget _buildImagesSection() {\n     return Column(\n       children: [\n-        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة البائع الشخصية',\n-          imageFile: controller.sellerProfileImageFile,\n-          onGalleryPressed: () => controller.pickImage(ImageSource.gallery, isProfileImage: true),\n-          onCameraPressed: () => controller.pickImage(ImageSource.camera, isProfileImage: true),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n-          animationDelay: 0,\n-        ),\n-        _buildEnhancedImagePicker(\n-          label: 'صورة واجهة المتجر',\n-          imageFile: controller.shopFrontImageFile,\n-          onGalleryPressed: () => controller.pickImage(ImageSource.gallery, isProfileImage: false),\n-          onCameraPressed: () => controller.pickImage(ImageSource.camera, isProfileImage: false),\n-          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n-          animationDelay: 1,\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationSection() {\n-    return Column(\n-      children: [\n-        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n-        TweenAnimationBuilder<double>(\n-          tween: Tween(begin: 0.0, end: 1.0),\n-          duration: const Duration(milliseconds: 800),\n-          builder: (context, value, child) {\n-            return Transform.scale(\n-              scale: 0.8 + (0.2 * value),\n-              child: Opacity(\n-                opacity: value,\n-                child: Container(\n-                  margin: EdgeInsets.symmetric(vertical: 12.h),\n-                  decoration: BoxDecoration(\n-                    color: cardColor,\n-                    borderRadius: BorderRadius.circular(20.r),\n-                    boxShadow: [\n-                      BoxShadow(\n-                        color: primaryColor.withOpacity(0.1),\n-                        spreadRadius: 0,\n-                        blurRadius: 20.r,\n-                        offset: Offset(0, 8.h),\n-                      ),\n-                    ],\n-                  ),\n-                  child: Padding(\n-                    padding: EdgeInsets.all(20.w),\n-                    child: Column(\n-                      children: [\n-                        Row(\n-                          children: [\n-                            Container(\n-                              padding: EdgeInsets.all(12.w),\n-                              decoration: BoxDecoration(\n-                                gradient: LinearGradient(\n-                                  colors: [accentColor, primaryColor],\n-                                  begin: Alignment.topLeft,\n-                                  end: Alignment.bottomRight,\n-                                ),\n-                                borderRadius: BorderRadius.circular(12.r),\n-                              ),\n-                              child: Icon(\n-                                Icons.my_location_rounded,\n-                                color: Colors.white,\n-                                size: 24.sp,\n-                              ),\n-                            ),\n-                            SizedBox(width: 16.w),\n-                            Expanded(\n-                              child: Column(\n-                                crossAxisAlignment: CrossAxisAlignment.start,\n-                                children: [\n-                                  Text(\n-                                    'موقع المتجر',\n-                                    style: TextStyle(\n-                                      fontSize: 16.sp,\n-                                      fontWeight: FontWeight.w600,\n-                                      color: const Color(0xFF1F2937),\n-                                    ),\n-                                  ),\n-                                  Text(\n-                                    'اختر موقع متجرك على الخريطة',\n-                                    style: TextStyle(\n-                                      fontSize: 12.sp,\n-                                      color: const Color(0xFF6B7280),\n-                                    ),\n-                                  ),\n-                                ],\n-                              ),\n-                            ),\n-                          ],\n-                        ),\n-                        SizedBox(height: 20.h),\n-                        Obx(() => controller.shopLocation.value != null\n-                            ? _buildLocationPreview()\n-                            : _buildLocationSelector()),\n-                      ],\n-                    ),\n-                  ),\n-                ),\n+        Row(\n+          children: [\n+            Expanded(\n+              child: _buildTimeButton(\n+                label: 'وقت الفتح',\n+                time: opensAt ?? 'اختر',\n+                icon: Icons.wb_sunny_rounded,\n+                onPressed: () => controller.selectTime(Get.context!, dayKey, true),\n+                color: successColor,\n               ),\n-            );\n-          },\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationPreview() {\n-    return Column(\n-      children: [\n-        Container(\n-          height: 200.h,\n-          width: double.infinity,\n-          decoration: BoxDecoration(\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(color: primaryColor.withOpacity(0.2)),\n-          ),\n-          child: ClipRRect(\n-            borderRadius: BorderRadius.circular(16.r),\n-            child: GoogleMap(\n-              initialCameraPosition: CameraPosition(\n-                target: controller.shopLocation.value!,\n-                zoom: 16,\n+            ),\n+            SizedBox(width: 16.w),\n+            Expanded(\n+              child: _buildTimeButton(\n+                label: 'وقت الإغلاق',\n+                time: closesAt ?? 'اختر',\n+                icon: Icons.nightlight_round,\n+                onPressed: () => controller.selectTime(Get.context!, dayKey, false),\n+                color: errorColor,\n               ),\n-              markers: {\n-                Marker(\n-                  markerId: const MarkerId('selected_location'),\n-                  position: controller.shopLocation.value!,\n-                  icon: BitmapDescriptor.defaultMarkerWithHue(BitmapDescriptor.hueBlue),\n-                ),\n-              },\n-              onTap: (latLng) => controller.shopLocation.value = latLng,\n-              myLocationButtonEnabled: false,\n-              zoomControlsEnabled: false,\n             ),\n-          ),\n+          ],\n         ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.edit_location_rounded,\n-          label: \"تعديل الموقع\",\n-          onPressed: () => controller.shopLocation.value = null,\n-          gradient: [warningColor, primaryColor],\n-        ),\n-      ],\n-    );\n-  }\n-\n-  Widget _buildLocationSelector() {\n-    return Column(\n-      children: [\n-        Container(\n-          height: 150.h,\n-          width: double.infinity,\n-          decoration: BoxDecoration(\n-            color: surfaceColor,\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(\n-              color: primaryColor.withOpacity(0.2),\n-              width: 2,\n-            ),\n-          ),\n-          child: Column(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(16.w),\n-                decoration: BoxDecoration(\n-                  color: primaryColor.withOpacity(0.1),\n-                  shape: BoxShape.circle,\n-                ),\n-                child: Icon(\n-                  Icons.add_location_alt_rounded,\n-                  size: 32.sp,\n-                  color: primaryColor,\n-                ),\n-              ),\n-              SizedBox(height: 12.h),\n-              Text(\n-                'اختر موقع المتجر',\n-                style: TextStyle(\n-                  fontSize: 14.sp,\n-                  color: const Color(0xFF6B7280),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-        SizedBox(height: 16.h),\n-        _buildImageButton(\n-          icon: Icons.location_searching_rounded,\n-          label: \"تحديد الموقع\",\n-          onPressed: () => _showLocationPicker(),\n-          gradient: [successColor, accentColor],\n-        ),\n-      ],\n-    );\n-  }\n-\n-  void _showLocationPicker() {\n-    Get.dialog(\n-      Dialog(\n-        backgroundColor: Colors.transparent,\n-        child: Container(\n-          height: 500.h,\n-          margin: EdgeInsets.all(20.w),\n-          decoration: BoxDecoration(\n-            color: cardColor,\n-            borderRadius: BorderRadius.circular(20.r),\n-          ),\n-          child: Column(\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(20.w),\n-                decoration: BoxDecoration(\n-                  gradient: LinearGradient(\n-                    colors: [primaryColor, secondaryColor],\n-                    begin: Alignment.centerLeft,\n-                    end: Alignment.centerRight,\n-                  ),\n-                  borderRadius: BorderRadius.only(\n-                    topLeft: Radius.circular(20.r),\n-                    topRight: Radius.circular(20.r),\n-                  ),\n-                ),\n-                child: Row(\n-                  children: [\n-                    Icon(\n-                      Icons.location_on_rounded,\n-                      color: Colors.white,\n-                      size: 24.sp,\n-                    ),\n-                    SizedBox(width: 12.w),\n-                    Expanded(\n-                      child: Text(\n-                        'اختر موقع المتجر',\n-                        style: TextStyle(\n-                          fontSize: 18.sp,\n-                          fontWeight: FontWeight.bold,\n-                          color: Colors.white,\n-                        ),\n-                      ),\n-                    ),\n-                    GestureDetector(\n-                      onTap: () => Get.back(),\n-                      child: Container(\n-                        padding: EdgeInsets.all(8.w),\n-                        decoration: BoxDecoration(\n-                          color: Colors.white.withOpacity(0.2),\n-                          shape: BoxShape.circle,\n-                        ),\n-                        child: Icon(\n-                          Icons.close_rounded,\n-                          color: Colors.white,\n-                          size: 20.sp,\n-                        ),\n-                      ),\n-                    ),\n-                  ],\n-                ),\n-              ),\n-              Expanded(\n-                child: GoogleMap(\n-                  initialCameraPosition: const CameraPosition(\n-                    target: LatLng(24.7136, 46.6753), // Riyadh\n-                    zoom: 12,\n-                  ),\n-                  onTap: (latLng) {\n-                    controller.shopLocation.value = latLng;\n-                    Get.back();\n-                  },\n-                  myLocationButtonEnabled: true,\n-                  myLocationEnabled: true,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-\n-  Widget _buildRegisterButton() {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 1200),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              width: double.infinity,\n-              height: 56.h,\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor, secondaryColor],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.4),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                ],\n-              ),\n-              child: Obx(() => Material(\n-                color: Colors.transparent,\n-                child: InkWell(\n-                  onTap: controller.isLoading.value ? null : () => controller.initiatePhoneVerificationAndCollectData(),\n-                  borderRadius: BorderRadius.circular(16.r),\n-                  child: Container(\n-                    padding: EdgeInsets.symmetric(horizontal: 24.w),\n-                    child: Row(\n-                      mainAxisAlignment: MainAxisAlignment.center,\n-                      children: [\n-                        if (controller.isLoading.value) ...[\n-                          SizedBox(\n-                            width: 24.w,\n-                            height: 24.h,\n-                            child: CircularProgressIndicator(\n-                              strokeWidth: 2,\n-                              valueColor: AlwaysStoppedAnimation<Color>(Colors.white),\n-                            ),\n-                          ),\n-                          SizedBox(width: 16.w),\n-                        ] else ...[\n-                          Icon(\n-                            Icons.check_circle_rounded,\n-                            color: Colors.white,\n-                            size: 24.sp,\n-                          ),\n-                          SizedBox(width: 12.w),\n-                        ],\n-                        Text(\n-                          controller.isLoading.value ? 'جارٍ التسجيل...' : 'إنشاء حساب البائع',\n-                          style: TextStyle(\n-                            fontSize: 18.sp,\n-                            fontWeight: FontWeight.bold,\n-                            color: Colors.white,\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                  ),\n-                ),\n-              )),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: const Duration(milliseconds: 800),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(0, 30 * (1 - value)),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n-              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [primaryColor.withOpacity(0.1), secondaryColor.withOpacity(0.1)],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n-                ),\n-                borderRadius: BorderRadius.circular(12.r),\n-                border: Border.all(color: primaryColor.withOpacity(0.2)),\n-              ),\n-              child: Row(\n-                children: [\n-                  if (icon != null) ...[\n-                    Container(\n-                      padding: EdgeInsets.all(8.w),\n-                      decoration: BoxDecoration(\n-                        color: primaryColor.withOpacity(0.1),\n-                        borderRadius: BorderRadius.circular(8.r),\n-                      ),\n-                      child: Icon(\n-                        icon,\n-                        color: primaryColor,\n-                        size: 20.sp,\n-                      ),\n-                    ),\n-                    SizedBox(width: 12.w),\n-                  ],\n-                  Text(\n-                    title,\n-                    style: TextStyle(\n-                      fontSize: 18.sp,\n-                      fontWeight: FontWeight.bold,\n-                      color: const Color(0xFF1F2937),\n-                    ),\n-                  ),\n-                ],\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedTextField({\n-    required TextEditingController controller,\n-    required String label,\n-    required IconData icon,\n-    required int animationDelay,\n-    TextInputType? keyboardType,\n-    String? hintText,\n-    int? maxLines,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.translate(\n-          offset: Offset(50 * (1 - value), 0),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(16.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.08),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 4.h),\n-                  ),\n-                ],\n-                border: Border.all(\n-                  color: primaryColor.withOpacity(0.1),\n-                  width: 1,\n-                ),\n-              ),\n-              child: TextFormField(\n-                controller: controller,\n-                keyboardType: keyboardType,\n-                maxLines: maxLines ?? 1,\n-                style: TextStyle(\n-                  fontSize: 16.sp,\n-                  color: const Color(0xFF1F2937),\n-                  fontWeight: FontWeight.w500,\n-                ),\n-                decoration: InputDecoration(\n-                  labelText: label,\n-                  hintText: hintText,\n-                  prefixIcon: Container(\n-                    margin: EdgeInsets.all(12.w),\n-                    padding: EdgeInsets.all(8.w),\n-                    decoration: BoxDecoration(\n-                      gradient: LinearGradient(\n-                        colors: [primaryColor.withOpacity(0.1), secondaryColor.withOpacity(0.1)],\n-                        begin: Alignment.topLeft,\n-                        end: Alignment.bottomRight,\n-                      ),\n-                      borderRadius: BorderRadius.circular(8.r),\n-                    ),\n-                    child: Icon(\n-                      icon,\n-                      color: primaryColor,\n-                      size: 20.sp,\n-                    ),\n-                  ),\n-                  labelStyle: TextStyle(\n-                    color: const Color(0xFF6B7280),\n-                    fontSize: 14.sp,\n-                    fontWeight: FontWeight.w500,\n-                  ),\n-                  hintStyle: TextStyle(\n-                    color: const Color(0xFF9CA3AF),\n-                    fontSize: 14.sp,\n-                  ),\n-                  border: InputBorder.none,\n-                  contentPadding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 20.h),\n-                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildEnhancedImagePicker({\n-    required String label,\n-    required Rxn<File> imageFile,\n-    required Function() onGalleryPressed,\n-    required Function() onCameraPressed,\n-    required Function()? onRemovePressed,\n-    required int animationDelay,\n-  }) {\n-    return TweenAnimationBuilder<double>(\n-      tween: Tween(begin: 0.0, end: 1.0),\n-      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n-      builder: (context, value, child) {\n-        return Transform.scale(\n-          scale: 0.8 + (0.2 * value),\n-          child: Opacity(\n-            opacity: value,\n-            child: Container(\n-              margin: EdgeInsets.symmetric(vertical: 12.h),\n-              decoration: BoxDecoration(\n-                color: cardColor,\n-                borderRadius: BorderRadius.circular(20.r),\n-                boxShadow: [\n-                  BoxShadow(\n-                    color: primaryColor.withOpacity(0.1),\n-                    spreadRadius: 0,\n-                    blurRadius: 20.r,\n-                    offset: Offset(0, 8.h),\n-                  ),\n-                  BoxShadow(\n-                    color: Colors.black.withOpacity(0.05),\n-                    spreadRadius: 0,\n-                    blurRadius: 10.r,\n-                    offset: Offset(0, 2.h),\n-                  ),\n-                ],\n-              ),\n-              child: Padding(\n-                padding: EdgeInsets.all(20.w),\n-                child: Column(\n-                  crossAxisAlignment: CrossAxisAlignment.start,\n-                  children: [\n-                    Row(\n-                      children: [\n-                        Container(\n-                          padding: EdgeInsets.all(8.w),\n-                          decoration: BoxDecoration(\n-                            gradient: LinearGradient(\n-                              colors: [primaryColor, secondaryColor],\n-                              begin: Alignment.topLeft,\n-                              end: Alignment.bottomRight,\n-                            ),\n-                            borderRadius: BorderRadius.circular(10.r),\n-                          ),\n-                          child: Icon(\n-                            Icons.add_a_photo_rounded,\n-                            color: Colors.white,\n-                            size: 20.sp,\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: Text(\n-                            label,\n-                            style: TextStyle(\n-                              fontSize: 16.sp,\n-                              fontWeight: FontWeight.w600,\n-                              color: const Color(0xFF1F2937),\n-                            ),\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Center(\n-                      child: Obx(() => imageFile.value != null\n-                          ? _buildImagePreview(imageFile.value!, onRemovePressed)\n-                          : _buildImagePlaceholder()),\n-                    ),\n-                    SizedBox(height: 16.h),\n-                    Row(\n-                      children: [\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.photo_library_rounded,\n-                            label: \"المعرض\",\n-                            onPressed: onGalleryPressed,\n-                            gradient: [accentColor, primaryColor],\n-                          ),\n-                        ),\n-                        SizedBox(width: 12.w),\n-                        Expanded(\n-                          child: _buildImageButton(\n-                            icon: Icons.camera_alt_rounded,\n-                            label: \"الكاميرا\",\n-                            onPressed: onCameraPressed,\n-                            gradient: [successColor, accentColor],\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n-                  ],\n-                ),\n-              ),\n-            ),\n-          ),\n-        );\n-      },\n-    );\n-  }\n-\n-  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n-    return Stack(\n-      alignment: Alignment.topRight,\n-      children: [\n-        Hero(\n-          tag: imageFile.path,\n-          child: Container(\n-            height: 200.h,\n+        if (controller.canApplyToOthers(dayKey) && opensAt != null && closesAt != null) ...[\n+          SizedBox(height: 16.h),\n+          Container(\n             width: double.infinity,\n-            decoration: BoxDecoration(\n-              borderRadius: BorderRadius.circular(16.r),\n-              boxShadow: [\n-                BoxShadow(\n-                  color: Colors.black.withOpacity(0.1),\n-                  spreadRadius: 0,\n-                  blurRadius: 10.r,\n-                  offset: Offset(0, 4.h),\n-                ),\n-              ],\n-            ),\n-            child: ClipRRect(\n-              borderRadius: BorderRadius.circular(16.r),\n-              child: Image.file(\n-                imageFile,\n-                fit: BoxFit.cover,\n+            child: OutlinedButton.icon(\n+              onPressed: () => controller.offerToApplyTimesToOtherDays(\n+                Get.context!, dayKey, opensAt, closesAt,\n               ),\n-            ),\n-          ),\n-        ),\n-        if (onRemovePressed != null)\n-          Positioned(\n-            top: 8.h,\n-            right: 8.w,\n-            child: GestureDetector(\n-              onTap: onRemovePressed,\n-              child: Container(\n-                padding: EdgeInsets.all(8.w),\n-                decoration: BoxDecoration(\n-                  color: errorColor,\n-                  shape: BoxShape.circle,\n-                  boxShadow: [\n-                    BoxShadow(\n-                      color: errorColor.withOpacity(0.3),\n-                      spreadRadius: 0,\n-                      blurRadius: 8.r,\n-                      offset: Offset(0, 2.h),\n-                    ),\n-                  ],\n+              icon: Icon(Icons.copy_all_rounded, size: 18.sp),\n+              label: Text('تطبيق على أيام أخرى'),\n+              style: OutlinedButton.styleFrom(\n+                foregroundColor: primaryColor,\n+                side: BorderSide(color: primaryColor.withOpacity(0.5)),\n+                shape: RoundedRectangleBorder(\n+                  borderRadius: BorderRadius.circular(12.r),\n                 ),\n-                child: Icon(\n-                  Icons.close_rounded,\n-                  color: Colors.white,\n-                  size: 18.sp,\n-                ),\n+                padding: EdgeInsets.symmetric(vertical: 12.h),\n               ),\n             ),\n           ),\n+        ],\n       ],\n     );\n   }\n \n-  Widget _buildImagePlaceholder() {\n-    return Container(\n-      height: 200.h,\n-      width: double.infinity,\n-      decoration: BoxDecoration(\n-        color: surfaceColor,\n-        borderRadius: BorderRadius.circular(16.r),\n-        border: Border.all(\n-          color: primaryColor.withOpacity(0.2),\n-          width: 2,\n-          strokeAlign: BorderSide.strokeAlignInside,\n\\ No newline at end of file\n-        ),\n-      ),\n-      child: Column(\n-        mainAxisAlignment: MainAxisAlignment.center,\n-        children: [\n-          TweenAnimationBuilder<double>(\n-            tween: Tween(begin: 0.0, end: 1.0),\n-            duration: const Duration(milliseconds: 1500),\n-            builder: (context, value, child) {\n-              return Transform.scale(\n-                scale: 0.8 + (0.2 * value),\n-                child: Container(\n-                  padding: EdgeInsets.all(16.w),\n-                  decoration: BoxDecoration(\n-                    color: primaryColor.withOpacity(0.1),\n-                    shape: BoxShape.circle,\n-                  ),\n-                  child: Icon(\n-                    Icons.add_photo_alternate_rounded,\n-                    size: 48.sp,\n-                    color: primaryColor.withOpacity(0.7),\n-                  ),\n-                ),\n-              );\n-            },\n-          ),\n-          SizedBox(height: 12.h),\n-          Text(\n-            'اضغط لإضافة صورة',\n-            style: TextStyle(\n-              fontSize: 14.sp,\n-              color: const Color(0xFF6B7280),\n-              fontWeight: FontWeight.w500,\n-            ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  Widget _buildImageButton({\n+  Widget _buildTimeButton({\n+    required String label,\n+    required String time,\n     required IconData icon,\n-    required String label,\n     required VoidCallback onPressed,\n-    required List<Color> gradient,\n+    required Color color,\n   }) {\n     return Material(\n       color: Colors.transparent,\n       child: InkWell(\n         onTap: onPressed,\n         borderRadius: BorderRadius.circular(12.r),\n         child: Container(\n-          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n+          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 12.w),\n           decoration: BoxDecoration(\n             gradient: LinearGradient(\n-              colors: gradient,\n+              colors: [color.withOpacity(0.1), color.withOpacity(0.05)],\n               begin: Alignment.topLeft,\n               end: Alignment.bottomRight,\n             ),\n             borderRadius: BorderRadius.circular(12.r),\n-            boxShadow: [\n-              BoxShadow(\n-                color: gradient.first.withOpacity(0.3),\n-                spreadRadius: 0,\n-                blurRadius: 8.r,\n-                offset: Offset(0, 4.h),\n-              ),\n-            ],\n+            border: Border.all(color: color.withOpacity(0.3)),\n           ),\n-          child: Row(\n-            mainAxisAlignment: MainAxisAlignment.center,\n+          child: Column(\n+            mainAxisSize: MainAxisSize.min,\n             children: [\n-              Icon(\n-                icon,\n-                color: Colors.white,\n-                size: 20.sp,\n-              ),\n-              SizedBox(width: 8.w),\n+              Icon(icon, color: color, size: 20.sp),\n+              SizedBox(height: 4.h),\n               Text(\n                 label,\n                 style: TextStyle(\n-                  color: Colors.white,\n-                  fontSize: 14.sp,\n+                  fontSize: 10.sp,\n+                  color: color,\n+                  fontWeight: FontWeight.w500,\n+                ),\n+              ),\n+              SizedBox(height: 2.h),\n+              Text(\n+                time,\n+                style: TextStyle(\n+                  fontSize: 12.sp,\n                   fontWeight: FontWeight.w600,\n+                  color: const Color(0xFF1F2937),\n                 ),\n               ),\n             ],\n           ),\n         ),\n       ),\n     );\n   }\n-}\n+}\n"
                },
                {
                    "date": 1752491126708,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -258,12 +258,9 @@\n \n   Widget _buildCategorySection() {\n     return Column(\n       children: [\n-        _buildAnimatedSectionTitle(\n-          'فئة المتجر',\n-          icon: Icons.category_rounded,\n-        ),\n+        _buildAnimatedSectionTitle('فئة المتجر', icon: Icons.category_rounded),\n         TweenAnimationBuilder<double>(\n           tween: Tween(begin: 0.0, end: 1.0),\n           duration: const Duration(milliseconds: 800),\n           builder: (context, value, child) {\n@@ -287,58 +284,65 @@\n                       color: primaryColor.withOpacity(0.1),\n                       width: 1,\n                     ),\n                   ),\n-                  child: Obx(() => DropdownButtonFormField<String>(\n-                    value: controller.selectedShopCategory.value,\n-                    decoration: InputDecoration(\n-                      labelText: 'اختر فئة المتجر',\n-                      prefixIcon: Container(\n-                        margin: EdgeInsets.all(12.w),\n-                        padding: EdgeInsets.all(8.w),\n-                        decoration: BoxDecoration(\n-                          gradient: LinearGradient(\n-                            colors: [\n-                              primaryColor.withOpacity(0.1),\n-                              secondaryColor.withOpacity(0.1),\n-                            ],\n-                            begin: Alignment.topLeft,\n-                            end: Alignment.bottomRight,\n+                  child: Obx(\n+                    () => DropdownButtonFormField<String>(\n+                      value: controller.selectedShopCategory.value,\n+                      decoration: InputDecoration(\n+                        labelText: 'اختر فئة المتجر',\n+                        prefixIcon: Container(\n+                          margin: EdgeInsets.all(12.w),\n+                          padding: EdgeInsets.all(8.w),\n+                          decoration: BoxDecoration(\n+                            gradient: LinearGradient(\n+                              colors: [\n+                                primaryColor.withOpacity(0.1),\n+                                secondaryColor.withOpacity(0.1),\n+                              ],\n+                              begin: Alignment.topLeft,\n+                              end: Alignment.bottomRight,\n+                            ),\n+                            borderRadius: BorderRadius.circular(8.r),\n                           ),\n-                          borderRadius: BorderRadius.circular(8.r),\n+                          child: Icon(\n+                            Icons.category_outlined,\n+                            color: primaryColor,\n+                            size: 20.sp,\n+                          ),\n                         ),\n-                        child: Icon(Icons.category_outlined, color: primaryColor, size: 20.sp),\n+                        labelStyle: TextStyle(\n+                          color: const Color(0xFF6B7280),\n+                          fontSize: 14.sp,\n+                          fontWeight: FontWeight.w500,\n+                        ),\n+                        border: InputBorder.none,\n+                        contentPadding: EdgeInsets.symmetric(\n+                          horizontal: 16.w,\n+                          vertical: 20.h,\n+                        ),\n                       ),\n-                      labelStyle: TextStyle(\n-                        color: const Color(0xFF6B7280),\n-                        fontSize: 14.sp,\n+                      style: TextStyle(\n+                        fontSize: 16.sp,\n+                        color: const Color(0xFF1F2937),\n                         fontWeight: FontWeight.w500,\n                       ),\n-                      border: InputBorder.none,\n-                      contentPadding: EdgeInsets.symmetric(\n-                        horizontal: 16.w,\n-                        vertical: 20.h,\n-                      ),\n+                      items:\n+                          controller.shopCategories.map((String category) {\n+                            return DropdownMenuItem<String>(\n+                              value: category,\n+                              child: Text(category),\n+                            );\n+                          }).toList(),\n+                      onChanged: controller.onCategoryChanged,\n+                      validator: (value) {\n+                        if (value == null || value.isEmpty) {\n+                          return 'يرجى اختيار فئة المتجر';\n+                        }\n+                        return null;\n+                      },\n                     ),\n-                    style: TextStyle(\n-                      fontSize: 16.sp,\n-                      color: const Color(0xFF1F2937),\n-                      fontWeight: FontWeight.w500,\n-                    ),\n-                    items: controller.shopCategories.map((String category) {\n-                      return DropdownMenuItem<String>(\n-                        value: category,\n-                        child: Text(category),\n-                      );\n-                    }).toList(),\n-                    onChanged: controller.onCategoryChanged,\n-                    validator: (value) {\n-                      if (value == null || value.isEmpty) {\n-                        return 'يرجى اختيار فئة المتجر';\n-                      }\n-                      return null;\n-                    },\n-                  )),\n+                  ),\n                 ),\n               ),\n             );\n           },\n@@ -688,10 +692,9 @@\n                   child: InkWell(\n                     onTap:\n                         controller.isLoading.value\n                             ? null\n-                            : () =>\n-                                controller.submitRegistration(context),\n+                            : () => controller.submitRegistration(context),\n                     borderRadius: BorderRadius.circular(16.r),\n                     child: Container(\n                       padding: EdgeInsets.symmetric(horizontal: 24.w),\n                       child: Row(\n@@ -1248,84 +1251,102 @@\n   }\n \n   Widget _buildWorkingDaysList() {\n     return Column(\n-      children: controller.dayKeys.map((dayKey) {\n-        final dayData = controller.workingHours[dayKey]!;\n-        final dayName = dayData['name_ar'] as String;\n-        final isOpen = dayData['isOpen'] as bool;\n-        final opensAt = dayData['opensAt'] as String?;\n-        final closesAt = dayData['closesAt'] as String?;\n+      children:\n+          controller.dayKeys.map((dayKey) {\n+            final dayData = controller.workingHours[dayKey]!;\n+            final dayName = dayData['name_ar'] as String;\n+            final isOpen = dayData['isOpen'] as bool;\n+            final opensAt = dayData['opensAt'] as String?;\n+            final closesAt = dayData['closesAt'] as String?;\n \n-        return Container(\n-          margin: EdgeInsets.only(bottom: 12.h),\n-          decoration: BoxDecoration(\n-            color: isOpen ? primaryColor.withOpacity(0.05) : surfaceColor,\n-            borderRadius: BorderRadius.circular(16.r),\n-            border: Border.all(\n-              color: isOpen ? primaryColor.withOpacity(0.2) : Colors.grey.withOpacity(0.2),\n-              width: 1,\n-            ),\n-          ),\n-          child: Theme(\n-            data: Theme.of(Get.context!).copyWith(\n-              dividerColor: Colors.transparent,\n-            ),\n-            child: ExpansionTile(\n-              key: ValueKey(dayKey),\n-              initiallyExpanded: false,\n-              tilePadding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 8.h),\n-              childrenPadding: EdgeInsets.all(16.w),\n-              leading: Container(\n-                padding: EdgeInsets.all(8.w),\n-                decoration: BoxDecoration(\n-                  color: isOpen ? primaryColor.withOpacity(0.1) : Colors.grey.withOpacity(0.1),\n-                  borderRadius: BorderRadius.circular(8.r),\n+            return Container(\n+              margin: EdgeInsets.only(bottom: 12.h),\n+              decoration: BoxDecoration(\n+                color: isOpen ? primaryColor.withOpacity(0.05) : surfaceColor,\n+                borderRadius: BorderRadius.circular(16.r),\n+                border: Border.all(\n+                  color:\n+                      isOpen\n+                          ? primaryColor.withOpacity(0.2)\n+                          : Colors.grey.withOpacity(0.2),\n+                  width: 1,\n                 ),\n-                child: Icon(\n-                  isOpen ? Icons.store_rounded : Icons.store_mall_directory_outlined,\n-                  color: isOpen ? primaryColor : Colors.grey,\n-                  size: 20.sp,\n-                ),\n               ),\n-              title: Text(\n-                dayName,\n-                style: TextStyle(\n-                  fontSize: 16.sp,\n-                  fontWeight: FontWeight.w600,\n-                  color: isOpen ? const Color(0xFF1F2937) : const Color(0xFF6B7280),\n+              child: Theme(\n+                data: Theme.of(\n+                  Get.context!,\n+                ).copyWith(dividerColor: Colors.transparent),\n+                child: ExpansionTile(\n+                  key: ValueKey(dayKey),\n+                  initiallyExpanded: false,\n+                  tilePadding: EdgeInsets.symmetric(\n+                    horizontal: 16.w,\n+                    vertical: 8.h,\n+                  ),\n+                  childrenPadding: EdgeInsets.all(16.w),\n+                  leading: Container(\n+                    padding: EdgeInsets.all(8.w),\n+                    decoration: BoxDecoration(\n+                      color:\n+                          isOpen\n+                              ? primaryColor.withOpacity(0.1)\n+                              : Colors.grey.withOpacity(0.1),\n+                      borderRadius: BorderRadius.circular(8.r),\n+                    ),\n+                    child: Icon(\n+                      isOpen\n+                          ? Icons.store_rounded\n+                          : Icons.store_mall_directory_outlined,\n+                      color: isOpen ? primaryColor : Colors.grey,\n+                      size: 20.sp,\n+                    ),\n+                  ),\n+                  title: Text(\n+                    dayName,\n+                    style: TextStyle(\n+                      fontSize: 16.sp,\n+                      fontWeight: FontWeight.w600,\n+                      color:\n+                          isOpen\n+                              ? const Color(0xFF1F2937)\n+                              : const Color(0xFF6B7280),\n+                    ),\n+                  ),\n+                  subtitle:\n+                      isOpen && opensAt != null && closesAt != null\n+                          ? Text(\n+                            '$opensAt - $closesAt',\n+                            style: TextStyle(\n+                              fontSize: 12.sp,\n+                              color: primaryColor,\n+                              fontWeight: FontWeight.w500,\n+                            ),\n+                          )\n+                          : Text(\n+                            isOpen ? 'محدد كمفتوح - اختر الأوقات' : 'مغلق',\n+                            style: TextStyle(\n+                              fontSize: 12.sp,\n+                              color:\n+                                  isOpen\n+                                      ? warningColor\n+                                      : const Color(0xFF9CA3AF),\n+                            ),\n+                          ),\n+                  trailing: Switch(\n+                    value: isOpen,\n+                    onChanged: (value) => controller.toggleDayOpen(dayKey),\n+                    activeColor: primaryColor,\n+                    inactiveThumbColor: Colors.grey,\n+                    inactiveTrackColor: Colors.grey.withOpacity(0.3),\n+                  ),\n+                  children:\n+                      isOpen ? [_buildTimeSelectionRow(dayKey, dayData)] : [],\n                 ),\n               ),\n-              subtitle: isOpen && opensAt != null && closesAt != null\n-                  ? Text(\n-                      '$opensAt - $closesAt',\n-                      style: TextStyle(\n-                        fontSize: 12.sp,\n-                        color: primaryColor,\n-                        fontWeight: FontWeight.w500,\n-                      ),\n-                    )\n-                  : Text(\n-                      isOpen ? 'محدد كمفتوح - اختر الأوقات' : 'مغلق',\n-                      style: TextStyle(\n-                        fontSize: 12.sp,\n-                        color: isOpen ? warningColor : const Color(0xFF9CA3AF),\n-                      ),\n-                    ),\n-              trailing: Switch(\n-                value: isOpen,\n-                onChanged: (value) => controller.toggleDayOpen(dayKey),\n-                activeColor: primaryColor,\n-                inactiveThumbColor: Colors.grey,\n-                inactiveTrackColor: Colors.grey.withOpacity(0.3),\n-              ),\n-              children: isOpen ? [\n-                _buildTimeSelectionRow(dayKey, dayData),\n-              ] : [],\n-            ),\n-          ),\n-        );\n-      }).toList(),\n+            );\n+          }).toList(),\n     );\n   }\n \n   Widget _buildTimeSelectionRow(String dayKey, Map<String, dynamic> dayData) {\n@@ -1340,9 +1361,10 @@\n               child: _buildTimeButton(\n                 label: 'وقت الفتح',\n                 time: opensAt ?? 'اختر',\n                 icon: Icons.wb_sunny_rounded,\n-                onPressed: () => controller.selectTime(Get.context!, dayKey, true),\n+                onPressed:\n+                    () => controller.selectTime(Get.context!, dayKey, true),\n                 color: successColor,\n               ),\n             ),\n             SizedBox(width: 16.w),\n@@ -1350,22 +1372,29 @@\n               child: _buildTimeButton(\n                 label: 'وقت الإغلاق',\n                 time: closesAt ?? 'اختر',\n                 icon: Icons.nightlight_round,\n-                onPressed: () => controller.selectTime(Get.context!, dayKey, false),\n+                onPressed:\n+                    () => controller.selectTime(Get.context!, dayKey, false),\n                 color: errorColor,\n               ),\n             ),\n           ],\n         ),\n-        if (controller.canApplyToOthers(dayKey) && opensAt != null && closesAt != null) ...[\n+        if (controller.canApplyToOthers(dayKey) &&\n+            opensAt != null &&\n+            closesAt != null) ...[\n           SizedBox(height: 16.h),\n           Container(\n             width: double.infinity,\n             child: OutlinedButton.icon(\n-              onPressed: () => controller.offerToApplyTimesToOtherDays(\n-                Get.context!, dayKey, opensAt, closesAt,\n-              ),\n+              onPressed:\n+                  () => controller.offerToApplyTimesToOtherDays(\n+                    Get.context!,\n+                    dayKey,\n+                    opensAt,\n+                    closesAt,\n+                  ),\n               icon: Icon(Icons.copy_all_rounded, size: 18.sp),\n               label: Text('تطبيق على أيام أخرى'),\n               style: OutlinedButton.styleFrom(\n                 foregroundColor: primaryColor,\n"
                },
                {
                    "date": 1752570376698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -284,63 +284,97 @@\n                       color: primaryColor.withOpacity(0.1),\n                       width: 1,\n                     ),\n                   ),\n-                  child: Obx(\n-                    () => DropdownButtonFormField<String>(\n-                      value: controller.selectedShopCategory.value,\n-                      decoration: InputDecoration(\n-                        labelText: 'اختر فئة المتجر',\n-                        prefixIcon: Container(\n-                          margin: EdgeInsets.all(12.w),\n-                          padding: EdgeInsets.all(8.w),\n-                          decoration: BoxDecoration(\n-                            gradient: LinearGradient(\n-                              colors: [\n-                                primaryColor.withOpacity(0.1),\n-                                secondaryColor.withOpacity(0.1),\n+                  child: Padding(\n+                    padding: EdgeInsets.all(20.w),\n+                    child: Column(\n+                      crossAxisAlignment: CrossAxisAlignment.start,\n+                      children: [\n+                        Row(\n+                          children: [\n+                            Container(\n+                              padding: EdgeInsets.all(8.w),\n+                              decoration: BoxDecoration(\n+                                gradient: LinearGradient(\n+                                  colors: [primaryColor, secondaryColor],\n+                                  begin: Alignment.topLeft,\n+                                  end: Alignment.bottomRight,\n+                                ),\n+                                borderRadius: BorderRadius.circular(10.r),\n+                              ),\n+                              child: Icon(\n+                                Icons.category_outlined,\n+                                color: Colors.white,\n+                                size: 20.sp,\n+                              ),\n+                            ),\n+                            SizedBox(width: 12.w),\n+                            Expanded(\n+                              child: Column(\n+                                crossAxisAlignment: CrossAxisAlignment.start,\n+                                children: [\n+                                  Text(\n+                                    'فئات المتجر',\n+                                    style: TextStyle(\n+                                      fontSize: 16.sp,\n+                                      fontWeight: FontWeight.w600,\n+                                      color: const Color(0xFF1F2937),\n+                                    ),\n+                                  ),\n+                                  Obx(\n+                                    () => Text(\n+                                      'اختر حتى ${controller.maxCategoriesAllowed} فئات - مختار: ${controller.selectedCategoriesCount}',\n+                                      style: TextStyle(\n+                                        fontSize: 12.sp,\n+                                        color: const Color(0xFF6B7280),\n+                                      ),\n+                                    ),\n+                                  ),\n+                                ],\n+                              ),\n+                            ),\n+                          ],\n+                        ),\n+                        SizedBox(height: 16.h),\n+                        Obx(\n+                          () => Container(\n+                            padding: EdgeInsets.symmetric(\n+                              horizontal: 16.w,\n+                              vertical: 12.h,\n+                            ),\n+                            decoration: BoxDecoration(\n+                              color: primaryColor.withOpacity(0.05),\n+                              borderRadius: BorderRadius.circular(12.r),\n+                              border: Border.all(\n+                                color: primaryColor.withOpacity(0.2),\n+                              ),\n+                            ),\n+                            child: Row(\n+                              children: [\n+                                Icon(\n+                                  Icons.info_outline,\n+                                  color: primaryColor,\n+                                  size: 18.sp,\n+                                ),\n+                                SizedBox(width: 8.w),\n+                                Expanded(\n+                                  child: Text(\n+                                    controller.selectedCategoriesDisplay,\n+                                    style: TextStyle(\n+                                      fontSize: 14.sp,\n+                                      fontWeight: FontWeight.w500,\n+                                      color: primaryColor,\n+                                    ),\n+                                  ),\n+                                ),\n                               ],\n-                              begin: Alignment.topLeft,\n-                              end: Alignment.bottomRight,\n                             ),\n-                            borderRadius: BorderRadius.circular(8.r),\n                           ),\n-                          child: Icon(\n-                            Icons.category_outlined,\n-                            color: primaryColor,\n-                            size: 20.sp,\n-                          ),\n                         ),\n-                        labelStyle: TextStyle(\n-                          color: const Color(0xFF6B7280),\n-                          fontSize: 14.sp,\n-                          fontWeight: FontWeight.w500,\n-                        ),\n-                        border: InputBorder.none,\n-                        contentPadding: EdgeInsets.symmetric(\n-                          horizontal: 16.w,\n-                          vertical: 20.h,\n-                        ),\n-                      ),\n-                      style: TextStyle(\n-                        fontSize: 16.sp,\n-                        color: const Color(0xFF1F2937),\n-                        fontWeight: FontWeight.w500,\n-                      ),\n-                      items:\n-                          controller.shopCategories.map((String category) {\n-                            return DropdownMenuItem<String>(\n-                              value: category,\n-                              child: Text(category),\n-                            );\n-                          }).toList(),\n-                      onChanged: controller.onCategoryChanged,\n-                      validator: (value) {\n-                        if (value == null || value.isEmpty) {\n-                          return 'يرجى اختيار فئة المتجر';\n-                        }\n-                        return null;\n-                      },\n+                        SizedBox(height: 16.h),\n+                        _buildCategoriesGrid(),\n+                      ],\n                     ),\n                   ),\n                 ),\n               ),\n@@ -1461,5 +1495,97 @@\n         ),\n       ),\n     );\n   }\n+\n+  Widget _buildCategoriesGrid() {\n+    return Obx(\n+      () => Container(\n+        height: 300.h,\n+        child: GridView.builder(\n+          gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n+            crossAxisCount: 2,\n+            crossAxisSpacing: 12.w,\n+            mainAxisSpacing: 12.h,\n+            childAspectRatio: 3,\n+          ),\n+          itemCount: controller.shopCategories.length,\n+          itemBuilder: (context, index) {\n+            final category = controller.shopCategories[index];\n+            final isSelected = controller.isCategorySelected(category);\n+\n+            return Material(\n+              color: Colors.transparent,\n+              child: InkWell(\n+                onTap: () => controller.toggleCategorySelection(category),\n+                borderRadius: BorderRadius.circular(12.r),\n+                child: AnimatedContainer(\n+                  duration: const Duration(milliseconds: 200),\n+                  padding: EdgeInsets.symmetric(\n+                    horizontal: 12.w,\n+                    vertical: 8.h,\n+                  ),\n+                  decoration: BoxDecoration(\n+                    gradient:\n+                        isSelected\n+                            ? LinearGradient(\n+                              colors: [primaryColor, secondaryColor],\n+                              begin: Alignment.topLeft,\n+                              end: Alignment.bottomRight,\n+                            )\n+                            : null,\n+                    color: isSelected ? null : surfaceColor,\n+                    borderRadius: BorderRadius.circular(12.r),\n+                    border: Border.all(\n+                      color:\n+                          isSelected\n+                              ? primaryColor\n+                              : Colors.grey.withOpacity(0.3),\n+                      width: isSelected ? 2 : 1,\n+                    ),\n+                    boxShadow:\n+                        isSelected\n+                            ? [\n+                              BoxShadow(\n+                                color: primaryColor.withOpacity(0.3),\n+                                spreadRadius: 0,\n+                                blurRadius: 8.r,\n+                                offset: Offset(0, 3.h),\n+                              ),\n+                            ]\n+                            : null,\n+                  ),\n+                  child: Row(\n+                    children: [\n+                      Icon(\n+                        isSelected ? Icons.check_circle : Icons.circle_outlined,\n+                        color:\n+                            isSelected ? Colors.white : const Color(0xFF6B7280),\n+                        size: 18.sp,\n+                      ),\n+                      SizedBox(width: 8.w),\n+                      Expanded(\n+                        child: Text(\n+                          category,\n+                          style: TextStyle(\n+                            fontSize: 11.sp,\n+                            fontWeight:\n+                                isSelected ? FontWeight.w600 : FontWeight.w500,\n+                            color:\n+                                isSelected\n+                                    ? Colors.white\n+                                    : const Color(0xFF1F2937),\n+                          ),\n+                          overflow: TextOverflow.ellipsis,\n+                        ),\n+                      ),\n+                    ],\n+                  ),\n+                ),\n+              ),\n+            );\n+          },\n+        ),\n+      ),\n+    );\n+  }\n }\n"
                },
                {
                    "date": 1752572260938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1497,21 +1497,22 @@\n     );\n   }\n \n   Widget _buildCategoriesGrid() {\n-    return Obx(\n-      () => Container(\n-        height: 300.h,\n-        child: GridView.builder(\n-          gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n-            crossAxisCount: 2,\n-            crossAxisSpacing: 12.w,\n-            mainAxisSpacing: 12.h,\n-            childAspectRatio: 3,\n-          ),\n-          itemCount: controller.shopCategories.length,\n-          itemBuilder: (context, index) {\n-            final category = controller.shopCategories[index];\n+    return Container(\n+      height: 300.h,\n+      child: GridView.builder(\n+        gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n+          crossAxisCount: 2,\n+          crossAxisSpacing: 12.w,\n+          mainAxisSpacing: 12.h,\n+          childAspectRatio: 3,\n+        ),\n+        itemCount: controller.shopCategories.length,\n+        itemBuilder: (context, index) {\n+          final category = controller.shopCategories[index];\n+\n+          return Obx(() {\n             final isSelected = controller.isCategorySelected(category);\n \n             return Material(\n               color: Colors.transparent,\n@@ -1582,10 +1583,10 @@\n                   ),\n                 ),\n               ),\n             );\n-          },\n-        ),\n+          });\n+        },\n       ),\n     );\n   }\n }\n"
                },
                {
                    "date": 1752575864816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -552,9 +552,9 @@\n         SizedBox(height: 16.h),\n         _buildImageButton(\n           icon: Icons.edit_location_rounded,\n           label: \"تعديل الموقع\",\n-          onPressed: () => controller.shopLocation.value = null,\n+          onPressed: () => _showLocationPicker(),\n           gradient: [warningColor, primaryColor],\n         ),\n       ],\n     );\n@@ -609,88 +609,10 @@\n     );\n   }\n \n   void _showLocationPicker() {\n-    Get.dialog(\n-      Dialog(\n-        backgroundColor: Colors.transparent,\n-        child: Container(\n-          height: 500.h,\n-          margin: EdgeInsets.all(20.w),\n-          decoration: BoxDecoration(\n-            color: cardColor,\n-            borderRadius: BorderRadius.circular(20.r),\n-          ),\n-          child: Column(\n-            children: [\n-              Container(\n-                padding: EdgeInsets.all(20.w),\n-                decoration: BoxDecoration(\n-                  gradient: LinearGradient(\n-                    colors: [primaryColor, secondaryColor],\n-                    begin: Alignment.centerLeft,\n-                    end: Alignment.centerRight,\n-                  ),\n-                  borderRadius: BorderRadius.only(\n-                    topLeft: Radius.circular(20.r),\n-                    topRight: Radius.circular(20.r),\n-                  ),\n-                ),\n-                child: Row(\n-                  children: [\n-                    Icon(\n-                      Icons.location_on_rounded,\n-                      color: Colors.white,\n-                      size: 24.sp,\n-                    ),\n-                    SizedBox(width: 12.w),\n-                    Expanded(\n-                      child: Text(\n-                        'اختر موقع المتجر',\n-                        style: TextStyle(\n-                          fontSize: 18.sp,\n-                          fontWeight: FontWeight.bold,\n-                          color: Colors.white,\n-                        ),\n-                      ),\n-                    ),\n-                    GestureDetector(\n-                      onTap: () => Get.back(),\n-                      child: Container(\n-                        padding: EdgeInsets.all(8.w),\n-                        decoration: BoxDecoration(\n-                          color: Colors.white.withOpacity(0.2),\n-                          shape: BoxShape.circle,\n-                        ),\n-                        child: Icon(\n-                          Icons.close_rounded,\n-                          color: Colors.white,\n-                          size: 20.sp,\n-                        ),\n-                      ),\n-                    ),\n-                  ],\n-                ),\n-              ),\n-              Expanded(\n-                child: GoogleMap(\n-                  initialCameraPosition: const CameraPosition(\n-                    target: LatLng(24.7136, 46.6753), // Riyadh\n-                    zoom: 12,\n-                  ),\n-                  onTap: (latLng) {\n-                    controller.shopLocation.value = latLng;\n-                    Get.back();\n-                  },\n-                  myLocationButtonEnabled: true,\n-                  myLocationEnabled: true,\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n+    // استخدام الوظيفة المحسنة من Controller\n+    controller.showEnhancedLocationPicker(Get.context!);\n   }\n \n   Widget _buildRegisterButton() {\n     return TweenAnimationBuilder<double>(\n@@ -1310,73 +1232,85 @@\n               child: Theme(\n                 data: Theme.of(\n                   Get.context!,\n                 ).copyWith(dividerColor: Colors.transparent),\n-                child: ExpansionTile(\n-                  key: ValueKey(dayKey),\n-                  initiallyExpanded: false,\n-                  tilePadding: EdgeInsets.symmetric(\n-                    horizontal: 16.w,\n-                    vertical: 8.h,\n-                  ),\n-                  childrenPadding: EdgeInsets.all(16.w),\n-                  leading: Container(\n-                    padding: EdgeInsets.all(8.w),\n-                    decoration: BoxDecoration(\n-                      color:\n-                          isOpen\n-                              ? primaryColor.withOpacity(0.1)\n-                              : Colors.grey.withOpacity(0.1),\n-                      borderRadius: BorderRadius.circular(8.r),\n+                child: Obx(\n+                  () => ExpansionTile(\n+                    key: ValueKey(\n+                      '${dayKey}_${controller.expandedDayPanel.value}_${isOpen}',\n                     ),\n-                    child: Icon(\n-                      isOpen\n-                          ? Icons.store_rounded\n-                          : Icons.store_mall_directory_outlined,\n-                      color: isOpen ? primaryColor : Colors.grey,\n-                      size: 20.sp,\n+                    initiallyExpanded:\n+                        controller.expandedDayPanel.value == dayKey,\n+                    onExpansionChanged: (expanded) {\n+                      if (expanded) {\n+                        controller.expandedDayPanel.value = dayKey;\n+                      } else {\n+                        controller.expandedDayPanel.value = null;\n+                      }\n+                    },\n+                    tilePadding: EdgeInsets.symmetric(\n+                      horizontal: 16.w,\n+                      vertical: 8.h,\n                     ),\n-                  ),\n-                  title: Text(\n-                    dayName,\n-                    style: TextStyle(\n-                      fontSize: 16.sp,\n-                      fontWeight: FontWeight.w600,\n-                      color:\n-                          isOpen\n-                              ? const Color(0xFF1F2937)\n-                              : const Color(0xFF6B7280),\n+                    childrenPadding: EdgeInsets.all(16.w),\n+                    leading: Container(\n+                      padding: EdgeInsets.all(8.w),\n+                      decoration: BoxDecoration(\n+                        color:\n+                            isOpen\n+                                ? primaryColor.withOpacity(0.1)\n+                                : Colors.grey.withOpacity(0.1),\n+                        borderRadius: BorderRadius.circular(8.r),\n+                      ),\n+                      child: Icon(\n+                        isOpen\n+                            ? Icons.store_rounded\n+                            : Icons.store_mall_directory_outlined,\n+                        color: isOpen ? primaryColor : Colors.grey,\n+                        size: 20.sp,\n+                      ),\n                     ),\n-                  ),\n-                  subtitle:\n-                      isOpen && opensAt != null && closesAt != null\n-                          ? Text(\n-                            '$opensAt - $closesAt',\n-                            style: TextStyle(\n-                              fontSize: 12.sp,\n-                              color: primaryColor,\n-                              fontWeight: FontWeight.w500,\n+                    title: Text(\n+                      dayName,\n+                      style: TextStyle(\n+                        fontSize: 16.sp,\n+                        fontWeight: FontWeight.w600,\n+                        color:\n+                            isOpen\n+                                ? const Color(0xFF1F2937)\n+                                : const Color(0xFF6B7280),\n+                      ),\n+                    ),\n+                    subtitle:\n+                        isOpen && opensAt != null && closesAt != null\n+                            ? Text(\n+                              '$opensAt - $closesAt',\n+                              style: TextStyle(\n+                                fontSize: 12.sp,\n+                                color: primaryColor,\n+                                fontWeight: FontWeight.w500,\n+                              ),\n+                            )\n+                            : Text(\n+                              isOpen ? 'محدد كمفتوح - اختر الأوقات' : 'مغلق',\n+                              style: TextStyle(\n+                                fontSize: 12.sp,\n+                                color:\n+                                    isOpen\n+                                        ? warningColor\n+                                        : const Color(0xFF9CA3AF),\n+                              ),\n                             ),\n-                          )\n-                          : Text(\n-                            isOpen ? 'محدد كمفتوح - اختر الأوقات' : 'مغلق',\n-                            style: TextStyle(\n-                              fontSize: 12.sp,\n-                              color:\n-                                  isOpen\n-                                      ? warningColor\n-                                      : const Color(0xFF9CA3AF),\n-                            ),\n-                          ),\n-                  trailing: Switch(\n-                    value: isOpen,\n-                    onChanged: (value) => controller.toggleDayOpen(dayKey),\n-                    activeColor: primaryColor,\n-                    inactiveThumbColor: Colors.grey,\n-                    inactiveTrackColor: Colors.grey.withOpacity(0.3),\n+                    trailing: Switch(\n+                      value: isOpen,\n+                      onChanged: (value) => controller.toggleDayOpen(dayKey),\n+                      activeColor: primaryColor,\n+                      inactiveThumbColor: Colors.grey,\n+                      inactiveTrackColor: Colors.grey.withOpacity(0.3),\n+                    ),\n+                    children:\n+                        isOpen ? [_buildTimeSelectionRow(dayKey, dayData)] : [],\n                   ),\n-                  children:\n-                      isOpen ? [_buildTimeSelectionRow(dayKey, dayData)] : [],\n                 ),\n               ),\n             );\n           }).toList(),\n"
                }
            ],
            "date": 1752487221618,
            "name": "Commit-0",
            "content": "import 'dart:io';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:get/get.dart';\nimport 'package:google_maps_flutter/google_maps_flutter.dart';\nimport 'package:image_picker/image_picker.dart';\n\nimport '../controllers/SellerRegistrationController.dart';\n\nclass SellerRegistrationScreen extends GetView<SellerRegistrationController> {\n  const SellerRegistrationScreen({super.key});\n\n  // Color scheme احترافي للتطبيق\n  static const Color primaryColor = Color(0xFF6366F1);\n  static const Color secondaryColor = Color(0xFF8B5CF6);\n  static const Color accentColor = Color(0xFF06B6D4);\n  static const Color successColor = Color(0xFF10B981);\n  static const Color warningColor = Color(0xFFF59E0B);\n  static const Color errorColor = Color(0xFFEF4444);\n  static const Color surfaceColor = Color(0xFFF8FAFC);\n  static const Color cardColor = Color(0xFFFFFFFF);\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Container(\n        decoration: const BoxDecoration(\n          gradient: LinearGradient(\n            begin: Alignment.topLeft,\n            end: Alignment.bottomRight,\n            colors: [\n              Color(0xFFF8FAFC),\n              Color(0xFFE2E8F0),\n            ],\n          ),\n        ),\n        child: SafeArea(\n          child: Column(\n            children: [\n              _buildAppBar(),\n              Expanded(\n                child: SingleChildScrollView(\n                  physics: const BouncingScrollPhysics(),\n                  child: Padding(\n                    padding: EdgeInsets.symmetric(horizontal: 20.w),\n                    child: Column(\n                      children: [\n                        SizedBox(height: 20.h),\n                        _buildWelcomeSection(),\n                        _buildPersonalInfoSection(),\n                        _buildImagesSection(),\n                        _buildLocationSection(),\n                        SizedBox(height: 30.h),\n                        _buildRegisterButton(),\n                        SizedBox(height: 30.h),\n                      ],\n                    ),\n                  ),\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildAppBar() {\n    return Container(\n      padding: EdgeInsets.all(20.w),\n      decoration: BoxDecoration(\n        color: cardColor,\n        boxShadow: [\n          BoxShadow(\n            color: Colors.black.withOpacity(0.05),\n            spreadRadius: 0,\n            blurRadius: 10.r,\n            offset: Offset(0, 2.h),\n          ),\n        ],\n      ),\n      child: Row(\n        children: [\n          GestureDetector(\n            onTap: () => Get.back(),\n            child: Container(\n              padding: EdgeInsets.all(12.w),\n              decoration: BoxDecoration(\n                color: surfaceColor,\n                borderRadius: BorderRadius.circular(12.r),\n                border: Border.all(color: primaryColor.withOpacity(0.1)),\n              ),\n              child: Icon(\n                Icons.arrow_back_ios_rounded,\n                color: primaryColor,\n                size: 20.sp,\n              ),\n            ),\n          ),\n          SizedBox(width: 16.w),\n          Expanded(\n            child: Text(\n              'تسجيل حساب بائع',\n              style: TextStyle(\n                fontSize: 22.sp,\n                fontWeight: FontWeight.bold,\n                color: const Color(0xFF1F2937),\n              ),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildWelcomeSection() {\n    return TweenAnimationBuilder<double>(\n      tween: Tween(begin: 0.0, end: 1.0),\n      duration: const Duration(milliseconds: 1000),\n      builder: (context, value, child) {\n        return Transform.translate(\n          offset: Offset(0, 50 * (1 - value)),\n          child: Opacity(\n            opacity: value,\n            child: Container(\n              width: double.infinity,\n              padding: EdgeInsets.all(24.w),\n              margin: EdgeInsets.only(bottom: 30.h),\n              decoration: BoxDecoration(\n                gradient: LinearGradient(\n                  colors: [primaryColor, secondaryColor],\n                  begin: Alignment.topLeft,\n                  end: Alignment.bottomRight,\n                ),\n                borderRadius: BorderRadius.circular(24.r),\n                boxShadow: [\n                  BoxShadow(\n                    color: primaryColor.withOpacity(0.3),\n                    spreadRadius: 0,\n                    blurRadius: 20.r,\n                    offset: Offset(0, 10.h),\n                  ),\n                ],\n              ),\n              child: Column(\n                children: [\n                  Container(\n                    padding: EdgeInsets.all(16.w),\n                    decoration: BoxDecoration(\n                      color: Colors.white.withOpacity(0.2),\n                      shape: BoxShape.circle,\n                    ),\n                    child: Icon(\n                      Icons.store_rounded,\n                      size: 40.sp,\n                      color: Colors.white,\n                    ),\n                  ),\n                  SizedBox(height: 16.h),\n                  Text(\n                    'انضم لشبكة البائعين',\n                    style: TextStyle(\n                      fontSize: 20.sp,\n                      fontWeight: FontWeight.bold,\n                      color: Colors.white,\n                    ),\n                  ),\n                  SizedBox(height: 8.h),\n                  Text(\n                    'املأ المعلومات التالية لإنشاء حسابك كبائع',\n                    textAlign: TextAlign.center,\n                    style: TextStyle(\n                      fontSize: 14.sp,\n                      color: Colors.white.withOpacity(0.9),\n                    ),\n                  ),\n                ],\n              ),\n            ),\n          ),\n        );\n      },\n    );\n  }\n\n  Widget _buildPersonalInfoSection() {\n    return Column(\n      children: [\n        _buildAnimatedSectionTitle('المعلومات الشخصية', icon: Icons.person_rounded),\n        _buildEnhancedTextField(\n          controller: controller.sellerNameController,\n          label: 'اسم البائع',\n          icon: Icons.person_outline_rounded,\n          animationDelay: 0,\n        ),\n        SizedBox(height: 16.h),\n        _buildEnhancedTextField(\n          controller: controller.shopNameController,\n          label: 'اسم المتجر',\n          icon: Icons.store_outlined,\n          animationDelay: 1,\n        ),\n        SizedBox(height: 16.h),\n        _buildEnhancedTextField(\n          controller: controller.shopPhoneNumberController,\n          label: 'رقم الهاتف',\n          icon: Icons.phone_outlined,\n          keyboardType: TextInputType.phone,\n          animationDelay: 2,\n        ),\n      ],\n    );\n  }\n\n  Widget _buildImagesSection() {\n    return Column(\n      children: [\n        _buildAnimatedSectionTitle('الصور', icon: Icons.photo_camera_rounded),\n        _buildEnhancedImagePicker(\n          label: 'صورة البائع الشخصية',\n          imageFile: controller.sellerProfileImageFile,\n          onGalleryPressed: () => controller.pickImage(ImageSource.gallery, isProfileImage: true),\n          onCameraPressed: () => controller.pickImage(ImageSource.camera, isProfileImage: true),\n          onRemovePressed: () => controller.removeImage(isProfileImage: true),\n          animationDelay: 0,\n        ),\n        _buildEnhancedImagePicker(\n          label: 'صورة واجهة المتجر',\n          imageFile: controller.shopFrontImageFile,\n          onGalleryPressed: () => controller.pickImage(ImageSource.gallery, isProfileImage: false),\n          onCameraPressed: () => controller.pickImage(ImageSource.camera, isProfileImage: false),\n          onRemovePressed: () => controller.removeImage(isProfileImage: false),\n          animationDelay: 1,\n        ),\n      ],\n    );\n  }\n\n  Widget _buildLocationSection() {\n    return Column(\n      children: [\n        _buildAnimatedSectionTitle('الموقع', icon: Icons.location_on_rounded),\n        TweenAnimationBuilder<double>(\n          tween: Tween(begin: 0.0, end: 1.0),\n          duration: const Duration(milliseconds: 800),\n          builder: (context, value, child) {\n            return Transform.scale(\n              scale: 0.8 + (0.2 * value),\n              child: Opacity(\n                opacity: value,\n                child: Container(\n                  margin: EdgeInsets.symmetric(vertical: 12.h),\n                  decoration: BoxDecoration(\n                    color: cardColor,\n                    borderRadius: BorderRadius.circular(20.r),\n                    boxShadow: [\n                      BoxShadow(\n                        color: primaryColor.withOpacity(0.1),\n                        spreadRadius: 0,\n                        blurRadius: 20.r,\n                        offset: Offset(0, 8.h),\n                      ),\n                    ],\n                  ),\n                  child: Padding(\n                    padding: EdgeInsets.all(20.w),\n                    child: Column(\n                      children: [\n                        Row(\n                          children: [\n                            Container(\n                              padding: EdgeInsets.all(12.w),\n                              decoration: BoxDecoration(\n                                gradient: LinearGradient(\n                                  colors: [accentColor, primaryColor],\n                                  begin: Alignment.topLeft,\n                                  end: Alignment.bottomRight,\n                                ),\n                                borderRadius: BorderRadius.circular(12.r),\n                              ),\n                              child: Icon(\n                                Icons.my_location_rounded,\n                                color: Colors.white,\n                                size: 24.sp,\n                              ),\n                            ),\n                            SizedBox(width: 16.w),\n                            Expanded(\n                              child: Column(\n                                crossAxisAlignment: CrossAxisAlignment.start,\n                                children: [\n                                  Text(\n                                    'موقع المتجر',\n                                    style: TextStyle(\n                                      fontSize: 16.sp,\n                                      fontWeight: FontWeight.w600,\n                                      color: const Color(0xFF1F2937),\n                                    ),\n                                  ),\n                                  Text(\n                                    'اختر موقع متجرك على الخريطة',\n                                    style: TextStyle(\n                                      fontSize: 12.sp,\n                                      color: const Color(0xFF6B7280),\n                                    ),\n                                  ),\n                                ],\n                              ),\n                            ),\n                          ],\n                        ),\n                        SizedBox(height: 20.h),\n                        Obx(() => controller.shopLocation.value != null\n                            ? _buildLocationPreview()\n                            : _buildLocationSelector()),\n                      ],\n                    ),\n                  ),\n                ),\n              ),\n            );\n          },\n        ),\n      ],\n    );\n  }\n\n  Widget _buildLocationPreview() {\n    return Column(\n      children: [\n        Container(\n          height: 200.h,\n          width: double.infinity,\n          decoration: BoxDecoration(\n            borderRadius: BorderRadius.circular(16.r),\n            border: Border.all(color: primaryColor.withOpacity(0.2)),\n          ),\n          child: ClipRRect(\n            borderRadius: BorderRadius.circular(16.r),\n            child: GoogleMap(\n              initialCameraPosition: CameraPosition(\n                target: controller.shopLocation.value!,\n                zoom: 16,\n              ),\n              markers: {\n                Marker(\n                  markerId: const MarkerId('selected_location'),\n                  position: controller.shopLocation.value!,\n                  icon: BitmapDescriptor.defaultMarkerWithHue(BitmapDescriptor.hueBlue),\n                ),\n              },\n              onTap: (latLng) => controller.shopLocation.value = latLng,\n              myLocationButtonEnabled: false,\n              zoomControlsEnabled: false,\n            ),\n          ),\n        ),\n        SizedBox(height: 16.h),\n        _buildImageButton(\n          icon: Icons.edit_location_rounded,\n          label: \"تعديل الموقع\",\n          onPressed: () => controller.shopLocation.value = null,\n          gradient: [warningColor, primaryColor],\n        ),\n      ],\n    );\n  }\n\n  Widget _buildLocationSelector() {\n    return Column(\n      children: [\n        Container(\n          height: 150.h,\n          width: double.infinity,\n          decoration: BoxDecoration(\n            color: surfaceColor,\n            borderRadius: BorderRadius.circular(16.r),\n            border: Border.all(\n              color: primaryColor.withOpacity(0.2),\n              width: 2,\n            ),\n          ),\n          child: Column(\n            mainAxisAlignment: MainAxisAlignment.center,\n            children: [\n              Container(\n                padding: EdgeInsets.all(16.w),\n                decoration: BoxDecoration(\n                  color: primaryColor.withOpacity(0.1),\n                  shape: BoxShape.circle,\n                ),\n                child: Icon(\n                  Icons.add_location_alt_rounded,\n                  size: 32.sp,\n                  color: primaryColor,\n                ),\n              ),\n              SizedBox(height: 12.h),\n              Text(\n                'اختر موقع المتجر',\n                style: TextStyle(\n                  fontSize: 14.sp,\n                  color: const Color(0xFF6B7280),\n                  fontWeight: FontWeight.w500,\n                ),\n              ),\n            ],\n          ),\n        ),\n        SizedBox(height: 16.h),\n        _buildImageButton(\n          icon: Icons.location_searching_rounded,\n          label: \"تحديد الموقع\",\n          onPressed: () => _showLocationPicker(),\n          gradient: [successColor, accentColor],\n        ),\n      ],\n    );\n  }\n\n  void _showLocationPicker() {\n    Get.dialog(\n      Dialog(\n        backgroundColor: Colors.transparent,\n        child: Container(\n          height: 500.h,\n          margin: EdgeInsets.all(20.w),\n          decoration: BoxDecoration(\n            color: cardColor,\n            borderRadius: BorderRadius.circular(20.r),\n          ),\n          child: Column(\n            children: [\n              Container(\n                padding: EdgeInsets.all(20.w),\n                decoration: BoxDecoration(\n                  gradient: LinearGradient(\n                    colors: [primaryColor, secondaryColor],\n                    begin: Alignment.centerLeft,\n                    end: Alignment.centerRight,\n                  ),\n                  borderRadius: BorderRadius.only(\n                    topLeft: Radius.circular(20.r),\n                    topRight: Radius.circular(20.r),\n                  ),\n                ),\n                child: Row(\n                  children: [\n                    Icon(\n                      Icons.location_on_rounded,\n                      color: Colors.white,\n                      size: 24.sp,\n                    ),\n                    SizedBox(width: 12.w),\n                    Expanded(\n                      child: Text(\n                        'اختر موقع المتجر',\n                        style: TextStyle(\n                          fontSize: 18.sp,\n                          fontWeight: FontWeight.bold,\n                          color: Colors.white,\n                        ),\n                      ),\n                    ),\n                    GestureDetector(\n                      onTap: () => Get.back(),\n                      child: Container(\n                        padding: EdgeInsets.all(8.w),\n                        decoration: BoxDecoration(\n                          color: Colors.white.withOpacity(0.2),\n                          shape: BoxShape.circle,\n                        ),\n                        child: Icon(\n                          Icons.close_rounded,\n                          color: Colors.white,\n                          size: 20.sp,\n                        ),\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n              Expanded(\n                child: GoogleMap(\n                  initialCameraPosition: const CameraPosition(\n                    target: LatLng(24.7136, 46.6753), // Riyadh\n                    zoom: 12,\n                  ),\n                  onTap: (latLng) {\n                    controller.shopLocation.value = latLng;\n                    Get.back();\n                  },\n                  myLocationButtonEnabled: true,\n                  myLocationEnabled: true,\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildRegisterButton() {\n    return TweenAnimationBuilder<double>(\n      tween: Tween(begin: 0.0, end: 1.0),\n      duration: const Duration(milliseconds: 1200),\n      builder: (context, value, child) {\n        return Transform.scale(\n          scale: 0.8 + (0.2 * value),\n          child: Opacity(\n            opacity: value,\n            child: Container(\n              width: double.infinity,\n              height: 56.h,\n              decoration: BoxDecoration(\n                gradient: LinearGradient(\n                  colors: [primaryColor, secondaryColor],\n                  begin: Alignment.centerLeft,\n                  end: Alignment.centerRight,\n                ),\n                borderRadius: BorderRadius.circular(16.r),\n                boxShadow: [\n                  BoxShadow(\n                    color: primaryColor.withOpacity(0.4),\n                    spreadRadius: 0,\n                    blurRadius: 20.r,\n                    offset: Offset(0, 8.h),\n                  ),\n                ],\n              ),\n              child: Obx(() => Material(\n                color: Colors.transparent,\n                child: InkWell(\n                  onTap: controller.isLoading.value ? null : () => controller.initiatePhoneVerificationAndCollectData(),\n                  borderRadius: BorderRadius.circular(16.r),\n                  child: Container(\n                    padding: EdgeInsets.symmetric(horizontal: 24.w),\n                    child: Row(\n                      mainAxisAlignment: MainAxisAlignment.center,\n                      children: [\n                        if (controller.isLoading.value) ...[\n                          SizedBox(\n                            width: 24.w,\n                            height: 24.h,\n                            child: CircularProgressIndicator(\n                              strokeWidth: 2,\n                              valueColor: AlwaysStoppedAnimation<Color>(Colors.white),\n                            ),\n                          ),\n                          SizedBox(width: 16.w),\n                        ] else ...[\n                          Icon(\n                            Icons.check_circle_rounded,\n                            color: Colors.white,\n                            size: 24.sp,\n                          ),\n                          SizedBox(width: 12.w),\n                        ],\n                        Text(\n                          controller.isLoading.value ? 'جارٍ التسجيل...' : 'إنشاء حساب البائع',\n                          style: TextStyle(\n                            fontSize: 18.sp,\n                            fontWeight: FontWeight.bold,\n                            color: Colors.white,\n                          ),\n                        ),\n                      ],\n                    ),\n                  ),\n                ),\n              )),\n            ),\n          ),\n        );\n      },\n    );\n  }\n\n  Widget _buildAnimatedSectionTitle(String title, {IconData? icon}) {\n    return TweenAnimationBuilder<double>(\n      tween: Tween(begin: 0.0, end: 1.0),\n      duration: const Duration(milliseconds: 800),\n      builder: (context, value, child) {\n        return Transform.translate(\n          offset: Offset(0, 30 * (1 - value)),\n          child: Opacity(\n            opacity: value,\n            child: Container(\n              margin: EdgeInsets.only(top: 24.h, bottom: 16.h),\n              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n              decoration: BoxDecoration(\n                gradient: LinearGradient(\n                  colors: [primaryColor.withOpacity(0.1), secondaryColor.withOpacity(0.1)],\n                  begin: Alignment.centerLeft,\n                  end: Alignment.centerRight,\n                ),\n                borderRadius: BorderRadius.circular(12.r),\n                border: Border.all(color: primaryColor.withOpacity(0.2)),\n              ),\n              child: Row(\n                children: [\n                  if (icon != null) ...[\n                    Container(\n                      padding: EdgeInsets.all(8.w),\n                      decoration: BoxDecoration(\n                        color: primaryColor.withOpacity(0.1),\n                        borderRadius: BorderRadius.circular(8.r),\n                      ),\n                      child: Icon(\n                        icon,\n                        color: primaryColor,\n                        size: 20.sp,\n                      ),\n                    ),\n                    SizedBox(width: 12.w),\n                  ],\n                  Text(\n                    title,\n                    style: TextStyle(\n                      fontSize: 18.sp,\n                      fontWeight: FontWeight.bold,\n                      color: const Color(0xFF1F2937),\n                    ),\n                  ),\n                ],\n              ),\n            ),\n          ),\n        );\n      },\n    );\n  }\n\n  Widget _buildEnhancedTextField({\n    required TextEditingController controller,\n    required String label,\n    required IconData icon,\n    required int animationDelay,\n    TextInputType? keyboardType,\n    String? hintText,\n    int? maxLines,\n  }) {\n    return TweenAnimationBuilder<double>(\n      tween: Tween(begin: 0.0, end: 1.0),\n      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n      builder: (context, value, child) {\n        return Transform.translate(\n          offset: Offset(50 * (1 - value), 0),\n          child: Opacity(\n            opacity: value,\n            child: Container(\n              decoration: BoxDecoration(\n                color: cardColor,\n                borderRadius: BorderRadius.circular(16.r),\n                boxShadow: [\n                  BoxShadow(\n                    color: primaryColor.withOpacity(0.08),\n                    spreadRadius: 0,\n                    blurRadius: 20.r,\n                    offset: Offset(0, 4.h),\n                  ),\n                ],\n                border: Border.all(\n                  color: primaryColor.withOpacity(0.1),\n                  width: 1,\n                ),\n              ),\n              child: TextFormField(\n                controller: controller,\n                keyboardType: keyboardType,\n                maxLines: maxLines ?? 1,\n                style: TextStyle(\n                  fontSize: 16.sp,\n                  color: const Color(0xFF1F2937),\n                  fontWeight: FontWeight.w500,\n                ),\n                decoration: InputDecoration(\n                  labelText: label,\n                  hintText: hintText,\n                  prefixIcon: Container(\n                    margin: EdgeInsets.all(12.w),\n                    padding: EdgeInsets.all(8.w),\n                    decoration: BoxDecoration(\n                      gradient: LinearGradient(\n                        colors: [primaryColor.withOpacity(0.1), secondaryColor.withOpacity(0.1)],\n                        begin: Alignment.topLeft,\n                        end: Alignment.bottomRight,\n                      ),\n                      borderRadius: BorderRadius.circular(8.r),\n                    ),\n                    child: Icon(\n                      icon,\n                      color: primaryColor,\n                      size: 20.sp,\n                    ),\n                  ),\n                  labelStyle: TextStyle(\n                    color: const Color(0xFF6B7280),\n                    fontSize: 14.sp,\n                    fontWeight: FontWeight.w500,\n                  ),\n                  hintStyle: TextStyle(\n                    color: const Color(0xFF9CA3AF),\n                    fontSize: 14.sp,\n                  ),\n                  border: InputBorder.none,\n                  contentPadding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 20.h),\n                  floatingLabelBehavior: FloatingLabelBehavior.auto,\n                ),\n              ),\n            ),\n          ),\n        );\n      },\n    );\n  }\n\n  Widget _buildEnhancedImagePicker({\n    required String label,\n    required Rxn<File> imageFile,\n    required Function() onGalleryPressed,\n    required Function() onCameraPressed,\n    required Function()? onRemovePressed,\n    required int animationDelay,\n  }) {\n    return TweenAnimationBuilder<double>(\n      tween: Tween(begin: 0.0, end: 1.0),\n      duration: Duration(milliseconds: 600 + (animationDelay * 200)),\n      builder: (context, value, child) {\n        return Transform.scale(\n          scale: 0.8 + (0.2 * value),\n          child: Opacity(\n            opacity: value,\n            child: Container(\n              margin: EdgeInsets.symmetric(vertical: 12.h),\n              decoration: BoxDecoration(\n                color: cardColor,\n                borderRadius: BorderRadius.circular(20.r),\n                boxShadow: [\n                  BoxShadow(\n                    color: primaryColor.withOpacity(0.1),\n                    spreadRadius: 0,\n                    blurRadius: 20.r,\n                    offset: Offset(0, 8.h),\n                  ),\n                  BoxShadow(\n                    color: Colors.black.withOpacity(0.05),\n                    spreadRadius: 0,\n                    blurRadius: 10.r,\n                    offset: Offset(0, 2.h),\n                  ),\n                ],\n              ),\n              child: Padding(\n                padding: EdgeInsets.all(20.w),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.start,\n                  children: [\n                    Row(\n                      children: [\n                        Container(\n                          padding: EdgeInsets.all(8.w),\n                          decoration: BoxDecoration(\n                            gradient: LinearGradient(\n                              colors: [primaryColor, secondaryColor],\n                              begin: Alignment.topLeft,\n                              end: Alignment.bottomRight,\n                            ),\n                            borderRadius: BorderRadius.circular(10.r),\n                          ),\n                          child: Icon(\n                            Icons.add_a_photo_rounded,\n                            color: Colors.white,\n                            size: 20.sp,\n                          ),\n                        ),\n                        SizedBox(width: 12.w),\n                        Expanded(\n                          child: Text(\n                            label,\n                            style: TextStyle(\n                              fontSize: 16.sp,\n                              fontWeight: FontWeight.w600,\n                              color: const Color(0xFF1F2937),\n                            ),\n                          ),\n                        ),\n                      ],\n                    ),\n                    SizedBox(height: 16.h),\n                    Center(\n                      child: Obx(() => imageFile.value != null\n                          ? _buildImagePreview(imageFile.value!, onRemovePressed)\n                          : _buildImagePlaceholder()),\n                    ),\n                    SizedBox(height: 16.h),\n                    Row(\n                      children: [\n                        Expanded(\n                          child: _buildImageButton(\n                            icon: Icons.photo_library_rounded,\n                            label: \"المعرض\",\n                            onPressed: onGalleryPressed,\n                            gradient: [accentColor, primaryColor],\n                          ),\n                        ),\n                        SizedBox(width: 12.w),\n                        Expanded(\n                          child: _buildImageButton(\n                            icon: Icons.camera_alt_rounded,\n                            label: \"الكاميرا\",\n                            onPressed: onCameraPressed,\n                            gradient: [successColor, accentColor],\n                          ),\n                        ),\n                      ],\n                    ),\n                  ],\n                ),\n              ),\n            ),\n          ),\n        );\n      },\n    );\n  }\n\n  Widget _buildImagePreview(File imageFile, Function()? onRemovePressed) {\n    return Stack(\n      alignment: Alignment.topRight,\n      children: [\n        Hero(\n          tag: imageFile.path,\n          child: Container(\n            height: 200.h,\n            width: double.infinity,\n            decoration: BoxDecoration(\n              borderRadius: BorderRadius.circular(16.r),\n              boxShadow: [\n                BoxShadow(\n                  color: Colors.black.withOpacity(0.1),\n                  spreadRadius: 0,\n                  blurRadius: 10.r,\n                  offset: Offset(0, 4.h),\n                ),\n              ],\n            ),\n            child: ClipRRect(\n              borderRadius: BorderRadius.circular(16.r),\n              child: Image.file(\n                imageFile,\n                fit: BoxFit.cover,\n              ),\n            ),\n          ),\n        ),\n        if (onRemovePressed != null)\n          Positioned(\n            top: 8.h,\n            right: 8.w,\n            child: GestureDetector(\n              onTap: onRemovePressed,\n              child: Container(\n                padding: EdgeInsets.all(8.w),\n                decoration: BoxDecoration(\n                  color: errorColor,\n                  shape: BoxShape.circle,\n                  boxShadow: [\n                    BoxShadow(\n                      color: errorColor.withOpacity(0.3),\n                      spreadRadius: 0,\n                      blurRadius: 8.r,\n                      offset: Offset(0, 2.h),\n                    ),\n                  ],\n                ),\n                child: Icon(\n                  Icons.close_rounded,\n                  color: Colors.white,\n                  size: 18.sp,\n                ),\n              ),\n            ),\n          ),\n      ],\n    );\n  }\n\n  Widget _buildImagePlaceholder() {\n    return Container(\n      height: 200.h,\n      width: double.infinity,\n      decoration: BoxDecoration(\n        color: surfaceColor,\n        borderRadius: BorderRadius.circular(16.r),\n        border: Border.all(\n          color: primaryColor.withOpacity(0.2),\n          width: 2,\n          strokeAlign: BorderSide.strokeAlignInside,\n        ),\n      ),\n      child: Column(\n        mainAxisAlignment: MainAxisAlignment.center,\n        children: [\n          TweenAnimationBuilder<double>(\n            tween: Tween(begin: 0.0, end: 1.0),\n            duration: const Duration(milliseconds: 1500),\n            builder: (context, value, child) {\n              return Transform.scale(\n                scale: 0.8 + (0.2 * value),\n                child: Container(\n                  padding: EdgeInsets.all(16.w),\n                  decoration: BoxDecoration(\n                    color: primaryColor.withOpacity(0.1),\n                    shape: BoxShape.circle,\n                  ),\n                  child: Icon(\n                    Icons.add_photo_alternate_rounded,\n                    size: 48.sp,\n                    color: primaryColor.withOpacity(0.7),\n                  ),\n                ),\n              );\n            },\n          ),\n          SizedBox(height: 12.h),\n          Text(\n            'اضغط لإضافة صورة',\n            style: TextStyle(\n              fontSize: 14.sp,\n              color: const Color(0xFF6B7280),\n              fontWeight: FontWeight.w500,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildImageButton({\n    required IconData icon,\n    required String label,\n    required VoidCallback onPressed,\n    required List<Color> gradient,\n  }) {\n    return Material(\n      color: Colors.transparent,\n      child: InkWell(\n        onTap: onPressed,\n        borderRadius: BorderRadius.circular(12.r),\n        child: Container(\n          padding: EdgeInsets.symmetric(vertical: 14.h, horizontal: 16.w),\n          decoration: BoxDecoration(\n            gradient: LinearGradient(\n              colors: gradient,\n              begin: Alignment.topLeft,\n              end: Alignment.bottomRight,\n            ),\n            borderRadius: BorderRadius.circular(12.r),\n            boxShadow: [\n              BoxShadow(\n                color: gradient.first.withOpacity(0.3),\n                spreadRadius: 0,\n                blurRadius: 8.r,\n                offset: Offset(0, 4.h),\n              ),\n            ],\n          ),\n          child: Row(\n            mainAxisAlignment: MainAxisAlignment.center,\n            children: [\n              Icon(\n                icon,\n                color: Colors.white,\n                size: 20.sp,\n              ),\n              SizedBox(width: 8.w),\n              Text(\n                label,\n                style: TextStyle(\n                  color: Colors.white,\n                  fontSize: 14.sp,\n                  fontWeight: FontWeight.w600,\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n}"
        }
    ]
}