{
    "sourceFile": "lib/الكود الخاص بتطبيق البائع/ui/pages/wholesale_market_page.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1752570376679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752662835620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -868,29 +868,36 @@\n                       SizedBox(height: 8.h),\n                       Row(\n                         children: [\n                           if (store.shopCategories.isNotEmpty) ...[\n-                            Container(\n-                              padding: EdgeInsets.symmetric(\n-                                horizontal: 8.w,\n-                                vertical: 4.h,\n-                              ),\n-                              decoration: BoxDecoration(\n-                                color: const Color(0xFF6366F1).withOpacity(0.1),\n-                                borderRadius: BorderRadius.circular(8.r),\n-                              ),\n-                              child: Text(\n-                                store.shopCategories.join(', '),\n-                                style: TextStyle(\n-                                  fontSize: 10.sp,\n-                                  color: const Color(0xFF6366F1),\n-                                  fontWeight: FontWeight.w500,\n+                            Expanded(\n+                              child: Container(\n+                                padding: EdgeInsets.symmetric(\n+                                  horizontal: 8.w,\n+                                  vertical: 4.h,\n                                 ),\n+                                decoration: BoxDecoration(\n+                                  color: const Color(\n+                                    0xFF6366F1,\n+                                  ).withOpacity(0.1),\n+                                  borderRadius: BorderRadius.circular(8.r),\n+                                ),\n+                                child: Text(\n+                                  store.shopCategories.join(', '),\n+                                  style: TextStyle(\n+                                    fontSize: 10.sp,\n+                                    color: const Color(0xFF6366F1),\n+                                    fontWeight: FontWeight.w500,\n+                                  ),\n+                                  maxLines: 1,\n+                                  overflow: TextOverflow.ellipsis,\n+                                ),\n                               ),\n                             ),\n-                            const Spacer(),\n+                            SizedBox(width: 8.w),\n                           ],\n                           Row(\n+                            mainAxisSize: MainAxisSize.min,\n                             children: [\n                               Icon(\n                                 Icons.verified_rounded,\n                                 size: 14.sp,\n"
                }
            ],
            "date": 1752570376679,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:flutter/services.dart'; // لاستخدام HapticFeedback\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:get/get.dart';\nimport 'package:flutter_staggered_animations/flutter_staggered_animations.dart';\nimport '../../../Model/SellerModel.dart';\nimport '../controllers/wholesale_market_controller.dart';\nimport 'store_products_page.dart';\n\nclass WholesaleMarketPage extends StatelessWidget {\n  const WholesaleMarketPage({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    final controller = Get.put(WholesaleMarketController());\n\n    return Scaffold(\n      backgroundColor: const Color(0xFFF8FAFC),\n      body: SafeArea(\n        child: RefreshIndicator(\n          onRefresh: controller.refresh,\n          color: const Color(0xFF6366F1),\n          child: Column(\n            children: [\n              _buildSearchAndFilters(controller),\n              Expanded(child: _buildStoresList(controller)),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildViewToggle(WholesaleMarketController controller) {\n    return Obx(\n      () => Container(\n        padding: EdgeInsets.all(4.w),\n        decoration: BoxDecoration(\n          color: const Color(0xFFF8FAFC),\n          borderRadius: BorderRadius.circular(20.r),\n          border: Border.all(\n            color: const Color(0xFF6366F1).withOpacity(0.1),\n            width: 1.5,\n          ),\n          boxShadow: [\n            BoxShadow(\n              color: const Color(0xFF6366F1).withOpacity(0.05),\n              spreadRadius: 0,\n              blurRadius: 8.r,\n              offset: Offset(0, 2.h),\n            ),\n          ],\n        ),\n        child: Row(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            _buildToggleButton(\n              icon: Icons.view_list_rounded,\n              isActive: !controller.isGridView.value,\n              onTap: () => controller.isGridView.value = false,\n            ),\n            SizedBox(width: 4.w),\n            _buildToggleButton(\n              icon: Icons.grid_view_rounded,\n              isActive: controller.isGridView.value,\n              onTap: () => controller.isGridView.value = true,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  Widget _buildToggleButton({\n    required IconData icon,\n    required bool isActive,\n    required VoidCallback onTap,\n  }) {\n    return Material(\n      color: Colors.transparent,\n      child: InkWell(\n        onTap: () {\n          // تأثير اهتزاز خفيف\n          HapticFeedback.selectionClick();\n          onTap();\n        },\n        borderRadius: BorderRadius.circular(12.r),\n        splashColor: const Color(0xFF6366F1).withOpacity(0.3),\n        highlightColor: const Color(0xFF6366F1).withOpacity(0.1),\n        child: AnimatedContainer(\n          duration: const Duration(milliseconds: 300),\n          padding: EdgeInsets.all(8.w),\n          decoration: BoxDecoration(\n            color: isActive ? const Color(0xFF6366F1) : Colors.transparent,\n            borderRadius: BorderRadius.circular(12.r),\n            boxShadow:\n                isActive\n                    ? [\n                      BoxShadow(\n                        color: const Color(0xFF6366F1).withOpacity(0.3),\n                        blurRadius: 6.r,\n                        offset: Offset(0, 3.h),\n                      ),\n                    ]\n                    : null,\n          ),\n          child: Icon(\n            icon,\n            size: 20.sp,\n            color: isActive ? Colors.white : const Color(0xFF6366F1),\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildSearchAndFilters(WholesaleMarketController controller) {\n    return Container(\n      padding: EdgeInsets.fromLTRB(20.w, 20.h, 20.w, 16.h),\n      decoration: BoxDecoration(\n        color: Colors.white,\n        borderRadius: BorderRadius.circular(0),\n        boxShadow: [\n          BoxShadow(\n            color: Colors.black.withOpacity(0.05),\n            spreadRadius: 0,\n            blurRadius: 10.r,\n            offset: Offset(0, 2.h),\n          ),\n        ],\n      ),\n      child: Column(\n        children: [\n          _buildSearchBarWithViewToggle(controller),\n          SizedBox(height: 16.h),\n          _buildFilterChips(controller),\n          Obx(\n            () => AnimatedCrossFade(\n              duration: const Duration(milliseconds: 300),\n              crossFadeState:\n                  controller.showFilters.value\n                      ? CrossFadeState.showSecond\n                      : CrossFadeState.showFirst,\n              firstChild: const SizedBox.shrink(),\n              secondChild: _buildAdvancedFilters(controller),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildSearchBarWithViewToggle(WholesaleMarketController controller) {\n    return Row(\n      children: [\n        Expanded(child: _buildSearchBar(controller)),\n        SizedBox(width: 12.w),\n        _buildViewToggle(controller),\n      ],\n    );\n  }\n\n  Widget _buildSearchBar(WholesaleMarketController controller) {\n    return Container(\n      decoration: BoxDecoration(\n        color: const Color(0xFFF8FAFC),\n        borderRadius: BorderRadius.circular(20.r),\n        border: Border.all(\n          color: const Color(0xFF6366F1).withOpacity(0.1),\n          width: 1.5,\n        ),\n        boxShadow: [\n          BoxShadow(\n            color: const Color(0xFF6366F1).withOpacity(0.05),\n            spreadRadius: 0,\n            blurRadius: 8.r,\n            offset: Offset(0, 2.h),\n          ),\n        ],\n      ),\n      child: TextField(\n        controller: controller.searchController,\n        focusNode: controller.searchFocusNode,\n        decoration: InputDecoration(\n          hintText: 'ابحث عن متاجر، فئات، أو مواقع...',\n          hintStyle: TextStyle(fontSize: 16.sp, color: Colors.grey[500]),\n          prefixIcon: Padding(\n            padding: EdgeInsets.all(12.w),\n            child: Icon(\n              Icons.search_rounded,\n              size: 24.sp,\n              color: const Color(0xFF6366F1),\n            ),\n          ),\n          suffixIcon: Row(\n            mainAxisSize: MainAxisSize.min,\n            children: [\n              Obx(\n                () =>\n                    controller.hasFilters\n                        ? IconButton(\n                          onPressed: controller.clearFilters,\n                          icon: Icon(\n                            Icons.clear_rounded,\n                            size: 20.sp,\n                            color: Colors.grey[600],\n                          ),\n                        )\n                        : const SizedBox.shrink(),\n              ),\n              IconButton(\n                onPressed: controller.toggleFilters,\n                icon: Obx(\n                  () => Icon(\n                    controller.showFilters.value\n                        ? Icons.filter_list_off_rounded\n                        : Icons.filter_list_rounded,\n                    size: 20.sp,\n                    color: const Color(0xFF6366F1),\n                  ),\n                ),\n              ),\n            ],\n          ),\n          border: InputBorder.none,\n          contentPadding: EdgeInsets.symmetric(\n            horizontal: 20.w,\n            vertical: 16.h,\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildFilterChips(WholesaleMarketController controller) {\n    return Obx(\n      () => SizedBox(\n        height: 40.h,\n        child: ListView.builder(\n          scrollDirection: Axis.horizontal,\n          itemCount: controller.categories.length + 1,\n          itemBuilder: (context, index) {\n            if (index == 0) {\n              return _buildSortChip(controller);\n            }\n            final category = controller.categories[index - 1];\n            return _buildCategoryChip(controller, category);\n          },\n        ),\n      ),\n    );\n  }\n\n  Widget _buildSortChip(WholesaleMarketController controller) {\n    return Padding(\n      padding: EdgeInsets.only(left: 8.w),\n      child: FilterChip(\n        label: Row(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Icon(\n              Icons.sort_rounded,\n              size: 16.sp,\n              color: const Color(0xFF6366F1),\n            ),\n            SizedBox(width: 4.w),\n            Text('ترتيب', style: TextStyle(fontSize: 12.sp)),\n          ],\n        ),\n        selected: false,\n        onSelected: (_) {\n          // إظهار خيارات الترتيب\n          Get.bottomSheet(\n            Container(\n              padding: EdgeInsets.all(24.w),\n              decoration: BoxDecoration(\n                color: Colors.white,\n                borderRadius: BorderRadius.only(\n                  topLeft: Radius.circular(20.r),\n                  topRight: Radius.circular(20.r),\n                ),\n              ),\n              child: Column(\n                mainAxisSize: MainAxisSize.min,\n                crossAxisAlignment: CrossAxisAlignment.start,\n                children: [\n                  Text(\n                    'ترتيب حسب',\n                    style: TextStyle(\n                      fontSize: 18.sp,\n                      fontWeight: FontWeight.bold,\n                      color: Colors.grey[800],\n                    ),\n                  ),\n                  SizedBox(height: 16.h),\n\n                  // ترتيب حسب الاسم\n                  Obx(\n                    () => ListTile(\n                      leading: Icon(\n                        Icons.sort_by_alpha_rounded,\n                        color:\n                            controller.sortBy.value == 'name'\n                                ? const Color(0xFF6366F1)\n                                : Colors.grey[600],\n                      ),\n                      title: Text(\n                        'الاسم',\n                        style: TextStyle(\n                          color:\n                              controller.sortBy.value == 'name'\n                                  ? const Color(0xFF6366F1)\n                                  : Colors.grey[800],\n                          fontWeight:\n                              controller.sortBy.value == 'name'\n                                  ? FontWeight.bold\n                                  : FontWeight.normal,\n                        ),\n                      ),\n                      trailing:\n                          controller.sortBy.value == 'name'\n                              ? Icon(\n                                Icons.check_rounded,\n                                color: const Color(0xFF6366F1),\n                              )\n                              : null,\n                      onTap: () {\n                        HapticFeedback.selectionClick();\n                        controller.setSortBy('name');\n                        Get.back();\n                      },\n                    ),\n                  ),\n\n                  // ترتيب حسب الفئة\n                  Obx(\n                    () => ListTile(\n                      leading: Icon(\n                        Icons.category_rounded,\n                        color:\n                            controller.sortBy.value == 'category'\n                                ? const Color(0xFF6366F1)\n                                : Colors.grey[600],\n                      ),\n                      title: Text(\n                        'الفئة',\n                        style: TextStyle(\n                          color:\n                              controller.sortBy.value == 'category'\n                                  ? const Color(0xFF6366F1)\n                                  : Colors.grey[800],\n                          fontWeight:\n                              controller.sortBy.value == 'category'\n                                  ? FontWeight.bold\n                                  : FontWeight.normal,\n                        ),\n                      ),\n                      trailing:\n                          controller.sortBy.value == 'category'\n                              ? Icon(\n                                Icons.check_rounded,\n                                color: const Color(0xFF6366F1),\n                              )\n                              : null,\n                      onTap: () {\n                        HapticFeedback.selectionClick();\n                        controller.setSortBy('category');\n                        Get.back();\n                      },\n                    ),\n                  ),\n                ],\n              ),\n            ),\n          );\n        },\n        backgroundColor: Colors.white,\n        shape: RoundedRectangleBorder(\n          borderRadius: BorderRadius.circular(20.r),\n          side: BorderSide(color: const Color(0xFF6366F1).withOpacity(0.3)),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildCategoryChip(\n    WholesaleMarketController controller,\n    String category,\n  ) {\n    return Padding(\n      padding: EdgeInsets.only(left: 8.w),\n      child: Obx(\n        () => FilterChip(\n          label: Text(\n            category,\n            style: TextStyle(\n              fontSize: 12.sp,\n              color:\n                  controller.selectedCategory.value == category\n                      ? Colors.white\n                      : const Color(0xFF6366F1),\n            ),\n          ),\n          selected: controller.selectedCategory.value == category,\n          onSelected: (_) => controller.selectCategory(category),\n          selectedColor: const Color(0xFF6366F1),\n          backgroundColor: Colors.white,\n          shape: RoundedRectangleBorder(\n            borderRadius: BorderRadius.circular(20.r),\n            side: BorderSide(color: const Color(0xFF6366F1).withOpacity(0.3)),\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildAdvancedFilters(WholesaleMarketController controller) {\n    return Container(\n      margin: EdgeInsets.only(top: 16.h),\n      padding: EdgeInsets.all(16.w),\n      decoration: BoxDecoration(\n        color: Colors.white,\n        borderRadius: BorderRadius.circular(16.r),\n        boxShadow: [\n          BoxShadow(\n            color: Colors.black.withOpacity(0.05),\n            spreadRadius: 0,\n            blurRadius: 10.r,\n            offset: Offset(0, 2.h),\n          ),\n        ],\n      ),\n      child: Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          Text(\n            'فلاتر متقدمة',\n            style: TextStyle(\n              fontSize: 16.sp,\n              fontWeight: FontWeight.bold,\n              color: Colors.grey[800],\n            ),\n          ),\n          SizedBox(height: 12.h),\n          // يمكن إضافة المزيد من الفلاتر هنا\n          Row(\n            children: [\n              Expanded(\n                child: ElevatedButton.icon(\n                  onPressed: controller.clearFilters,\n                  icon: Icon(Icons.clear_all_rounded, size: 16.sp),\n                  label: Text('مسح الفلاتر', style: TextStyle(fontSize: 12.sp)),\n                  style: ElevatedButton.styleFrom(\n                    backgroundColor: Colors.grey[100],\n                    foregroundColor: Colors.grey[700],\n                    elevation: 0,\n                    shape: RoundedRectangleBorder(\n                      borderRadius: BorderRadius.circular(12.r),\n                    ),\n                  ),\n                ),\n              ),\n            ],\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildStoresList(WholesaleMarketController controller) {\n    return Obx(() {\n      if (controller.isLoading.value) {\n        return _buildLoadingState();\n      }\n\n      if (controller.filteredStores.isEmpty) {\n        return _buildEmptyState(controller);\n      }\n\n      return AnimationLimiter(\n        child:\n            controller.isGridView.value\n                ? _buildGridView(controller)\n                : _buildListView(controller),\n      );\n    });\n  }\n\n  Widget _buildLoadingState() {\n    return Center(\n      child: Column(\n        mainAxisAlignment: MainAxisAlignment.center,\n        children: [\n          Container(\n            padding: EdgeInsets.all(20.w),\n            decoration: BoxDecoration(\n              color: Colors.white,\n              borderRadius: BorderRadius.circular(20.r),\n              boxShadow: [\n                BoxShadow(\n                  color: Colors.black.withOpacity(0.1),\n                  spreadRadius: 0,\n                  blurRadius: 20.r,\n                ),\n              ],\n            ),\n            child: Column(\n              children: [\n                CircularProgressIndicator(\n                  color: const Color(0xFF6366F1),\n                  strokeWidth: 3.w,\n                ),\n                SizedBox(height: 16.h),\n                Text(\n                  'جاري تحميل المتاجر...',\n                  style: TextStyle(\n                    fontSize: 16.sp,\n                    color: Colors.grey[600],\n                    fontWeight: FontWeight.w500,\n                  ),\n                ),\n              ],\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildEmptyState(WholesaleMarketController controller) {\n    return Center(\n      child: Column(\n        mainAxisAlignment: MainAxisAlignment.center,\n        children: [\n          Container(\n            padding: EdgeInsets.all(24.w),\n            decoration: BoxDecoration(\n              color: Colors.white,\n              borderRadius: BorderRadius.circular(20.r),\n              boxShadow: [\n                BoxShadow(\n                  color: Colors.black.withOpacity(0.1),\n                  spreadRadius: 0,\n                  blurRadius: 20.r,\n                ),\n              ],\n            ),\n            child: Column(\n              children: [\n                Container(\n                  padding: EdgeInsets.all(20.w),\n                  decoration: BoxDecoration(\n                    color: const Color(0xFF6366F1).withOpacity(0.1),\n                    borderRadius: BorderRadius.circular(50.r),\n                  ),\n                  child: Icon(\n                    Icons.store_mall_directory_outlined,\n                    size: 48.sp,\n                    color: const Color(0xFF6366F1),\n                  ),\n                ),\n                SizedBox(height: 20.h),\n                Text(\n                  controller.hasFilters\n                      ? 'لا توجد نتائج للبحث'\n                      : 'لا توجد متاجر متاحة حالياً',\n                  style: TextStyle(\n                    fontSize: 18.sp,\n                    fontWeight: FontWeight.bold,\n                    color: Colors.grey[800],\n                  ),\n                ),\n                SizedBox(height: 8.h),\n                Text(\n                  controller.hasFilters\n                      ? 'جرب تعديل معايير البحث'\n                      : 'اسحب للأسفل للتحديث',\n                  style: TextStyle(fontSize: 14.sp, color: Colors.grey[600]),\n                ),\n                if (controller.hasFilters) ...[\n                  SizedBox(height: 16.h),\n                  ElevatedButton.icon(\n                    onPressed: controller.clearFilters,\n                    icon: Icon(Icons.clear_all_rounded, size: 16.sp),\n                    label: Text('مسح الفلاتر'),\n                    style: ElevatedButton.styleFrom(\n                      backgroundColor: const Color(0xFF6366F1),\n                      foregroundColor: Colors.white,\n                      shape: RoundedRectangleBorder(\n                        borderRadius: BorderRadius.circular(12.r),\n                      ),\n                    ),\n                  ),\n                ],\n              ],\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  Widget _buildGridView(WholesaleMarketController controller) {\n    return Padding(\n      padding: EdgeInsets.all(16.w),\n      child: GridView.builder(\n        gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n          crossAxisCount: 2,\n          childAspectRatio: 0.75, // زيادة الارتفاع لتجنب الoverflow\n          crossAxisSpacing: 16.w,\n          mainAxisSpacing: 16.h,\n        ),\n        itemCount: controller.filteredStores.length,\n        itemBuilder: (context, index) {\n          return AnimationConfiguration.staggeredGrid(\n            position: index,\n            duration: const Duration(milliseconds: 600),\n            columnCount: 2,\n            child: ScaleAnimation(\n              child: FadeInAnimation(\n                child: _buildGridStoreCard(\n                  controller.filteredStores[index],\n                  index,\n                ),\n              ),\n            ),\n          );\n        },\n      ),\n    );\n  }\n\n  Widget _buildListView(WholesaleMarketController controller) {\n    return Padding(\n      padding: EdgeInsets.all(16.w),\n      child: ListView.builder(\n        itemCount: controller.filteredStores.length,\n        itemBuilder: (context, index) {\n          return AnimationConfiguration.staggeredList(\n            position: index,\n            duration: const Duration(milliseconds: 600),\n            child: SlideAnimation(\n              verticalOffset: 50.0,\n              child: FadeInAnimation(\n                child: _buildListStoreCard(\n                  controller.filteredStores[index],\n                  index,\n                ),\n              ),\n            ),\n          );\n        },\n      ),\n    );\n  }\n\n  Widget _buildGridStoreCard(SellerModel store, int index) {\n    return Container(\n      decoration: BoxDecoration(\n        color: Colors.white,\n        borderRadius: BorderRadius.circular(20.r),\n        boxShadow: [\n          BoxShadow(\n            color: Colors.black.withOpacity(0.08),\n            spreadRadius: 0,\n            blurRadius: 12.r,\n            offset: Offset(0, 4.h),\n          ),\n        ],\n      ),\n      child: Material(\n        color: Colors.transparent,\n        child: InkWell(\n          borderRadius: BorderRadius.circular(20.r),\n          onTap: () {\n            // تأثير اهتزاز متوسط عند الانتقال لمتجر\n            HapticFeedback.mediumImpact();\n            Get.to(\n              () => StoreProductsPage(),\n              arguments: {'store': store},\n              transition: Transition.rightToLeft,\n              duration: const Duration(milliseconds: 300),\n            );\n          },\n          splashColor: const Color(0xFF6366F1).withOpacity(0.1),\n          highlightColor: const Color(0xFF6366F1).withOpacity(0.05),\n          child: Column(\n            crossAxisAlignment: CrossAxisAlignment.start,\n            children: [\n              Expanded(\n                flex: 3,\n                child: Container(\n                  width: double.infinity,\n                  decoration: BoxDecoration(\n                    borderRadius: BorderRadius.only(\n                      topLeft: Radius.circular(20.r),\n                      topRight: Radius.circular(20.r),\n                    ),\n                  ),\n                  child: ClipRRect(\n                    borderRadius: BorderRadius.only(\n                      topLeft: Radius.circular(20.r),\n                      topRight: Radius.circular(20.r),\n                    ),\n                    child: _buildStoreImage(store),\n                  ),\n                ),\n              ),\n              Expanded(\n                flex: 2,\n                child: Padding(\n                  padding: EdgeInsets.all(10.w),\n                  child: Column(\n                    crossAxisAlignment: CrossAxisAlignment.start,\n                    mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                    mainAxisSize: MainAxisSize.max,\n                    children: [\n                      Flexible(\n                        child: Column(\n                          crossAxisAlignment: CrossAxisAlignment.start,\n                          mainAxisSize: MainAxisSize.min,\n                          children: [\n                            Text(\n                              store.shopName,\n                              style: TextStyle(\n                                fontSize: 13.sp,\n                                fontWeight: FontWeight.bold,\n                                color: Colors.grey[800],\n                              ),\n                              maxLines: 1,\n                              overflow: TextOverflow.ellipsis,\n                            ),\n                            if (store.shopCategories.isNotEmpty) ...[\n                              SizedBox(height: 3.h),\n                              Container(\n                                padding: EdgeInsets.symmetric(\n                                  horizontal: 6.w,\n                                  vertical: 2.h,\n                                ),\n                                decoration: BoxDecoration(\n                                  color: const Color(\n                                    0xFF6366F1,\n                                  ).withOpacity(0.1),\n                                  borderRadius: BorderRadius.circular(6.r),\n                                ),\n                                child: Text(\n                                  store.shopCategories.join(', '),\n                                  style: TextStyle(\n                                    fontSize: 9.sp,\n                                    color: const Color(0xFF6366F1),\n                                    fontWeight: FontWeight.w500,\n                                  ),\n                                  maxLines: 1,\n                                  overflow: TextOverflow.ellipsis,\n                                ),\n                              ),\n                            ],\n                          ],\n                        ),\n                      ),\n                      Row(\n                        mainAxisSize: MainAxisSize.min,\n                        children: [\n                          Icon(\n                            Icons.verified_rounded,\n                            size: 10.sp,\n                            color: Colors.green,\n                          ),\n                          SizedBox(width: 3.w),\n                          Flexible(\n                            child: Text(\n                              'بائع جملة',\n                              style: TextStyle(\n                                fontSize: 9.sp,\n                                color: Colors.green,\n                                fontWeight: FontWeight.w600,\n                              ),\n                              maxLines: 1,\n                              overflow: TextOverflow.ellipsis,\n                            ),\n                          ),\n                        ],\n                      ),\n                    ],\n                  ),\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildListStoreCard(SellerModel store, int index) {\n    return Container(\n      margin: EdgeInsets.only(bottom: 16.h),\n      decoration: BoxDecoration(\n        color: Colors.white,\n        borderRadius: BorderRadius.circular(20.r),\n        boxShadow: [\n          BoxShadow(\n            color: Colors.black.withOpacity(0.08),\n            spreadRadius: 0,\n            blurRadius: 12.r,\n            offset: Offset(0, 4.h),\n          ),\n        ],\n      ),\n      child: Material(\n        color: Colors.transparent,\n        child: InkWell(\n          borderRadius: BorderRadius.circular(20.r),\n          onTap: () {\n            // تأثير اهتزاز متوسط عند الانتقال لمتجر\n            HapticFeedback.mediumImpact();\n            Get.to(\n              () => StoreProductsPage(),\n              arguments: {'store': store},\n              transition: Transition.rightToLeft,\n              duration: const Duration(milliseconds: 300),\n            );\n          },\n          splashColor: const Color(0xFF6366F1).withOpacity(0.1),\n          highlightColor: const Color(0xFF6366F1).withOpacity(0.05),\n          child: Padding(\n            padding: EdgeInsets.all(16.w),\n            child: Row(\n              children: [\n                Container(\n                  width: 80.w,\n                  height: 80.h,\n                  decoration: BoxDecoration(\n                    borderRadius: BorderRadius.circular(16.r),\n                  ),\n                  child: ClipRRect(\n                    borderRadius: BorderRadius.circular(16.r),\n                    child: _buildStoreImage(store),\n                  ),\n                ),\n                SizedBox(width: 16.w),\n                Expanded(\n                  child: Column(\n                    crossAxisAlignment: CrossAxisAlignment.start,\n                    children: [\n                      Text(\n                        store.shopName,\n                        style: TextStyle(\n                          fontSize: 16.sp,\n                          fontWeight: FontWeight.bold,\n                          color: Colors.grey[800],\n                        ),\n                        maxLines: 1,\n                        overflow: TextOverflow.ellipsis,\n                      ),\n                      if (store.sellerName.isNotEmpty) ...[\n                        SizedBox(height: 4.h),\n                        Text(\n                          'البائع: ${store.sellerName}',\n                          style: TextStyle(\n                            fontSize: 12.sp,\n                            color: Colors.grey[600],\n                          ),\n                          maxLines: 1,\n                          overflow: TextOverflow.ellipsis,\n                        ),\n                      ],\n                      SizedBox(height: 8.h),\n                      Row(\n                        children: [\n                          if (store.shopCategories.isNotEmpty) ...[\n                            Container(\n                              padding: EdgeInsets.symmetric(\n                                horizontal: 8.w,\n                                vertical: 4.h,\n                              ),\n                              decoration: BoxDecoration(\n                                color: const Color(0xFF6366F1).withOpacity(0.1),\n                                borderRadius: BorderRadius.circular(8.r),\n                              ),\n                              child: Text(\n                                store.shopCategories.join(', '),\n                                style: TextStyle(\n                                  fontSize: 10.sp,\n                                  color: const Color(0xFF6366F1),\n                                  fontWeight: FontWeight.w500,\n                                ),\n                              ),\n                            ),\n                            const Spacer(),\n                          ],\n                          Row(\n                            children: [\n                              Icon(\n                                Icons.verified_rounded,\n                                size: 14.sp,\n                                color: Colors.green,\n                              ),\n                              SizedBox(width: 4.w),\n                              Text(\n                                'بائع جملة',\n                                style: TextStyle(\n                                  fontSize: 12.sp,\n                                  color: Colors.green,\n                                  fontWeight: FontWeight.w600,\n                                ),\n                              ),\n                            ],\n                          ),\n                        ],\n                      ),\n                    ],\n                  ),\n                ),\n                Icon(\n                  Icons.arrow_forward_ios_rounded,\n                  size: 16.sp,\n                  color: Colors.grey[400],\n                ),\n              ],\n            ),\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildStoreImage(SellerModel store) {\n    return Container(\n      decoration: BoxDecoration(\n        gradient: LinearGradient(\n          begin: Alignment.topLeft,\n          end: Alignment.bottomRight,\n          colors: [\n            const Color(0xFF6366F1).withOpacity(0.1),\n            const Color(0xFF8B5CF6).withOpacity(0.1),\n          ],\n        ),\n      ),\n      child:\n          store.shopFrontImageUrl != null && store.shopFrontImageUrl!.isNotEmpty\n              ? Image.network(\n                store.shopFrontImageUrl!,\n                fit: BoxFit.cover,\n                errorBuilder:\n                    (context, error, stackTrace) => _buildDefaultStoreImage(),\n                loadingBuilder: (context, child, loadingProgress) {\n                  if (loadingProgress == null) return child;\n                  return Center(\n                    child: CircularProgressIndicator(\n                      strokeWidth: 2.w,\n                      color: const Color(0xFF6366F1),\n                    ),\n                  );\n                },\n              )\n              : _buildDefaultStoreImage(),\n    );\n  }\n\n  Widget _buildDefaultStoreImage() {\n    return Container(\n      decoration: BoxDecoration(\n        gradient: LinearGradient(\n          begin: Alignment.topLeft,\n          end: Alignment.bottomRight,\n          colors: [\n            const Color(0xFF6366F1).withOpacity(0.1),\n            const Color(0xFF8B5CF6).withOpacity(0.1),\n          ],\n        ),\n      ),\n      child: Center(\n        child: Icon(\n          Icons.storefront_rounded,\n          size: 40.sp,\n          color: const Color(0xFF6366F1).withOpacity(0.7),\n        ),\n      ),\n    );\n  }\n}\n"
        }
    ]
}