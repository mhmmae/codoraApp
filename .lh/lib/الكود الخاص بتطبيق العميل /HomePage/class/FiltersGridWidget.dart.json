{
    "sourceFile": "lib/Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ /HomePage/class/FiltersGridWidget.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1753068346588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753096098510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,263 +26,407 @@\n       }\n \n       return Padding(\n         padding: EdgeInsets.symmetric(horizontal: 7.w),\n-        child: Column(\n-          crossAxisAlignment: CrossAxisAlignment.start,\n-          children: [\n-            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…\n-            Container(\n-              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n-              margin: EdgeInsets.only(bottom: 16.h),\n-              decoration: BoxDecoration(\n-                gradient: LinearGradient(\n-                  colors: [\n-                    theme.primaryColor.withOpacity(0.1),\n-                    theme.primaryColor.withOpacity(0.05),\n+        child: _buildCustomFilterLayout(context, controller.allFilters, theme),\n+      );\n+    });\n+  }\n+\n+  /// Ø¨Ù†Ø§Ø¡ ØªØ®Ø·ÙŠØ· Ù…Ø®ØµØµ Ù„Ù„ÙÙ„Ø§ØªØ±\n+  Widget _buildCustomFilterLayout(\n+    BuildContext context,\n+    List<FilterItemModel> filters,\n+    ThemeData theme,\n+  ) {\n+    List<Widget> rows = [];\n+    int i = 0;\n+\n+    while (i < filters.length) {\n+      final filter = filters[i];\n+      bool needsFullWidth =\n+          filter.type == FilterType.mainCategory ||\n+          filter.type == FilterType.company;\n+\n+      if (needsFullWidth) {\n+        // Ø¥Ø¶Ø§ÙØ© ÙÙ„ØªØ± Ø¨Ø¹Ø±Ø¶ ÙƒØ§Ù…Ù„\n+        rows.add(\n+          Padding(\n+            padding: EdgeInsets.only(bottom: 10.h),\n+            child: _buildFullWidthFilterCard(context, filter, theme),\n+          ),\n+        );\n+        i++;\n+      } else {\n+        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ÙÙ„ØªØ± Ø¢Ø®Ø± ÙŠÙ…ÙƒÙ† Ø¯Ù…Ø¬Ù‡\n+        if (i + 1 < filters.length) {\n+          final nextFilter = filters[i + 1];\n+          bool nextNeedsFullWidth =\n+              nextFilter.type == FilterType.mainCategory ||\n+              nextFilter.type == FilterType.company;\n+\n+          if (!nextNeedsFullWidth) {\n+            // Ø¯Ù…Ø¬ ÙÙ„ØªØ±ÙŠÙ† Ø¬Ù†Ø¨Ø§Ù‹ Ø¥Ù„Ù‰ Ø¬Ù†Ø¨\n+            rows.add(\n+              Padding(\n+                padding: EdgeInsets.only(bottom: 10.h),\n+                child: Row(\n+                  children: [\n+                    Expanded(\n+                      child: _buildHalfWidthFilterCard(context, filter, theme),\n+                    ),\n+                    SizedBox(width: 10.w),\n+                    Expanded(\n+                      child: _buildHalfWidthFilterCard(\n+                        context,\n+                        nextFilter,\n+                        theme,\n+                      ),\n+                    ),\n                   ],\n-                  begin: Alignment.centerLeft,\n-                  end: Alignment.centerRight,\n                 ),\n-                borderRadius: BorderRadius.circular(16.r),\n-                border: Border.all(\n-                  color: theme.primaryColor.withOpacity(0.2),\n-                  width: 1.w,\n+              ),\n+            );\n+            i += 2; // ØªØ®Ø·ÙŠ Ø§Ù„ÙÙ„ØªØ±ÙŠÙ†\n+          } else {\n+            // Ø¹Ø±Ø¶ ÙÙ„ØªØ± ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·\n+            rows.add(\n+              Padding(\n+                padding: EdgeInsets.only(bottom: 10.h),\n+                child: Row(\n+                  children: [\n+                    Expanded(\n+                      child: _buildHalfWidthFilterCard(context, filter, theme),\n+                    ),\n+                    Expanded(child: Container()), // Ù…Ø³Ø§Ø­Ø© ÙØ§Ø±ØºØ©\n+                  ],\n                 ),\n               ),\n+            );\n+            i++;\n+          }\n+        } else {\n+          // Ø¢Ø®Ø± Ø¹Ù†ØµØ±\n+          rows.add(\n+            Padding(\n+              padding: EdgeInsets.only(bottom: 10.h),\n               child: Row(\n                 children: [\n-                  Container(\n-                    width: 40.w,\n-                    height: 40.h,\n-                    decoration: BoxDecoration(\n-                      color: theme.primaryColor,\n-                      borderRadius: BorderRadius.circular(12.r),\n-                      boxShadow: [\n-                        BoxShadow(\n-                          color: theme.primaryColor.withOpacity(0.3),\n-                          blurRadius: 8.r,\n-                          offset: Offset(0, 4.h),\n-                        ),\n-                      ],\n-                    ),\n-                    child: Icon(\n-                      Icons.tune_rounded,\n-                      color: Colors.white,\n-                      size: 22.sp,\n-                    ),\n-                  ),\n-                  SizedBox(width: 12.w),\n                   Expanded(\n-                    child: Column(\n-                      crossAxisAlignment: CrossAxisAlignment.start,\n-                      children: [\n-                        Text(\n-                          'ØªØµÙØ­ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø§Øª',\n-                          style: TextStyle(\n-                            fontSize: 18.sp,\n-                            fontWeight: FontWeight.bold,\n-                            color: theme.primaryColor,\n-                          ),\n-                        ),\n-                        Text(\n-                          '${controller.allFilters.length} ÙÙ„ØªØ± Ù…ØªØ§Ø­',\n-                          style: TextStyle(\n-                            fontSize: 14.sp,\n-                            color: theme.textTheme.bodySmall?.color\n-                                ?.withOpacity(0.7),\n-                          ),\n-                        ),\n-                      ],\n-                    ),\n+                    child: _buildHalfWidthFilterCard(context, filter, theme),\n                   ),\n-                  IconButton(\n-                    onPressed: () => controller.refreshFilters(),\n-                    icon: Icon(\n-                      Icons.refresh_rounded,\n-                      color: theme.primaryColor,\n-                      size: 20.sp,\n-                    ),\n-                    tooltip: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„',\n-                  ),\n+                  Expanded(child: Container()), // Ù…Ø³Ø§Ø­Ø© ÙØ§Ø±ØºØ©\n                 ],\n               ),\n             ),\n+          );\n+          i++;\n+        }\n+      }\n+    }\n \n-            // Ø´Ø¨ÙƒØ© Ø§Ù„ÙÙ„Ø§ØªØ±\n-            GridView.builder(\n-              physics: const NeverScrollableScrollPhysics(),\n-              shrinkWrap: true,\n-              gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n-                crossAxisCount: 2,\n-                childAspectRatio: 0.9,\n-                crossAxisSpacing: 10.w,\n-                mainAxisSpacing: 10.h,\n-              ),\n-              itemCount: controller.allFilters.length,\n-              itemBuilder: (context, index) {\n-                final filter = controller.allFilters[index];\n-                return _buildFilterCard(context, filter, theme);\n-              },\n-            ),\n-          ],\n-        ),\n-      );\n-    });\n+    return Column(children: rows);\n   }\n \n-  /// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙÙ„ØªØ±\n-  Widget _buildFilterCard(\n+  /// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙÙ„ØªØ± Ø¨Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…Ù„ (Ù„Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„Ø´Ø±ÙƒØ§Øª)\n+  Widget _buildFullWidthFilterCard(\n     BuildContext context,\n     FilterItemModel filter,\n     ThemeData theme,\n   ) {\n     return Card(\n-      elevation: 3,\n-      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16.r)),\n+      elevation: 4,\n+      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(20.r)),\n       clipBehavior: Clip.antiAlias,\n       child: InkWell(\n         onTap: () => _navigateToFilteredProducts(filter),\n-        borderRadius: BorderRadius.circular(16.r),\n-        child: Column(\n-          crossAxisAlignment: CrossAxisAlignment.stretch,\n-          children: [\n-            // Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØµÙˆØ±Ø©\n-            Expanded(\n-              flex: 3,\n-              child: Stack(\n-                fit: StackFit.expand,\n-                children: [\n-                  // Ø§Ù„ØµÙˆØ±Ø©\n-                  _buildFilterImage(filter),\n+        borderRadius: BorderRadius.circular(20.r),\n+        child: Container(\n+          height: 120.h,\n+          child: Stack(\n+            fit: StackFit.expand,\n+            children: [\n+              // Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ù„Ø£ ÙƒØ§Ù…Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©\n+              _buildFilterImage(filter),\n \n-                  // Ø´Ø±ÙŠØ· Ù†ÙˆØ¹ Ø§Ù„ÙÙ„ØªØ±\n-                  Positioned(\n-                    top: 8.h,\n-                    right: 8.w,\n-                    child: Container(\n-                      padding: EdgeInsets.symmetric(\n-                        horizontal: 6.w,\n-                        vertical: 3.h,\n-                      ),\n-                      decoration: BoxDecoration(\n-                        color: filter.type.color.withOpacity(0.9),\n-                        borderRadius: BorderRadius.circular(8.r),\n-                        boxShadow: [\n-                          BoxShadow(\n-                            color: Colors.black.withOpacity(0.2),\n-                            blurRadius: 4.r,\n-                            offset: Offset(0, 2.h),\n+              // Ø·Ø¨Ù‚Ø© ØªØ¯Ø±Ø¬ Ù„ØªØ­Ø³ÙŠÙ† ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Øµ\n+              Container(\n+                decoration: BoxDecoration(\n+                  gradient: LinearGradient(\n+                    colors: [\n+                      Colors.black.withOpacity(0.8),\n+                      Colors.transparent,\n+                      Colors.black.withOpacity(0.3),\n+                    ],\n+                    begin: Alignment.centerRight,\n+                    end: Alignment.centerLeft,\n+                  ),\n+                ),\n+              ),\n+\n+              // Ø§Ø³Ù… Ø§Ù„ÙÙ„ØªØ± Ù…Ø¹ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¬Ù…ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰\n+              Positioned(\n+                right: 20.w,\n+                top: 0,\n+                bottom: 0,\n+                child: Container(\n+                  width: 250.w,\n+                  child: Center(\n+                    child: TweenAnimationBuilder<double>(\n+                      duration: Duration(milliseconds: 800),\n+                      tween: Tween(begin: 0.0, end: 1.0),\n+                      builder: (context, value, child) {\n+                        return Transform.translate(\n+                          offset: Offset((1 - value) * 30, 0),\n+                          child: Opacity(\n+                            opacity: value,\n+                            child: Container(\n+                              padding: EdgeInsets.symmetric(\n+                                horizontal: 20.w,\n+                                vertical: 12.h,\n+                              ),\n+                              decoration: BoxDecoration(\n+                                gradient: LinearGradient(\n+                                  colors: [\n+                                    Colors.white.withOpacity(0.95),\n+                                    Colors.white.withOpacity(0.85),\n+                                  ],\n+                                  begin: Alignment.topLeft,\n+                                  end: Alignment.bottomRight,\n+                                ),\n+                                borderRadius: BorderRadius.circular(25.r),\n+                                boxShadow: [\n+                                  BoxShadow(\n+                                    color: Colors.black.withOpacity(0.3),\n+                                    blurRadius: 15.r,\n+                                    offset: Offset(0, 5.h),\n+                                  ),\n+                                ],\n+                                border: Border.all(\n+                                  color: filter.type.color.withOpacity(0.4),\n+                                  width: 2.w,\n+                                ),\n+                              ),\n+                              child: Text(\n+                                filter.title,\n+                                style: TextStyle(\n+                                  fontSize: 18.sp,\n+                                  fontWeight: FontWeight.bold,\n+                                  color: Colors.black87,\n+                                  letterSpacing: 0.5,\n+                                ),\n+                                maxLines: 2,\n+                                overflow: TextOverflow.ellipsis,\n+                                textAlign: TextAlign.center,\n+                              ),\n+                            ),\n                           ),\n-                        ],\n-                      ),\n-                      child: Row(\n-                        mainAxisSize: MainAxisSize.min,\n-                        children: [\n-                          Icon(\n-                            filter.type.icon,\n-                            color: Colors.white,\n-                            size: 12.sp,\n+                        );\n+                      },\n+                    ),\n+                  ),\n+                ),\n+              ),\n+\n+              // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠØ³Ø±Ù‰ Ø§Ù„Ø³ÙÙ„Ù‰\n+              if (filter.productCount != null && filter.productCount! > 0)\n+                Positioned(\n+                  left: 16.w,\n+                  bottom: 16.h,\n+                  child: TweenAnimationBuilder<double>(\n+                    duration: Duration(milliseconds: 600),\n+                    tween: Tween(begin: 0.0, end: 1.0),\n+                    builder: (context, value, child) {\n+                      return Transform.scale(\n+                        scale: value,\n+                        child: Container(\n+                          padding: EdgeInsets.symmetric(\n+                            horizontal: 12.w,\n+                            vertical: 8.h,\n                           ),\n-                          SizedBox(width: 3.w),\n-                          Text(\n-                            filter.type.displayName,\n+                          decoration: BoxDecoration(\n+                            gradient: LinearGradient(\n+                              colors: [\n+                                filter.type.color,\n+                                filter.type.color.withOpacity(0.8),\n+                              ],\n+                            ),\n+                            borderRadius: BorderRadius.circular(20.r),\n+                            boxShadow: [\n+                              BoxShadow(\n+                                color: filter.type.color.withOpacity(0.4),\n+                                blurRadius: 8.r,\n+                                offset: Offset(0, 3.h),\n+                              ),\n+                            ],\n+                          ),\n+                          child: Text(\n+                            '${filter.productCount}',\n                             style: TextStyle(\n+                              fontSize: 14.sp,\n                               color: Colors.white,\n-                              fontSize: 9.sp,\n                               fontWeight: FontWeight.bold,\n                             ),\n                           ),\n-                        ],\n-                      ),\n-                    ),\n+                        ),\n+                      );\n+                    },\n                   ),\n-                ],\n-              ),\n-            ),\n+                ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n \n-            // Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Øµ\n-            Expanded(\n-              flex: 2,\n-              child: Padding(\n-                padding: EdgeInsets.all(10.w),\n-                child: Column(\n-                  crossAxisAlignment: CrossAxisAlignment.start,\n-                  mainAxisAlignment: MainAxisAlignment.center,\n-                  children: [\n-                    // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ\n-                    Text(\n-                      filter.title,\n-                      style: TextStyle(\n-                        fontSize: 13.sp,\n-                        fontWeight: FontWeight.bold,\n-                        color: theme.textTheme.titleMedium?.color,\n-                      ),\n-                      maxLines: 1,\n-                      overflow: TextOverflow.ellipsis,\n-                    ),\n-                    SizedBox(height: 3.h),\n+  /// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙÙ„ØªØ± Ø¨Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØµÙÙŠ (Ù„Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ© ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª)\n+  Widget _buildHalfWidthFilterCard(\n+    BuildContext context,\n+    FilterItemModel filter,\n+    ThemeData theme,\n+  ) {\n+    return Card(\n+      elevation: 3,\n+      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16.r)),\n+      clipBehavior: Clip.antiAlias,\n+      child: InkWell(\n+        onTap: () => _navigateToFilteredProducts(filter),\n+        borderRadius: BorderRadius.circular(16.r),\n+        child: Container(\n+          height: 160.h,\n+          child: Stack(\n+            fit: StackFit.expand,\n+            children: [\n+              // Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ù„Ø£ ÙƒØ§Ù…Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©\n+              _buildFilterImage(filter),\n \n-                    // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ\n-                    Text(\n-                      filter.subtitle,\n-                      style: TextStyle(\n-                        fontSize: 11.sp,\n-                        color: theme.textTheme.bodySmall?.color?.withOpacity(\n-                          0.7,\n-                        ),\n-                        fontWeight: FontWeight.w500,\n-                      ),\n-                      maxLines: 1,\n-                      overflow: TextOverflow.ellipsis,\n-                    ),\n-\n-                    // Ø§Ø³Ù… Ø§Ù„ÙˆØ§Ù„Ø¯ Ø¥Ù† ÙˆØ¬Ø¯\n-                    if (filter.parentName != null) ...[\n-                      SizedBox(height: 2.h),\n-                      Text(\n-                        filter.parentName!,\n-                        style: TextStyle(\n-                          fontSize: 9.sp,\n-                          color: filter.type.color,\n-                          fontWeight: FontWeight.w600,\n-                        ),\n-                        maxLines: 1,\n-                        overflow: TextOverflow.ellipsis,\n-                      ),\n+              // Ø·Ø¨Ù‚Ø© ØªØ¯Ø±Ø¬ Ù„ØªØ­Ø³ÙŠÙ† ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Øµ\n+              Container(\n+                decoration: BoxDecoration(\n+                  gradient: LinearGradient(\n+                    colors: [\n+                      Colors.transparent,\n+                      Colors.black.withOpacity(0.3),\n+                      Colors.black.withOpacity(0.7),\n                     ],\n+                    begin: Alignment.topCenter,\n+                    end: Alignment.bottomCenter,\n+                  ),\n+                ),\n+              ),\n \n-                    // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù† ÙˆØ¬Ø¯\n-                    if (filter.productCount != null) ...[\n-                      SizedBox(height: 2.h),\n-                      Container(\n-                        padding: EdgeInsets.symmetric(\n-                          horizontal: 6.w,\n-                          vertical: 2.h,\n-                        ),\n-                        decoration: BoxDecoration(\n-                          color: filter.type.color.withOpacity(0.1),\n-                          borderRadius: BorderRadius.circular(8.r),\n-                          border: Border.all(\n-                            color: filter.type.color.withOpacity(0.3),\n-                            width: 0.5.w,\n+              // Ø§Ø³Ù… Ø§Ù„ÙÙ„ØªØ± ÙÙŠ ÙˆØ³Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¹ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¬Ù…ÙŠÙ„\n+              Center(\n+                child: TweenAnimationBuilder<double>(\n+                  duration: Duration(milliseconds: 1000),\n+                  tween: Tween(begin: 0.0, end: 1.0),\n+                  builder: (context, value, child) {\n+                    return Transform.scale(\n+                      scale: 0.8 + (value * 0.2),\n+                      child: Opacity(\n+                        opacity: value,\n+                        child: Container(\n+                          padding: EdgeInsets.symmetric(\n+                            horizontal: 16.w,\n+                            vertical: 12.h,\n                           ),\n-                        ),\n-                        child: Text(\n-                          '${filter.productCount} Ù…Ù†ØªØ¬',\n-                          style: TextStyle(\n-                            fontSize: 8.sp,\n-                            color: filter.type.color,\n-                            fontWeight: FontWeight.bold,\n+                          decoration: BoxDecoration(\n+                            gradient: LinearGradient(\n+                              colors: [\n+                                Colors.white.withOpacity(0.95),\n+                                Colors.white.withOpacity(0.88),\n+                              ],\n+                              begin: Alignment.topLeft,\n+                              end: Alignment.bottomRight,\n+                            ),\n+                            borderRadius: BorderRadius.circular(20.r),\n+                            boxShadow: [\n+                              BoxShadow(\n+                                color: filter.type.color.withOpacity(0.3),\n+                                blurRadius: 12.r,\n+                                offset: Offset(0, 4.h),\n+                              ),\n+                              BoxShadow(\n+                                color: Colors.black.withOpacity(0.1),\n+                                blurRadius: 6.r,\n+                                offset: Offset(0, 2.h),\n+                              ),\n+                            ],\n+                            border: Border.all(\n+                              color: filter.type.color.withOpacity(0.5),\n+                              width: 2.w,\n+                            ),\n                           ),\n+                          child: Text(\n+                            filter.title,\n+                            style: TextStyle(\n+                              fontSize: 14.sp,\n+                              fontWeight: FontWeight.bold,\n+                              color: Colors.black87,\n+                              letterSpacing: 0.3,\n+                            ),\n+                            maxLines: 2,\n+                            overflow: TextOverflow.ellipsis,\n+                            textAlign: TextAlign.center,\n+                          ),\n                         ),\n                       ),\n-                    ],\n-                  ],\n+                    );\n+                  },\n                 ),\n               ),\n-            ),\n-          ],\n+\n+              // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠØ³Ø±Ù‰ Ø§Ù„Ø³ÙÙ„Ù‰\n+              if (filter.productCount != null && filter.productCount! > 0)\n+                Positioned(\n+                  left: 8.w,\n+                  bottom: 8.h,\n+                  child: TweenAnimationBuilder<double>(\n+                    duration: Duration(milliseconds: 800),\n+                    tween: Tween(begin: 0.0, end: 1.0),\n+                    builder: (context, value, child) {\n+                      return Transform.translate(\n+                        offset: Offset(0, (1 - value) * 20),\n+                        child: Opacity(\n+                          opacity: value,\n+                          child: Container(\n+                            padding: EdgeInsets.symmetric(\n+                              horizontal: 10.w,\n+                              vertical: 6.h,\n+                            ),\n+                            decoration: BoxDecoration(\n+                              gradient: LinearGradient(\n+                                colors: [\n+                                  filter.type.color,\n+                                  filter.type.color.withOpacity(0.8),\n+                                ],\n+                              ),\n+                              borderRadius: BorderRadius.circular(15.r),\n+                              boxShadow: [\n+                                BoxShadow(\n+                                  color: filter.type.color.withOpacity(0.4),\n+                                  blurRadius: 6.r,\n+                                  offset: Offset(0, 2.h),\n+                                ),\n+                              ],\n+                            ),\n+                            child: Text(\n+                              '${filter.productCount}',\n+                              style: TextStyle(\n+                                fontSize: 12.sp,\n+                                color: Colors.white,\n+                                fontWeight: FontWeight.bold,\n+                              ),\n+                            ),\n+                          ),\n+                        ),\n+                      );\n+                    },\n+                  ),\n+                ),\n+            ],\n+          ),\n         ),\n       ),\n     );\n   }\n@@ -339,73 +483,57 @@\n   /// Ø¨Ù†Ø§Ø¡ Ø´Ø¨ÙƒØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„\n   Widget _buildLoadingGrid(BuildContext context) {\n     return Padding(\n       padding: EdgeInsets.symmetric(horizontal: 7.w),\n-      child: Column(\n-        children: [\n-          // placeholder Ù„Ù„Ø¹Ù†ÙˆØ§Ù†\n-          Container(\n-            height: 64.h,\n-            margin: EdgeInsets.only(bottom: 16.h),\n-            decoration: BoxDecoration(\n-              color: Colors.grey[200],\n-              borderRadius: BorderRadius.circular(16.r),\n-            ),\n-          ),\n-\n-          // Ø´Ø¨ÙƒØ© placeholder\n-          Shimmer.fromColors(\n-            baseColor: Colors.grey[300]!,\n-            highlightColor: Colors.grey[100]!,\n-            child: GridView.builder(\n-              physics: const NeverScrollableScrollPhysics(),\n-              shrinkWrap: true,\n-              gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n-                crossAxisCount: 2,\n-                childAspectRatio: 0.9,\n-                crossAxisSpacing: 10.w,\n-                mainAxisSpacing: 10.h,\n+      child: Shimmer.fromColors(\n+        baseColor: Colors.grey[300]!,\n+        highlightColor: Colors.grey[100]!,\n+        child: Column(\n+          children: [\n+            // ÙÙ„ØªØ± Ø¨Ø¹Ø±Ø¶ ÙƒØ§Ù…Ù„\n+            Container(\n+              height: 120.h,\n+              margin: EdgeInsets.only(bottom: 10.h),\n+              decoration: BoxDecoration(\n+                color: Colors.white,\n+                borderRadius: BorderRadius.circular(20.r),\n               ),\n-              itemCount: 6,\n-              itemBuilder: (context, index) => _buildLoadingCard(),\n             ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-\n-  /// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© ØªØ­Ù…ÙŠÙ„\n-  Widget _buildLoadingCard() {\n-    return Card(\n-      elevation: 3,\n-      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16.r)),\n-      child: Column(\n-        children: [\n-          Expanded(\n-            flex: 3,\n-            child: Container(\n+            // ØµÙ Ù…Ù† ÙÙ„ØªØ±ÙŠÙ† Ù†ØµÙÙŠÙŠÙ†\n+            Row(\n+              children: [\n+                Expanded(\n+                  child: Container(\n+                    height: 160.h,\n+                    decoration: BoxDecoration(\n+                      color: Colors.white,\n+                      borderRadius: BorderRadius.circular(16.r),\n+                    ),\n+                  ),\n+                ),\n+                SizedBox(width: 10.w),\n+                Expanded(\n+                  child: Container(\n+                    height: 160.h,\n+                    decoration: BoxDecoration(\n+                      color: Colors.white,\n+                      borderRadius: BorderRadius.circular(16.r),\n+                    ),\n+                  ),\n+                ),\n+              ],\n+            ),\n+            SizedBox(height: 10.h),\n+            // ÙÙ„ØªØ± Ø¨Ø¹Ø±Ø¶ ÙƒØ§Ù…Ù„ Ø¢Ø®Ø±\n+            Container(\n+              height: 120.h,\n               decoration: BoxDecoration(\n                 color: Colors.white,\n-                borderRadius: BorderRadius.vertical(top: Radius.circular(16.r)),\n+                borderRadius: BorderRadius.circular(20.r),\n               ),\n             ),\n-          ),\n-          Expanded(\n-            flex: 2,\n-            child: Padding(\n-              padding: EdgeInsets.all(10.w),\n-              child: Column(\n-                crossAxisAlignment: CrossAxisAlignment.start,\n-                children: [\n-                  Container(height: 14.h, color: Colors.white),\n-                  SizedBox(height: 6.h),\n-                  Container(height: 10.h, width: 80.w, color: Colors.white),\n-                ],\n-              ),\n-            ),\n-          ),\n-        ],\n+          ],\n+        ),\n       ),\n     );\n   }\n \n"
                },
                {
                    "date": 1753149650143,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,30 +5,99 @@\n import 'package:flutter_screenutil/flutter_screenutil.dart';\n \n import '../controllers/filters_display_controller.dart';\n import 'FilteredProductsScreen.dart';\n+import 'DetailsOfItemScreen.dart';\n+import '../../../XXX/xxx_firebase.dart';\n \n /// ÙˆÙŠØ¯Ø¬Øª Ù„Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ± Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\n class FiltersGridWidget extends StatelessWidget {\n   const FiltersGridWidget({super.key});\n \n   @override\n   Widget build(BuildContext context) {\n+    debugPrint('ğŸŸ¢ ğŸš¨ CRITICAL: FiltersGridWidget.build() STARTED');\n+    debugPrint(\n+      'ğŸŸ¢ ğŸš¨ CRITICAL: This message should appear if widget is being built',\n+    );\n+    debugPrint('ğŸŸ¢ FiltersGridWidget - ØªÙ… Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙˆÙŠØ¯Ø¬Øª!');\n+    debugPrint('ğŸŸ¢ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ø´Ø§Ø¡ FiltersDisplayController...');\n+\n     final controller = Get.put(FiltersDisplayController());\n+    debugPrint('ğŸŸ¢ FiltersDisplayController - ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù€ controller Ø¨Ù†Ø¬Ø§Ø­');\n+    debugPrint('ğŸŸ¢ isLoading: ${controller.isLoading.value}');\n+    debugPrint('ğŸŸ¢ allFilters count: ${controller.allFilters.length}');\n+\n     final theme = Theme.of(context);\n \n     return Obx(() {\n+      debugPrint('ğŸŸ¦ FiltersGridWidget Obx - Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡');\n+      debugPrint('ğŸŸ¦ isLoading: ${controller.isLoading.value}');\n+      debugPrint('ğŸŸ¦ allFilters count: ${controller.allFilters.length}');\n+\n       if (controller.isLoading.value) {\n+        debugPrint('ğŸŸ¦ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„');\n         return _buildLoadingGrid(context);\n       }\n \n       if (controller.allFilters.isEmpty) {\n+        debugPrint('ğŸŸ¦ Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© ÙØ§Ø±ØºØ©');\n         return _buildEmptyState(context, theme);\n       }\n \n+      debugPrint('ğŸŸ¦ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ');\n+\n       return Padding(\n         padding: EdgeInsets.symmetric(horizontal: 7.w),\n-        child: _buildCustomFilterLayout(context, controller.allFilters, theme),\n+        child: Column(\n+          children: [\n+            // Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© - Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø´Ø±Ø· Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±\n+            Obx(() {\n+              debugPrint(\n+                'ğŸ” Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©: ${controller.randomProducts.length}',\n+              );\n+              debugPrint(\n+                'ğŸ” Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ù…Ø®ØªØ§Ø±: ${controller.selectedRandomFilter.value?.title}',\n+              );\n+\n+              if (controller.randomProducts.isNotEmpty) {\n+                debugPrint('ğŸŸ¦ Ø¹Ø±Ø¶ Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©');\n+                return _buildRandomProductsSection(context, controller, theme);\n+              } else {\n+                debugPrint('ğŸŸ¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ÙØ§Ø±ØºØ© - Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„');\n+                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø£Ùˆ ÙØ§Ø±ØºØ©\n+                return Container(\n+                  padding: EdgeInsets.all(20.w),\n+                  child: Column(\n+                    children: [\n+                      Text(\n+                        'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©...',\n+                        style: TextStyle(\n+                          fontSize: 14.sp,\n+                          color: Colors.grey[600],\n+                        ),\n+                      ),\n+                      SizedBox(height: 10.h),\n+                      // Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±\n+                      ElevatedButton(\n+                        onPressed: () {\n+                          debugPrint(\n+                            'ğŸŸ¦ Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©',\n+                          );\n+                          controller.refreshFilters();\n+                        },\n+                        child: Text('Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©'),\n+                      ),\n+                    ],\n+                  ),\n+                );\n+              }\n+            }),\n+\n+            // Ù‚Ø³Ù… Ø§Ù„ÙÙ„Ø§ØªØ±\n+            _buildCustomFilterLayout(context, controller.allFilters, theme),\n+          ],\n+        ),\n       );\n     });\n   }\n \n@@ -139,9 +208,9 @@\n       clipBehavior: Clip.antiAlias,\n       child: InkWell(\n         onTap: () => _navigateToFilteredProducts(filter),\n         borderRadius: BorderRadius.circular(20.r),\n-        child: Container(\n+        child: SizedBox(\n           height: 120.h,\n           child: Stack(\n             fit: StackFit.expand,\n             children: [\n@@ -167,9 +236,9 @@\n               Positioned(\n                 right: 20.w,\n                 top: 0,\n                 bottom: 0,\n-                child: Container(\n+                child: SizedBox(\n                   width: 250.w,\n                   child: Center(\n                     child: TweenAnimationBuilder<double>(\n                       duration: Duration(milliseconds: 800),\n@@ -291,9 +360,9 @@\n       clipBehavior: Clip.antiAlias,\n       child: InkWell(\n         onTap: () => _navigateToFilteredProducts(filter),\n         borderRadius: BorderRadius.circular(16.r),\n-        child: Container(\n+        child: SizedBox(\n           height: 160.h,\n           child: Stack(\n             fit: StackFit.expand,\n             children: [\n@@ -584,5 +653,280 @@\n         ),\n       ),\n     );\n   }\n+\n+  /// Ø¨Ù†Ø§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©\n+  Widget _buildRandomProductsSection(\n+    BuildContext context,\n+    FiltersDisplayController controller,\n+    ThemeData theme,\n+  ) {\n+    return Container(\n+      margin: EdgeInsets.only(bottom: 20.h),\n+      child: Column(\n+        crossAxisAlignment: CrossAxisAlignment.start,\n+        children: [\n+          // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…\n+          Padding(\n+            padding: EdgeInsets.symmetric(horizontal: 8.w, vertical: 12.h),\n+            child: Row(\n+              children: [\n+                Container(\n+                  padding: EdgeInsets.symmetric(\n+                    horizontal: 16.w,\n+                    vertical: 8.h,\n+                  ),\n+                  decoration: BoxDecoration(\n+                    gradient: LinearGradient(\n+                      colors: [\n+                        theme.primaryColor,\n+                        theme.primaryColor.withOpacity(0.8),\n+                      ],\n+                    ),\n+                    borderRadius: BorderRadius.circular(20.r),\n+                    boxShadow: [\n+                      BoxShadow(\n+                        color: theme.primaryColor.withOpacity(0.3),\n+                        blurRadius: 8.r,\n+                        offset: Offset(0, 3.h),\n+                      ),\n+                    ],\n+                  ),\n+                  child: Row(\n+                    mainAxisSize: MainAxisSize.min,\n+                    children: [\n+                      Icon(\n+                        Icons.shuffle_rounded,\n+                        color: Colors.white,\n+                        size: 20.sp,\n+                      ),\n+                      SizedBox(width: 8.w),\n+                      Text(\n+                        'Ù…Ù†ØªØ¬Ø§Øª Ù…Ø®ØªØ§Ø±Ø©',\n+                        style: TextStyle(\n+                          fontSize: 16.sp,\n+                          fontWeight: FontWeight.bold,\n+                          color: Colors.white,\n+                        ),\n+                      ),\n+                    ],\n+                  ),\n+                ),\n+                Spacer(),\n+                // Ø§Ø³Ù… Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ù…Ø®ØªØ§Ø±\n+                if (controller.selectedRandomFilter.value != null)\n+                  Container(\n+                    padding: EdgeInsets.symmetric(\n+                      horizontal: 16.w,\n+                      vertical: 8.h,\n+                    ),\n+                    decoration: BoxDecoration(\n+                      gradient: LinearGradient(\n+                        colors: [\n+                          controller.selectedRandomFilter.value!.type.color\n+                              .withOpacity(0.2),\n+                          controller.selectedRandomFilter.value!.type.color\n+                              .withOpacity(0.1),\n+                        ],\n+                      ),\n+                      borderRadius: BorderRadius.circular(20.r),\n+                      border: Border.all(\n+                        color: controller.selectedRandomFilter.value!.type.color\n+                            .withOpacity(0.3),\n+                      ),\n+                    ),\n+                    child: Text(\n+                      controller.selectedRandomFilter.value!.title,\n+                      style: TextStyle(\n+                        fontSize: 14.sp,\n+                        color:\n+                            controller.selectedRandomFilter.value!.type.color,\n+                        fontWeight: FontWeight.bold,\n+                      ),\n+                    ),\n+                  ),\n+              ],\n+            ),\n+          ),\n+\n+          // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙÙ‚ÙŠØ©\n+          SizedBox(\n+            height: 200.h,\n+            child: ListView.builder(\n+              scrollDirection: Axis.horizontal,\n+              padding: EdgeInsets.symmetric(horizontal: 8.w),\n+              itemCount: controller.randomProducts.length,\n+              itemBuilder: (context, index) {\n+                final product = controller.randomProducts[index];\n+                return _buildRandomProductCard(context, product, theme);\n+              },\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+\n+  /// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ\n+  Widget _buildRandomProductCard(\n+    BuildContext context,\n+    Map<String, dynamic> product,\n+    ThemeData theme,\n+  ) {\n+    // ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø± ÙˆØ¥Ø²Ø§Ù„Ø© .0\n+    String formatPrice(dynamic price) {\n+      if (price == null) return '0';\n+\n+      double priceValue = 0.0;\n+      if (price is int) {\n+        priceValue = price.toDouble();\n+      } else if (price is double) {\n+        priceValue = price;\n+      } else if (price is String) {\n+        priceValue = double.tryParse(price) ?? 0.0;\n+      }\n+\n+      // Ø¥Ø²Ø§Ù„Ø© .0 Ù…Ù† Ø§Ù„Ø³Ø¹Ø±\n+      if (priceValue == priceValue.toInt()) {\n+        return priceValue.toInt().toString();\n+      } else {\n+        return priceValue.toString();\n+      }\n+    }\n+\n+    return Container(\n+      width: 140.w,\n+      margin: EdgeInsets.only(right: 12.w),\n+      child: Card(\n+        elevation: 4,\n+        shape: RoundedRectangleBorder(\n+          borderRadius: BorderRadius.circular(16.r),\n+        ),\n+        clipBehavior: Clip.antiAlias,\n+        child: InkWell(\n+          onTap: () {\n+            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬\n+            debugPrint(\n+              'ØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬: ${product['name']} - ID: ${product['id']}',\n+            );\n+\n+            // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù…ÙˆØ°Ø¬ ItemModel Ù…Ø¤Ù‚Øª Ù„Ù„Ù…Ù†ØªØ¬\n+            final itemModel = {\n+              'id': product['id'],\n+              'nameOfItem': product['name'],\n+              'suggestedRetailPrice': product['price'],\n+              'url': product['image'],\n+              'originalCompanyId': product['company'],\n+              'mainCategoryNameAr': product['category'],\n+              'subCategoryNameAr': product['subcategory'],\n+              'descriptionOfItem': product['description'],\n+              'mainProductBarcode': product['barcode'],\n+            };\n+\n+            Get.to(\n+              () => DetailsOfItemScreen(item: itemModel),\n+              transition: Transition.rightToLeft,\n+              duration: const Duration(milliseconds: 300),\n+            );\n+          },\n+          child: Column(\n+            crossAxisAlignment: CrossAxisAlignment.start,\n+            children: [\n+              // ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬\n+              Expanded(\n+                flex: 3,\n+                child: SizedBox(\n+                  width: double.infinity,\n+                  child:\n+                      product['image'] != null && product['image'].isNotEmpty\n+                          ? CachedNetworkImage(\n+                            imageUrl: product['image'],\n+                            fit: BoxFit.cover,\n+                            placeholder:\n+                                (context, url) => Container(\n+                                  color: Colors.grey[200],\n+                                  child: Center(\n+                                    child: Icon(\n+                                      Icons.image_outlined,\n+                                      size: 30.sp,\n+                                      color: Colors.grey[400],\n+                                    ),\n+                                  ),\n+                                ),\n+                            errorWidget:\n+                                (context, url, error) => Container(\n+                                  color: Colors.grey[200],\n+                                  child: Center(\n+                                    child: Icon(\n+                                      Icons.broken_image_outlined,\n+                                      size: 30.sp,\n+                                      color: Colors.grey[400],\n+                                    ),\n+                                  ),\n+                                ),\n+                          )\n+                          : Container(\n+                            color: Colors.grey[200],\n+                            child: Center(\n+                              child: Icon(\n+                                Icons.shopping_bag_outlined,\n+                                size: 30.sp,\n+                                color: Colors.grey[400],\n+                              ),\n+                            ),\n+                          ),\n+                ),\n+              ),\n+\n+              // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬\n+              Expanded(\n+                flex: 2,\n+                child: Padding(\n+                  padding: EdgeInsets.all(8.w),\n+                  child: Column(\n+                    crossAxisAlignment: CrossAxisAlignment.start,\n+                    children: [\n+                      // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ - Ø³Ø·Ø± ÙˆØ§Ø­Ø¯\n+                      Text(\n+                        product['name'] ?? 'Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…Ø­Ø¯Ø¯',\n+                        style: TextStyle(\n+                          fontSize: 12.sp,\n+                          fontWeight: FontWeight.bold,\n+                          color: Colors.black87,\n+                        ),\n+                        maxLines: 1, // ØªØ­Ø¯ÙŠØ¯ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯\n+                        overflow: TextOverflow.ellipsis, // Ø¹Ø±Ø¶ ... Ø¹Ù†Ø¯ Ø§Ù„Ù‚Ø·Ø¹\n+                      ),\n+                      SizedBox(height: 4.h),\n+\n+                      // Ø§Ù„Ø³Ø¹Ø±\n+                      if (product['price'] != null)\n+                        Container(\n+                          padding: EdgeInsets.symmetric(\n+                            horizontal: 8.w,\n+                            vertical: 4.h,\n+                          ),\n+                          decoration: BoxDecoration(\n+                            color: theme.primaryColor.withOpacity(0.1),\n+                            borderRadius: BorderRadius.circular(12.r),\n+                          ),\n+                          child: Text(\n+                            '${formatPrice(product['price'])} Ø¯.Ø¹.',\n+                            style: TextStyle(\n+                              fontSize: 11.sp,\n+                              fontWeight: FontWeight.bold,\n+                              color: theme.primaryColor,\n+                            ),\n+                          ),\n+                        ),\n+                    ],\n+                  ),\n+                ),\n+              ),\n+            ],\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n }\n"
                },
                {
                    "date": 1753152343372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,20 +58,24 @@\n     FiltersDisplayController controller,\n     ThemeData theme,\n   ) {\n     // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª ÙÙ‚Ø·\n-    final validFilters = controller.allFilters\n-        .where((filter) => filter.productCount != null && filter.productCount! > 0)\n-        .toList();\n+    final validFilters =\n+        controller.allFilters\n+            .where(\n+              (filter) =>\n+                  filter.productCount != null && filter.productCount! > 0,\n+            )\n+            .toList();\n \n     if (validFilters.isEmpty) {\n       debugPrint('ğŸŸ¦ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙ„Ø§ØªØ± ØµØ§Ù„Ø­Ø© Ù„Ù„Ø¹Ø±Ø¶');\n       return _buildEmptyState(context, theme);\n     }\n \n     // Ø®Ù„Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹\n     final shuffledFilters = List<FilterItemModel>.from(validFilters)..shuffle();\n-    \n+\n     // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®ØªÙ„Ø·\n     return _buildMixedContent(context, controller, shuffledFilters, theme);\n   }\n \n@@ -83,49 +87,46 @@\n     ThemeData theme,\n   ) {\n     final List<Widget> mixedContent = [];\n     final random = Random();\n-    \n+\n     int currentIndex = 0;\n     int sectionNumber = 1;\n-    \n+\n     while (currentIndex < shuffledFilters.length) {\n       // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙ„Ø§ØªØ± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… (7-10)\n       final filtersInSection = min(\n         7 + random.nextInt(4), // 7-10 ÙÙ„Ø§ØªØ±\n         shuffledFilters.length - currentIndex,\n       );\n-      \n+\n       // Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø§Ù„ÙÙ„Ø§ØªØ±\n-      final sectionFilters = shuffledFilters\n-          .skip(currentIndex)\n-          .take(filtersInSection)\n-          .toList();\n-      \n-      mixedContent.add(_buildFiltersSection(\n-        context, \n-        sectionFilters, \n-        sectionNumber, \n-        theme,\n-      ));\n-      \n+      final sectionFilters =\n+          shuffledFilters.skip(currentIndex).take(filtersInSection).toList();\n+\n+      mixedContent.add(\n+        _buildFiltersSection(context, sectionFilters, sectionNumber, theme),\n+      );\n+\n       currentIndex += filtersInSection;\n-      \n+\n       // Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ø°Ø§ Ù„Ù… Ù†ØµÙ„ Ù„Ù„Ù†Ù‡Ø§ÙŠØ© ÙˆÙ„Ø¯ÙŠÙ†Ø§ Ù…Ù†ØªØ¬Ø§Øª\n-      if (currentIndex < shuffledFilters.length && \n+      if (currentIndex < shuffledFilters.length &&\n           controller.randomProducts.isNotEmpty) {\n         mixedContent.add(_buildProductsSection(context, controller, theme));\n       }\n-      \n+\n       sectionNumber++;\n     }\n-    \n+\n     // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯ØŒ Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©\n-    if (controller.randomProducts.isNotEmpty && \n-        !mixedContent.any((widget) => widget.key?.toString().contains('products') ?? false)) {\n+    if (controller.randomProducts.isNotEmpty &&\n+        !mixedContent.any(\n+          (widget) => widget.key?.toString().contains('products') ?? false,\n+        )) {\n       mixedContent.add(_buildProductsSection(context, controller, theme));\n     }\n-    \n+\n     return Column(children: mixedContent);\n   }\n \n   /// Ø¨Ù†Ø§Ø¡ Ù‚Ø³Ù… Ø§Ù„ÙÙ„Ø§ØªØ± Ù…Ø¹ Ø±Ù‚Ù… Ø§Ù„Ù‚Ø³Ù…\n@@ -173,9 +174,12 @@\n                       ),\n                     ),\n                     SizedBox(width: 6.w),\n                     Container(\n-                      padding: EdgeInsets.symmetric(horizontal: 6.w, vertical: 2.h),\n+                      padding: EdgeInsets.symmetric(\n+                        horizontal: 6.w,\n+                        vertical: 2.h,\n+                      ),\n                       decoration: BoxDecoration(\n                         color: theme.primaryColor,\n                         borderRadius: BorderRadius.circular(8.r),\n                       ),\n@@ -191,9 +195,9 @@\n                   ],\n                 ),\n               ),\n             ),\n-          \n+\n           // Ø§Ù„ÙÙ„Ø§ØªØ± Ù†ÙØ³Ù‡Ø§\n           _buildCustomFilterLayout(context, sectionFilters, theme),\n         ],\n       ),\n@@ -208,11 +212,9 @@\n   ) {\n     return Container(\n       key: const ValueKey('products_section'),\n       margin: EdgeInsets.only(bottom: 20.h),\n-      child: Column(\n-        crossAxisAlignment: CrossAxisAlignment.start,\n-        children: [\n+      child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [\n         ],\n       ),\n     );\n   }\n"
                }
            ],
            "date": 1753068346588,
            "name": "Commit-0",
            "content": "import 'package:cached_network_image/cached_network_image.dart';\nimport 'package:flutter/material.dart';\nimport 'package:get/get.dart';\nimport 'package:shimmer/shimmer.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nimport '../controllers/filters_display_controller.dart';\nimport 'FilteredProductsScreen.dart';\n\n/// ÙˆÙŠØ¯Ø¬Øª Ù„Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ± Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\nclass FiltersGridWidget extends StatelessWidget {\n  const FiltersGridWidget({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    final controller = Get.put(FiltersDisplayController());\n    final theme = Theme.of(context);\n\n    return Obx(() {\n      if (controller.isLoading.value) {\n        return _buildLoadingGrid(context);\n      }\n\n      if (controller.allFilters.isEmpty) {\n        return _buildEmptyState(context, theme);\n      }\n\n      return Padding(\n        padding: EdgeInsets.symmetric(horizontal: 7.w),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…\n            Container(\n              padding: EdgeInsets.symmetric(horizontal: 16.w, vertical: 12.h),\n              margin: EdgeInsets.only(bottom: 16.h),\n              decoration: BoxDecoration(\n                gradient: LinearGradient(\n                  colors: [\n                    theme.primaryColor.withOpacity(0.1),\n                    theme.primaryColor.withOpacity(0.05),\n                  ],\n                  begin: Alignment.centerLeft,\n                  end: Alignment.centerRight,\n                ),\n                borderRadius: BorderRadius.circular(16.r),\n                border: Border.all(\n                  color: theme.primaryColor.withOpacity(0.2),\n                  width: 1.w,\n                ),\n              ),\n              child: Row(\n                children: [\n                  Container(\n                    width: 40.w,\n                    height: 40.h,\n                    decoration: BoxDecoration(\n                      color: theme.primaryColor,\n                      borderRadius: BorderRadius.circular(12.r),\n                      boxShadow: [\n                        BoxShadow(\n                          color: theme.primaryColor.withOpacity(0.3),\n                          blurRadius: 8.r,\n                          offset: Offset(0, 4.h),\n                        ),\n                      ],\n                    ),\n                    child: Icon(\n                      Icons.tune_rounded,\n                      color: Colors.white,\n                      size: 22.sp,\n                    ),\n                  ),\n                  SizedBox(width: 12.w),\n                  Expanded(\n                    child: Column(\n                      crossAxisAlignment: CrossAxisAlignment.start,\n                      children: [\n                        Text(\n                          'ØªØµÙØ­ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø§Øª',\n                          style: TextStyle(\n                            fontSize: 18.sp,\n                            fontWeight: FontWeight.bold,\n                            color: theme.primaryColor,\n                          ),\n                        ),\n                        Text(\n                          '${controller.allFilters.length} ÙÙ„ØªØ± Ù…ØªØ§Ø­',\n                          style: TextStyle(\n                            fontSize: 14.sp,\n                            color: theme.textTheme.bodySmall?.color\n                                ?.withOpacity(0.7),\n                          ),\n                        ),\n                      ],\n                    ),\n                  ),\n                  IconButton(\n                    onPressed: () => controller.refreshFilters(),\n                    icon: Icon(\n                      Icons.refresh_rounded,\n                      color: theme.primaryColor,\n                      size: 20.sp,\n                    ),\n                    tooltip: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„',\n                  ),\n                ],\n              ),\n            ),\n\n            // Ø´Ø¨ÙƒØ© Ø§Ù„ÙÙ„Ø§ØªØ±\n            GridView.builder(\n              physics: const NeverScrollableScrollPhysics(),\n              shrinkWrap: true,\n              gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n                crossAxisCount: 2,\n                childAspectRatio: 0.9,\n                crossAxisSpacing: 10.w,\n                mainAxisSpacing: 10.h,\n              ),\n              itemCount: controller.allFilters.length,\n              itemBuilder: (context, index) {\n                final filter = controller.allFilters[index];\n                return _buildFilterCard(context, filter, theme);\n              },\n            ),\n          ],\n        ),\n      );\n    });\n  }\n\n  /// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙÙ„ØªØ±\n  Widget _buildFilterCard(\n    BuildContext context,\n    FilterItemModel filter,\n    ThemeData theme,\n  ) {\n    return Card(\n      elevation: 3,\n      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16.r)),\n      clipBehavior: Clip.antiAlias,\n      child: InkWell(\n        onTap: () => _navigateToFilteredProducts(filter),\n        borderRadius: BorderRadius.circular(16.r),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            // Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØµÙˆØ±Ø©\n            Expanded(\n              flex: 3,\n              child: Stack(\n                fit: StackFit.expand,\n                children: [\n                  // Ø§Ù„ØµÙˆØ±Ø©\n                  _buildFilterImage(filter),\n\n                  // Ø´Ø±ÙŠØ· Ù†ÙˆØ¹ Ø§Ù„ÙÙ„ØªØ±\n                  Positioned(\n                    top: 8.h,\n                    right: 8.w,\n                    child: Container(\n                      padding: EdgeInsets.symmetric(\n                        horizontal: 6.w,\n                        vertical: 3.h,\n                      ),\n                      decoration: BoxDecoration(\n                        color: filter.type.color.withOpacity(0.9),\n                        borderRadius: BorderRadius.circular(8.r),\n                        boxShadow: [\n                          BoxShadow(\n                            color: Colors.black.withOpacity(0.2),\n                            blurRadius: 4.r,\n                            offset: Offset(0, 2.h),\n                          ),\n                        ],\n                      ),\n                      child: Row(\n                        mainAxisSize: MainAxisSize.min,\n                        children: [\n                          Icon(\n                            filter.type.icon,\n                            color: Colors.white,\n                            size: 12.sp,\n                          ),\n                          SizedBox(width: 3.w),\n                          Text(\n                            filter.type.displayName,\n                            style: TextStyle(\n                              color: Colors.white,\n                              fontSize: 9.sp,\n                              fontWeight: FontWeight.bold,\n                            ),\n                          ),\n                        ],\n                      ),\n                    ),\n                  ),\n                ],\n              ),\n            ),\n\n            // Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Øµ\n            Expanded(\n              flex: 2,\n              child: Padding(\n                padding: EdgeInsets.all(10.w),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.start,\n                  mainAxisAlignment: MainAxisAlignment.center,\n                  children: [\n                    // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ\n                    Text(\n                      filter.title,\n                      style: TextStyle(\n                        fontSize: 13.sp,\n                        fontWeight: FontWeight.bold,\n                        color: theme.textTheme.titleMedium?.color,\n                      ),\n                      maxLines: 1,\n                      overflow: TextOverflow.ellipsis,\n                    ),\n                    SizedBox(height: 3.h),\n\n                    // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ\n                    Text(\n                      filter.subtitle,\n                      style: TextStyle(\n                        fontSize: 11.sp,\n                        color: theme.textTheme.bodySmall?.color?.withOpacity(\n                          0.7,\n                        ),\n                        fontWeight: FontWeight.w500,\n                      ),\n                      maxLines: 1,\n                      overflow: TextOverflow.ellipsis,\n                    ),\n\n                    // Ø§Ø³Ù… Ø§Ù„ÙˆØ§Ù„Ø¯ Ø¥Ù† ÙˆØ¬Ø¯\n                    if (filter.parentName != null) ...[\n                      SizedBox(height: 2.h),\n                      Text(\n                        filter.parentName!,\n                        style: TextStyle(\n                          fontSize: 9.sp,\n                          color: filter.type.color,\n                          fontWeight: FontWeight.w600,\n                        ),\n                        maxLines: 1,\n                        overflow: TextOverflow.ellipsis,\n                      ),\n                    ],\n\n                    // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù† ÙˆØ¬Ø¯\n                    if (filter.productCount != null) ...[\n                      SizedBox(height: 2.h),\n                      Container(\n                        padding: EdgeInsets.symmetric(\n                          horizontal: 6.w,\n                          vertical: 2.h,\n                        ),\n                        decoration: BoxDecoration(\n                          color: filter.type.color.withOpacity(0.1),\n                          borderRadius: BorderRadius.circular(8.r),\n                          border: Border.all(\n                            color: filter.type.color.withOpacity(0.3),\n                            width: 0.5.w,\n                          ),\n                        ),\n                        child: Text(\n                          '${filter.productCount} Ù…Ù†ØªØ¬',\n                          style: TextStyle(\n                            fontSize: 8.sp,\n                            color: filter.type.color,\n                            fontWeight: FontWeight.bold,\n                          ),\n                        ),\n                      ),\n                    ],\n                  ],\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  /// Ø¨Ù†Ø§Ø¡ ØµÙˆØ±Ø© Ø§Ù„ÙÙ„ØªØ±\n  Widget _buildFilterImage(FilterItemModel filter) {\n    return filter.imageUrl != null && filter.imageUrl!.isNotEmpty\n        ? CachedNetworkImage(\n          imageUrl: filter.imageUrl!,\n          fit: BoxFit.cover,\n          placeholder: (context, url) => _buildImagePlaceholder(filter),\n          errorWidget: (context, url, error) => _buildImagePlaceholder(filter),\n        )\n        : _buildImagePlaceholder(filter);\n  }\n\n  /// Ø¨Ù†Ø§Ø¡ placeholder Ù„Ù„ØµÙˆØ±Ø©\n  Widget _buildImagePlaceholder(FilterItemModel filter) {\n    return Container(\n      decoration: BoxDecoration(\n        gradient: LinearGradient(\n          colors: [\n            filter.type.color.withOpacity(0.2),\n            filter.type.color.withOpacity(0.1),\n          ],\n          begin: Alignment.topLeft,\n          end: Alignment.bottomRight,\n        ),\n      ),\n      child: Center(\n        child: Icon(\n          filter.type.icon,\n          size: 40.sp,\n          color: filter.type.color.withOpacity(0.6),\n        ),\n      ),\n    );\n  }\n\n  /// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙÙ„ØªØ±Ø©\n  void _navigateToFilteredProducts(FilterItemModel filter) {\n    Get.to(\n      () => FilteredProductsScreen(\n        filterKey: filter.filterKey,\n        filterTitle: filter.title,\n        filterSubtitle: filter.subtitle,\n        filterType: filter.type,\n      ),\n      transition: Transition.rightToLeft,\n      duration: const Duration(milliseconds: 300),\n    );\n  }\n\n  /// Ø¨Ù†Ø§Ø¡ Ø´Ø¨ÙƒØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„\n  Widget _buildLoadingGrid(BuildContext context) {\n    return Padding(\n      padding: EdgeInsets.symmetric(horizontal: 7.w),\n      child: Column(\n        children: [\n          // placeholder Ù„Ù„Ø¹Ù†ÙˆØ§Ù†\n          Container(\n            height: 64.h,\n            margin: EdgeInsets.only(bottom: 16.h),\n            decoration: BoxDecoration(\n              color: Colors.grey[200],\n              borderRadius: BorderRadius.circular(16.r),\n            ),\n          ),\n\n          // Ø´Ø¨ÙƒØ© placeholder\n          Shimmer.fromColors(\n            baseColor: Colors.grey[300]!,\n            highlightColor: Colors.grey[100]!,\n            child: GridView.builder(\n              physics: const NeverScrollableScrollPhysics(),\n              shrinkWrap: true,\n              gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(\n                crossAxisCount: 2,\n                childAspectRatio: 0.9,\n                crossAxisSpacing: 10.w,\n                mainAxisSpacing: 10.h,\n              ),\n              itemCount: 6,\n              itemBuilder: (context, index) => _buildLoadingCard(),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  /// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© ØªØ­Ù…ÙŠÙ„\n  Widget _buildLoadingCard() {\n    return Card(\n      elevation: 3,\n      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16.r)),\n      child: Column(\n        children: [\n          Expanded(\n            flex: 3,\n            child: Container(\n              decoration: BoxDecoration(\n                color: Colors.white,\n                borderRadius: BorderRadius.vertical(top: Radius.circular(16.r)),\n              ),\n            ),\n          ),\n          Expanded(\n            flex: 2,\n            child: Padding(\n              padding: EdgeInsets.all(10.w),\n              child: Column(\n                crossAxisAlignment: CrossAxisAlignment.start,\n                children: [\n                  Container(height: 14.h, color: Colors.white),\n                  SizedBox(height: 6.h),\n                  Container(height: 10.h, width: 80.w, color: Colors.white),\n                ],\n              ),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  /// Ø¨Ù†Ø§Ø¡ Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ©\n  Widget _buildEmptyState(BuildContext context, ThemeData theme) {\n    return Center(\n      child: Padding(\n        padding: EdgeInsets.all(32.w),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: [\n            Icon(\n              Icons.filter_alt_off_outlined,\n              size: 60.sp,\n              color: Colors.grey[400],\n            ),\n            SizedBox(height: 16.h),\n            Text(\n              'Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙ„Ø§ØªØ± Ù…ØªØ§Ø­Ø©',\n              style: TextStyle(\n                fontSize: 16.sp,\n                fontWeight: FontWeight.bold,\n                color: Colors.grey[600],\n              ),\n            ),\n            SizedBox(height: 8.h),\n            Text(\n              'ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø£Ù‚Ø³Ø§Ù… ÙˆØ´Ø±ÙƒØ§Øª Ù…ÙØ¹Ù„Ø©',\n              style: TextStyle(fontSize: 14.sp, color: Colors.grey[500]),\n              textAlign: TextAlign.center,\n            ),\n            SizedBox(height: 24.h),\n            ElevatedButton.icon(\n              onPressed:\n                  () => Get.find<FiltersDisplayController>().refreshFilters(),\n              icon: const Icon(Icons.refresh_rounded),\n              label: const Text('Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©'),\n              style: ElevatedButton.styleFrom(\n                backgroundColor: theme.primaryColor,\n                foregroundColor: Colors.white,\n                padding: EdgeInsets.symmetric(horizontal: 20.w, vertical: 10.h),\n                shape: RoundedRectangleBorder(\n                  borderRadius: BorderRadius.circular(12.r),\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n"
        }
    ]
}