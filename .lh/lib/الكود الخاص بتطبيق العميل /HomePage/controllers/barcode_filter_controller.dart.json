{
    "sourceFile": "lib/Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ /HomePage/controllers/barcode_filter_controller.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1752919676713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752922212107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,35 +8,34 @@\n import '../../../Model/model_item.dart';\n import '../../../XXX/xxx_firebase.dart';\n \n /// ÙƒÙ†ØªØ±ÙˆÙ„Ø± Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„ÙÙ„ØªØ±Ø©\n-class BarcodeFilterController extends GetxController with GetSingleTickerProviderStateMixin {\n+class BarcodeFilterController extends GetxController\n+    with GetSingleTickerProviderStateMixin {\n   // ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ\n   final GetStorage _storage = GetStorage();\n-  \n+\n   // Ù…ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø­\n   late MobileScannerController scannerController;\n-  \n+\n   // Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…\n   final RxBool isBarcodeSearchActive = false.obs;\n   final RxBool isScanning = false.obs;\n   final RxBool hasPermission = false.obs;\n   final RxString scannedBarcode = ''.obs;\n   final RxString currentSearchBarcode = ''.obs;\n-  \n \n-  \n   // Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«\n   final RxList<ItemModel> searchResults = <ItemModel>[].obs;\n   final Rxn<ItemModel> foundProduct = Rxn<ItemModel>();\n   final RxBool showProductNotFound = false.obs;\n-  \n+\n   // Animation Controller\n   late AnimationController animationController;\n   late Animation<double> slideAnimation;\n   late Animation<double> fadeAnimation;\n   late Animation<double> scaleAnimation;\n-  \n+\n   @override\n   void onInit() {\n     super.onInit();\n     _initAnimations();\n@@ -56,32 +55,29 @@\n     animationController = AnimationController(\n       duration: const Duration(milliseconds: 1200),\n       vsync: this,\n     );\n-    \n-    slideAnimation = Tween<double>(\n-      begin: 0.0,\n-      end: 1.0,\n-    ).animate(CurvedAnimation(\n-      parent: animationController,\n-      curve: const Interval(0.0, 0.8, curve: Curves.easeInOutQuint),\n-    ));\n-    \n-    fadeAnimation = Tween<double>(\n-      begin: 0.0,\n-      end: 1.0,\n-    ).animate(CurvedAnimation(\n-      parent: animationController,\n-      curve: const Interval(0.2, 0.9, curve: Curves.easeOutExpo),\n-    ));\n-    \n-    scaleAnimation = Tween<double>(\n-      begin: 0.7,\n-      end: 1.0,\n-    ).animate(CurvedAnimation(\n-      parent: animationController,\n-      curve: const Interval(0.4, 1.0, curve: Curves.elasticOut),\n-    ));\n+\n+    slideAnimation = Tween<double>(begin: 0.0, end: 1.0).animate(\n+      CurvedAnimation(\n+        parent: animationController,\n+        curve: const Interval(0.0, 0.8, curve: Curves.easeInOutQuint),\n+      ),\n+    );\n+\n+    fadeAnimation = Tween<double>(begin: 0.0, end: 1.0).animate(\n+      CurvedAnimation(\n+        parent: animationController,\n+        curve: const Interval(0.2, 0.9, curve: Curves.easeOutExpo),\n+      ),\n+    );\n+\n+    scaleAnimation = Tween<double>(begin: 0.7, end: 1.0).animate(\n+      CurvedAnimation(\n+        parent: animationController,\n+        curve: const Interval(0.4, 1.0, curve: Curves.elasticOut),\n+      ),\n+    );\n   }\n \n   /// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø³Ø­\n   void _initializeScanner() {\n@@ -95,9 +91,9 @@\n   /// Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§\n   Future<void> _requestCameraPermission() async {\n     final status = await Permission.camera.request();\n     hasPermission.value = status == PermissionStatus.granted;\n-    \n+\n     if (!hasPermission.value) {\n       Get.snackbar(\n         'âŒ Ø¥Ø°Ù† Ù…Ø·Ù„ÙˆØ¨',\n         'ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n@@ -111,26 +107,26 @@\n   /// ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n   void activateBarcodeSearch() {\n     // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©\n     _showUsageMessage();\n-    \n+\n     // Ø§Ù†ÙŠÙ…ÙŠØ´Ù† ØªÙØ¹ÙŠÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ\n     isBarcodeSearchActive.value = true;\n-    \n+\n     // ØªØ´ØºÙŠÙ„ Ø§Ù†ÙŠÙ…ÙŠØ´Ù† Ù…ØªØ¯Ø±Ø¬ ÙˆØ§Ø­ØªØ±Ø§ÙÙŠ\n     animationController.reset();\n     animationController.forward();\n-    \n+\n     // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ù„Ù„ØªÙØ¹ÙŠÙ„\n     _addActivationEffects();\n-    \n+\n     // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­\n     if (hasPermission.value) {\n       Future.delayed(Duration(milliseconds: 400), () {\n         scannerController.start();\n       });\n     }\n-    \n+\n     debugPrint('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯');\n   }\n \n   /// Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ù„Ù„ØªÙØ¹ÙŠÙ„\n@@ -141,46 +137,46 @@\n   /// Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n   void deactivateBarcodeSearch() {\n     // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹\n     clearAllNotifications();\n-    \n+\n     // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­ Ø£ÙˆÙ„Ø§Ù‹\n     scannerController.stop();\n-    \n+\n     // Ø§Ù†ÙŠÙ…ÙŠØ´Ù† Ø¥ØºÙ„Ø§Ù‚ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…Ø¹ ØªØ£Ø®ÙŠØ± Ù…ØªØ¯Ø±Ø¬\n-    animationController.animateTo(\n-      0.0,\n-      duration: const Duration(milliseconds: 900),\n-      curve: Curves.easeInOutQuart,\n-    ).then((_) {\n-      isBarcodeSearchActive.value = false;\n-      currentSearchBarcode.value = '';\n-      scannedBarcode.value = '';\n-      isScanning.value = false;\n-      _resetScanner();\n-    });\n-    \n+    animationController\n+        .animateTo(\n+          0.0,\n+          duration: const Duration(milliseconds: 900),\n+          curve: Curves.easeInOutQuart,\n+        )\n+        .then((_) {\n+          isBarcodeSearchActive.value = false;\n+          currentSearchBarcode.value = '';\n+          scannedBarcode.value = '';\n+          isScanning.value = false;\n+          _resetScanner();\n+        });\n+\n     // ØªÙ… Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø± \"ØªÙ… Ø§Ù„Ø¥ØºÙ„Ø§Ù‚\" Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n-    \n+\n     debugPrint('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯');\n   }\n \n-\n-\n   /// Ø¹Ù†Ø¯ Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­\n   void onBarcodeDetected(BarcodeCapture capture) {\n     if (!isScanning.value) return; // Ù…Ù†Ø¹ Ø§Ù„Ù…Ø³Ø­ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø´Ø·Ø©\n-    \n+\n     final List<Barcode> barcodes = capture.barcodes;\n-    \n+\n     if (barcodes.isNotEmpty) {\n       final barcode = barcodes.first;\n       scannedBarcode.value = barcode.rawValue ?? '';\n-      \n+\n       if (scannedBarcode.value.isNotEmpty) {\n         // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù…Ø¤Ù‚ØªØ§Ù‹\n         scannerController.stop();\n-        \n+\n         // ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n         _checkProductsExistenceInWidget(scannedBarcode.value);\n       }\n     }\n@@ -189,24 +185,28 @@\n   /// ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„ÙˆÙŠØ¯Ø¬Øª\n   Future<void> _checkProductsExistenceInWidget(String barcode) async {\n     try {\n       // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù† Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n-      final QuerySnapshot result = await FirebaseFirestore.instance\n-          .collection(FirebaseX.itemsCollection)\n-          .where('appName', isEqualTo: FirebaseX.appName)\n-          .where('productBarcode', isEqualTo: barcode)\n-          .limit(1)\n-          .get();\n+      final QuerySnapshot result =\n+          await FirebaseFirestore.instance\n+              .collection(FirebaseX.itemsCollection)\n+              .where('appName', isEqualTo: FirebaseX.appName)\n+              .where('productBarcode', isEqualTo: barcode)\n+              .limit(1)\n+              .get();\n \n       if (result.docs.isNotEmpty) {\n         // ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬\n         final doc = result.docs.first;\n-        final product = ItemModel.fromMap(doc.data() as Map<String, dynamic>, doc.id);\n-        \n+        final product = ItemModel.fromMap(\n+          doc.data() as Map<String, dynamic>,\n+          doc.id,\n+        );\n+\n         foundProduct.value = product;\n         currentSearchBarcode.value = barcode;\n         isScanning.value = false; // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­\n-        \n+\n         Get.snackbar(\n           'âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬',\n           'ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n           backgroundColor: Colors.green.withValues(alpha: 0.1),\n@@ -228,9 +228,9 @@\n         colorText: Colors.red[800],\n         duration: Duration(seconds: 3),\n         icon: Icon(Icons.error, color: Colors.red),\n       );\n-      \n+\n       // Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­\n       restartScanning();\n     }\n   }\n@@ -239,9 +239,9 @@\n   void restartScanning() {\n     foundProduct.value = null;\n     showProductNotFound.value = false;\n     scannedBarcode.value = '';\n-    \n+\n     if (hasPermission.value) {\n       isScanning.value = true;\n       scannerController.start();\n     }\n@@ -254,11 +254,14 @@\n   }\n \n   /// Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸\n   void clearCurrentBarcode() {\n+    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹\n+    clearAllNotifications();\n+    \n     currentSearchBarcode.value = '';\n     scannedBarcode.value = '';\n-    \n+\n     Get.snackbar(\n       'ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ù…Ø³Ø­',\n       'ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ø¨Ø­Ø«',\n       backgroundColor: Colors.orange.withOpacity(0.1),\n@@ -291,10 +294,11 @@\n \n   /// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙŠØ²Ø© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)\n   void _showUsageMessage() {\n     // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹\n-    bool hasShownMessage = _storage.read('barcode_usage_message_shown') ?? false;\n-    \n+    bool hasShownMessage =\n+        _storage.read('barcode_usage_message_shown') ?? false;\n+\n     if (!hasShownMessage) {\n       Get.snackbar(\n         'ğŸ“± Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n         'Ø§Ø³Ø­Ø¨ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù‡Ø§ØªÙ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',\n@@ -306,25 +310,19 @@\n           crossAxisAlignment: CrossAxisAlignment.start,\n           children: [\n             Text(\n               'Ø§Ø³Ø­Ø¨ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù‡Ø§ØªÙ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',\n-              style: TextStyle(\n-                color: Colors.blue[800],\n-                fontSize: 14,\n-              ),\n+              style: TextStyle(color: Colors.blue[800], fontSize: 14),\n             ),\n             SizedBox(height: 8),\n             Text(\n               'ğŸ’¡ Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙˆØ§Ø¶Ø­Ø§Ù‹ Ø£Ù…Ø§Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',\n-              style: TextStyle(\n-                color: Colors.blue[600],\n-                fontSize: 12,\n-              ),\n+              style: TextStyle(color: Colors.blue[600], fontSize: 12),\n             ),\n           ],\n         ),\n       );\n-      \n+\n       // Ø­ÙØ¸ Ø£Ù†Ù‡ ØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø©\n       _storage.write('barcode_usage_message_shown', true);\n     }\n   }\n@@ -347,16 +345,16 @@\n     // Ù…Ø³Ø­ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©\n     foundProduct.value = null;\n     showProductNotFound.value = false;\n     scannedBarcode.value = '';\n-    \n+\n     // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­\n     isScanning.value = true;\n-    \n+\n     // ØªØ£ÙƒØ¯ Ù…Ù† Ø¨Ø¯Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§\n     try {\n       await scannerController.start();\n-      \n+\n       // ØªÙ… Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø± \"Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¬Ø§Ù‡Ø²Ø©\" Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n     } catch (e) {\n       debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: $e');\n       Get.snackbar(\n@@ -372,17 +370,17 @@\n   /// Ø¥ÙŠÙ‚Ø§Ù Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§\n   void stopCameraScanning() {\n     // Ù…Ø³Ø­ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø£ÙˆÙ„Ø§Ù‹\n     clearAllNotifications();\n-    \n+\n     isScanning.value = false;\n     scannerController.stop();\n-    \n+\n     // Ù…Ø³Ø­ Ø§Ù„Ø­Ø§Ù„Ø©\n     foundProduct.value = null;\n     showProductNotFound.value = false;\n     scannedBarcode.value = '';\n-    \n+\n     // ØªÙ… Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø± \"ØªÙ… Ø§Ù„Ø¥ØºÙ„Ø§Ù‚\" Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n   }\n \n   /// Ù…Ø³Ø­ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯\n@@ -405,22 +403,26 @@\n \n     try {\n       // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ\n       currentSearchBarcode.value = barcode;\n-      \n+\n       // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n-      final QuerySnapshot result = await FirebaseFirestore.instance\n-          .collection(FirebaseX.itemsCollection)\n-          .where('appName', isEqualTo: FirebaseX.appName)\n-          .where('productBarcode', isEqualTo: barcode)\n-          .get();\n+      final QuerySnapshot result =\n+          await FirebaseFirestore.instance\n+              .collection(FirebaseX.itemsCollection)\n+              .where('appName', isEqualTo: FirebaseX.appName)\n+              .where('productBarcode', isEqualTo: barcode)\n+              .get();\n \n       if (result.docs.isNotEmpty) {\n         // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†ØªØ¬Ø§Øª\n         searchResults.clear();\n         for (var doc in result.docs) {\n           try {\n-            final item = ItemModel.fromMap(doc.data() as Map<String, dynamic>, doc.id);\n+            final item = ItemModel.fromMap(\n+              doc.data() as Map<String, dynamic>,\n+              doc.id,\n+            );\n             searchResults.add(item);\n           } catch (e) {\n             debugPrint('Ø®Ø·Ø£ ÙÙŠ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬: $e');\n           }\n@@ -457,5 +459,5 @@\n   /// Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©\n   void clearAllNotifications() {\n     Get.closeAllSnackbars();\n   }\n-} \n\\ No newline at end of file\n+}\n"
                }
            ],
            "date": 1752919676712,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:get/get.dart';\nimport 'package:mobile_scanner/mobile_scanner.dart';\nimport 'package:permission_handler/permission_handler.dart';\nimport 'package:cloud_firestore/cloud_firestore.dart';\nimport 'package:get_storage/get_storage.dart';\n\nimport '../../../Model/model_item.dart';\nimport '../../../XXX/xxx_firebase.dart';\n\n/// ÙƒÙ†ØªØ±ÙˆÙ„Ø± Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ù„ÙÙ„ØªØ±Ø©\nclass BarcodeFilterController extends GetxController with GetSingleTickerProviderStateMixin {\n  // ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ\n  final GetStorage _storage = GetStorage();\n  \n  // Ù…ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø­\n  late MobileScannerController scannerController;\n  \n  // Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…\n  final RxBool isBarcodeSearchActive = false.obs;\n  final RxBool isScanning = false.obs;\n  final RxBool hasPermission = false.obs;\n  final RxString scannedBarcode = ''.obs;\n  final RxString currentSearchBarcode = ''.obs;\n  \n\n  \n  // Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«\n  final RxList<ItemModel> searchResults = <ItemModel>[].obs;\n  final Rxn<ItemModel> foundProduct = Rxn<ItemModel>();\n  final RxBool showProductNotFound = false.obs;\n  \n  // Animation Controller\n  late AnimationController animationController;\n  late Animation<double> slideAnimation;\n  late Animation<double> fadeAnimation;\n  late Animation<double> scaleAnimation;\n  \n  @override\n  void onInit() {\n    super.onInit();\n    _initAnimations();\n    _initializeScanner();\n    _requestCameraPermission();\n  }\n\n  @override\n  void onClose() {\n    animationController.dispose();\n    scannerController.dispose();\n    super.onClose();\n  }\n\n  /// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†\n  void _initAnimations() {\n    animationController = AnimationController(\n      duration: const Duration(milliseconds: 1200),\n      vsync: this,\n    );\n    \n    slideAnimation = Tween<double>(\n      begin: 0.0,\n      end: 1.0,\n    ).animate(CurvedAnimation(\n      parent: animationController,\n      curve: const Interval(0.0, 0.8, curve: Curves.easeInOutQuint),\n    ));\n    \n    fadeAnimation = Tween<double>(\n      begin: 0.0,\n      end: 1.0,\n    ).animate(CurvedAnimation(\n      parent: animationController,\n      curve: const Interval(0.2, 0.9, curve: Curves.easeOutExpo),\n    ));\n    \n    scaleAnimation = Tween<double>(\n      begin: 0.7,\n      end: 1.0,\n    ).animate(CurvedAnimation(\n      parent: animationController,\n      curve: const Interval(0.4, 1.0, curve: Curves.elasticOut),\n    ));\n  }\n\n  /// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø³Ø­\n  void _initializeScanner() {\n    scannerController = MobileScannerController(\n      detectionSpeed: DetectionSpeed.noDuplicates,\n      facing: CameraFacing.back,\n      torchEnabled: false,\n    );\n  }\n\n  /// Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§\n  Future<void> _requestCameraPermission() async {\n    final status = await Permission.camera.request();\n    hasPermission.value = status == PermissionStatus.granted;\n    \n    if (!hasPermission.value) {\n      Get.snackbar(\n        'âŒ Ø¥Ø°Ù† Ù…Ø·Ù„ÙˆØ¨',\n        'ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n        backgroundColor: Colors.red.withOpacity(0.1),\n        colorText: Colors.red,\n        duration: Duration(seconds: 5),\n      );\n    }\n  }\n\n  /// ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n  void activateBarcodeSearch() {\n    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©\n    _showUsageMessage();\n    \n    // Ø§Ù†ÙŠÙ…ÙŠØ´Ù† ØªÙØ¹ÙŠÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ\n    isBarcodeSearchActive.value = true;\n    \n    // ØªØ´ØºÙŠÙ„ Ø§Ù†ÙŠÙ…ÙŠØ´Ù† Ù…ØªØ¯Ø±Ø¬ ÙˆØ§Ø­ØªØ±Ø§ÙÙŠ\n    animationController.reset();\n    animationController.forward();\n    \n    // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ù„Ù„ØªÙØ¹ÙŠÙ„\n    _addActivationEffects();\n    \n    // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­\n    if (hasPermission.value) {\n      Future.delayed(Duration(milliseconds: 400), () {\n        scannerController.start();\n      });\n    }\n    \n    debugPrint('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯');\n  }\n\n  /// Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ù„Ù„ØªÙØ¹ÙŠÙ„\n  void _addActivationEffects() {\n    // ØªÙ… Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø± \"Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¬Ø§Ù‡Ø²Ø©\" Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n  }\n\n  /// Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n  void deactivateBarcodeSearch() {\n    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹\n    clearAllNotifications();\n    \n    // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­ Ø£ÙˆÙ„Ø§Ù‹\n    scannerController.stop();\n    \n    // Ø§Ù†ÙŠÙ…ÙŠØ´Ù† Ø¥ØºÙ„Ø§Ù‚ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…Ø¹ ØªØ£Ø®ÙŠØ± Ù…ØªØ¯Ø±Ø¬\n    animationController.animateTo(\n      0.0,\n      duration: const Duration(milliseconds: 900),\n      curve: Curves.easeInOutQuart,\n    ).then((_) {\n      isBarcodeSearchActive.value = false;\n      currentSearchBarcode.value = '';\n      scannedBarcode.value = '';\n      isScanning.value = false;\n      _resetScanner();\n    });\n    \n    // ØªÙ… Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø± \"ØªÙ… Ø§Ù„Ø¥ØºÙ„Ø§Ù‚\" Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n    \n    debugPrint('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯');\n  }\n\n\n\n  /// Ø¹Ù†Ø¯ Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­\n  void onBarcodeDetected(BarcodeCapture capture) {\n    if (!isScanning.value) return; // Ù…Ù†Ø¹ Ø§Ù„Ù…Ø³Ø­ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø´Ø·Ø©\n    \n    final List<Barcode> barcodes = capture.barcodes;\n    \n    if (barcodes.isNotEmpty) {\n      final barcode = barcodes.first;\n      scannedBarcode.value = barcode.rawValue ?? '';\n      \n      if (scannedBarcode.value.isNotEmpty) {\n        // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù…Ø¤Ù‚ØªØ§Ù‹\n        scannerController.stop();\n        \n        // ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n        _checkProductsExistenceInWidget(scannedBarcode.value);\n      }\n    }\n  }\n\n  /// ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„ÙˆÙŠØ¯Ø¬Øª\n  Future<void> _checkProductsExistenceInWidget(String barcode) async {\n    try {\n      // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù† Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n      final QuerySnapshot result = await FirebaseFirestore.instance\n          .collection(FirebaseX.itemsCollection)\n          .where('appName', isEqualTo: FirebaseX.appName)\n          .where('productBarcode', isEqualTo: barcode)\n          .limit(1)\n          .get();\n\n      if (result.docs.isNotEmpty) {\n        // ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬\n        final doc = result.docs.first;\n        final product = ItemModel.fromMap(doc.data() as Map<String, dynamic>, doc.id);\n        \n        foundProduct.value = product;\n        currentSearchBarcode.value = barcode;\n        isScanning.value = false; // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­\n        \n        Get.snackbar(\n          'âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬',\n          'ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n          backgroundColor: Colors.green.withValues(alpha: 0.1),\n          colorText: Colors.green[800],\n          duration: Duration(seconds: 2),\n          icon: Icon(Icons.check_circle, color: Colors.green),\n        );\n      } else {\n        // Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª\n        showProductNotFound.value = true;\n        isScanning.value = false; // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­\n      }\n    } catch (e) {\n      // Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«\n      Get.snackbar(\n        'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«',\n        'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬',\n        backgroundColor: Colors.red.withValues(alpha: 0.1),\n        colorText: Colors.red[800],\n        duration: Duration(seconds: 3),\n        icon: Icon(Icons.error, color: Colors.red),\n      );\n      \n      // Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­\n      restartScanning();\n    }\n  }\n\n  /// Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­\n  void restartScanning() {\n    foundProduct.value = null;\n    showProductNotFound.value = false;\n    scannedBarcode.value = '';\n    \n    if (hasPermission.value) {\n      isScanning.value = true;\n      scannerController.start();\n    }\n  }\n\n  /// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø³Ø­\n  void _resetScanner() {\n    isScanning.value = false;\n    scannedBarcode.value = '';\n  }\n\n  /// Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸\n  void clearCurrentBarcode() {\n    currentSearchBarcode.value = '';\n    scannedBarcode.value = '';\n    \n    Get.snackbar(\n      'ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ù…Ø³Ø­',\n      'ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ø¨Ø­Ø«',\n      backgroundColor: Colors.orange.withOpacity(0.1),\n      colorText: Colors.orange[800],\n      duration: Duration(seconds: 2),\n    );\n  }\n\n  /// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠ\n  String getFilterKey() {\n    if (currentSearchBarcode.value.isNotEmpty) {\n      return 'barcode_${currentSearchBarcode.value}';\n    }\n    return 'all';\n  }\n\n  /// ÙˆØµÙ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠ\n  String getFilterDescription() {\n    if (currentSearchBarcode.value.isNotEmpty) {\n      return 'Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯: ${currentSearchBarcode.value}';\n    }\n    return 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª';\n  }\n\n  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ÙÙ„ØªØ± Ù†Ø´Ø·\n  bool get hasActiveFilter => currentSearchBarcode.value.isNotEmpty;\n\n  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§\n  bool get isCameraReady => hasPermission.value && !isScanning.value;\n\n  /// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙŠØ²Ø© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)\n  void _showUsageMessage() {\n    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹\n    bool hasShownMessage = _storage.read('barcode_usage_message_shown') ?? false;\n    \n    if (!hasShownMessage) {\n      Get.snackbar(\n        'ğŸ“± Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n        'Ø§Ø³Ø­Ø¨ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù‡Ø§ØªÙ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',\n        backgroundColor: Colors.blue.withOpacity(0.1),\n        colorText: Colors.blue[800],\n        duration: Duration(seconds: 4),\n        icon: Icon(Icons.qr_code_scanner, color: Colors.blue),\n        messageText: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Text(\n              'Ø§Ø³Ø­Ø¨ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù‡Ø§ØªÙ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',\n              style: TextStyle(\n                color: Colors.blue[800],\n                fontSize: 14,\n              ),\n            ),\n            SizedBox(height: 8),\n            Text(\n              'ğŸ’¡ Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙˆØ§Ø¶Ø­Ø§Ù‹ Ø£Ù…Ø§Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',\n              style: TextStyle(\n                color: Colors.blue[600],\n                fontSize: 12,\n              ),\n            ),\n          ],\n        ),\n      );\n      \n      // Ø­ÙØ¸ Ø£Ù†Ù‡ ØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø©\n      _storage.write('barcode_usage_message_shown', true);\n    }\n  }\n\n  /// Ø¨Ø¯Ø¡ Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙŠØ¯Ø¬Øª\n  void startCameraScanning() async {\n    if (!hasPermission.value) {\n      await _requestCameraPermission();\n      if (!hasPermission.value) {\n        Get.snackbar(\n          'âŒ Ø®Ø·Ø£',\n          'ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§',\n          backgroundColor: Colors.red.withValues(alpha: 0.1),\n          colorText: Colors.red,\n        );\n        return;\n      }\n    }\n\n    // Ù…Ø³Ø­ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©\n    foundProduct.value = null;\n    showProductNotFound.value = false;\n    scannedBarcode.value = '';\n    \n    // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­\n    isScanning.value = true;\n    \n    // ØªØ£ÙƒØ¯ Ù…Ù† Ø¨Ø¯Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§\n    try {\n      await scannerController.start();\n      \n      // ØªÙ… Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø± \"Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¬Ø§Ù‡Ø²Ø©\" Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n    } catch (e) {\n      debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: $e');\n      Get.snackbar(\n        'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',\n        'Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',\n        backgroundColor: Colors.red.withValues(alpha: 0.1),\n        colorText: Colors.red,\n      );\n      isScanning.value = false;\n    }\n  }\n\n  /// Ø¥ÙŠÙ‚Ø§Ù Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§\n  void stopCameraScanning() {\n    // Ù…Ø³Ø­ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø£ÙˆÙ„Ø§Ù‹\n    clearAllNotifications();\n    \n    isScanning.value = false;\n    scannerController.stop();\n    \n    // Ù…Ø³Ø­ Ø§Ù„Ø­Ø§Ù„Ø©\n    foundProduct.value = null;\n    showProductNotFound.value = false;\n    scannedBarcode.value = '';\n    \n    // ØªÙ… Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø± \"ØªÙ… Ø§Ù„Ø¥ØºÙ„Ø§Ù‚\" Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n  }\n\n  /// Ù…Ø³Ø­ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯\n  void clearNotFoundMessage() {\n    showProductNotFound.value = false;\n    scannedBarcode.value = '';\n  }\n\n  /// Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯\n  Future<void> searchByBarcode(String barcode) async {\n    if (barcode.isEmpty) {\n      Get.snackbar(\n        'âš ï¸ ØªÙ†Ø¨ÙŠÙ‡',\n        'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n        backgroundColor: Colors.orange.withOpacity(0.1),\n        colorText: Colors.orange[800],\n      );\n      return;\n    }\n\n    try {\n      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ\n      currentSearchBarcode.value = barcode;\n      \n      // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n      final QuerySnapshot result = await FirebaseFirestore.instance\n          .collection(FirebaseX.itemsCollection)\n          .where('appName', isEqualTo: FirebaseX.appName)\n          .where('productBarcode', isEqualTo: barcode)\n          .get();\n\n      if (result.docs.isNotEmpty) {\n        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†ØªØ¬Ø§Øª\n        searchResults.clear();\n        for (var doc in result.docs) {\n          try {\n            final item = ItemModel.fromMap(doc.data() as Map<String, dynamic>, doc.id);\n            searchResults.add(item);\n          } catch (e) {\n            debugPrint('Ø®Ø·Ø£ ÙÙŠ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬: $e');\n          }\n        }\n\n        Get.snackbar(\n          'âœ… Ù†Ø¬Ø­ Ø§Ù„Ø¨Ø­Ø«',\n          'ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${searchResults.length} Ù…Ù†ØªØ¬',\n          backgroundColor: Colors.green.withOpacity(0.1),\n          colorText: Colors.green[800],\n          icon: Icon(Icons.check_circle, color: Colors.green),\n        );\n      } else {\n        searchResults.clear();\n        Get.snackbar(\n          'âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬',\n          'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯',\n          backgroundColor: Colors.red.withOpacity(0.1),\n          colorText: Colors.red[800],\n          icon: Icon(Icons.search_off, color: Colors.red),\n        );\n      }\n    } catch (e) {\n      Get.snackbar(\n        'âŒ Ø®Ø·Ø£',\n        'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«: $e',\n        backgroundColor: Colors.red.withOpacity(0.1),\n        colorText: Colors.red[800],\n        icon: Icon(Icons.error, color: Colors.red),\n      );\n    }\n  }\n\n  /// Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©\n  void clearAllNotifications() {\n    Get.closeAllSnackbars();\n  }\n} "
        }
    ]
}