{
    "sourceFile": "lib/Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ /HomePage/controllers/brand_filter_controller.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752915343582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752915343582,
            "name": "Commit-0",
            "content": "import 'package:cloud_firestore/cloud_firestore.dart';\nimport 'package:flutter/material.dart';\nimport 'package:get/get.dart';\n\nimport '../../../Model/company_model.dart';\n\n/// ÙƒÙ†ØªØ±ÙˆÙ„Ø± Ø§Ù„Ø¨Ø­Ø« Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ ÙˆØ§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø©\nclass BrandFilterController extends GetxController with GetSingleTickerProviderStateMixin {\n  final FirebaseFirestore _firestore = FirebaseFirestore.instance;\n  \n  // Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…\n  final RxBool isBrandModeActive = false.obs;\n  final RxBool isLoading = false.obs;\n  \n  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª\n  final RxList<CompanyModel> companies = <CompanyModel>[].obs;\n  final RxList<CompanyProductModel> selectedCompanyProducts = <CompanyProductModel>[].obs;\n  \n  // Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©\n  final Rxn<CompanyModel> selectedCompany = Rxn<CompanyModel>();\n  final Rxn<CompanyProductModel> selectedCompanyProduct = Rxn<CompanyProductModel>();\n  \n  // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ø­ÙØ¸ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©\n  CompanyModel? _lastSelectedCompany;\n  CompanyProductModel? _lastSelectedCompanyProduct;\n  \n  // ÙƒÙ†ØªØ±ÙˆÙ„Ø±Ø§Øª Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†\n  late AnimationController animationController;\n  late Animation<double> slideAnimation;\n  late Animation<double> fadeAnimation;\n  late Animation<double> scaleAnimation;\n  \n  @override\n  void onInit() {\n    super.onInit();\n    _initAnimations();\n    loadCompanies();\n  }\n  \n  @override\n  void onClose() {\n    debugPrint('ğŸ”„ Ø¥ØºÙ„Ø§Ù‚ BrandFilterController...');\n    \n    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø¹Ù†Ø¯ Ø¥ØªÙ„Ø§Ù Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„Ø±\n    clearAllMemoryData();\n    \n    // Ø§Ù„ØªØ®Ù„Øµ Ù…Ù† Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†\n    animationController.dispose();\n    \n    debugPrint('âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ BrandFilterController ÙˆØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø°Ø§ÙƒØ±Ø©');\n    super.onClose();\n  }\n  \n  /// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†\n  void _initAnimations() {\n    animationController = AnimationController(\n      duration: const Duration(milliseconds: 800),\n      vsync: this,\n    );\n    \n    slideAnimation = Tween<double>(\n      begin: 0.0,\n      end: 1.0,\n    ).animate(CurvedAnimation(\n      parent: animationController,\n      curve: Curves.easeInOutCubic,\n    ));\n    \n    fadeAnimation = Tween<double>(\n      begin: 0.0,\n      end: 1.0,\n    ).animate(CurvedAnimation(\n      parent: animationController,\n      curve: const Interval(0.3, 1.0, curve: Curves.easeOut),\n    ));\n    \n    scaleAnimation = Tween<double>(\n      begin: 0.8,\n      end: 1.0,\n    ).animate(CurvedAnimation(\n      parent: animationController,\n      curve: const Interval(0.5, 1.0, curve: Curves.elasticOut),\n    ));\n  }\n  \n  /// ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª Ù…Ù† Firebase\n  Future<void> loadCompanies() async {\n    try {\n      isLoading.value = true;\n      \n      final QuerySnapshot snapshot = await _firestore\n          .collection('brand_companies')\n          .where('isActive', isEqualTo: true)\n          .orderBy('nameAr')\n          .get();\n      \n      final List<CompanyModel> loadedCompanies = [];\n      \n      for (final doc in snapshot.docs) {\n        final company = CompanyModel.fromFirestore(doc);\n        \n        // ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§Øª ÙƒÙ„ Ø´Ø±ÙƒØ©\n        final companyProducts = await _loadProductsForCompany(company.id);\n        \n        // Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø±ÙƒØ© Ù…Ø¹ Ù…Ù†ØªØ¬Ø§ØªÙ‡Ø§\n        final companyWithProducts = CompanyModel(\n          id: company.id,\n          nameAr: company.nameAr,\n          nameEn: company.nameEn,\n          logoUrl: company.logoUrl,\n          description: company.description,\n          country: company.country,\n          isActive: company.isActive,\n          createdBy: company.createdBy,\n          createdAt: company.createdAt,\n          updatedAt: company.updatedAt,\n          products: companyProducts,\n        );\n        \n        loadedCompanies.add(companyWithProducts);\n      }\n      \n      companies.value = loadedCompanies;\n      debugPrint('ØªÙ… ØªØ­Ù…ÙŠÙ„ ${companies.length} Ø´Ø±ÙƒØ© Ù„Ù„Ø¨Ø±Ø§Ù†Ø¯ ÙÙ„ØªØ±');\n    } catch (e) {\n      debugPrint('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª: $e');\n      Get.snackbar(\n        'Ø®Ø·Ø£',\n        'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª: ${e.toString()}',\n        backgroundColor: Colors.red.withOpacity(0.1),\n        colorText: Colors.red,\n      );\n    } finally {\n      isLoading.value = false;\n    }\n  }\n  \n  /// ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§Øª Ø´Ø±ÙƒØ© Ù…Ø¹ÙŠÙ†Ø©\n  Future<List<CompanyProductModel>> _loadProductsForCompany(String companyId) async {\n    try {\n      final QuerySnapshot snapshot = await _firestore\n          .collection('company_products')\n          .where('companyId', isEqualTo: companyId)\n          .where('isActive', isEqualTo: true)\n          .orderBy('nameAr')\n          .get();\n      \n      return snapshot.docs\n          .map((doc) => CompanyProductModel.fromFirestore(doc))\n          .toList();\n    } catch (e) {\n      debugPrint('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© $companyId: $e');\n      return [];\n    }\n  }\n  \n  /// ØªÙØ¹ÙŠÙ„ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ù…Ø¹ Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†\n  Future<void> activateBrandMode() async {\n    if (isBrandModeActive.value) return;\n    \n    debugPrint('ğŸ”„ ØªÙØ¹ÙŠÙ„ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯...');\n    debugPrint('ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø­Ù…Ù„Ø©: ${companies.length}');\n    debugPrint('ğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹: ${selectedCompany.value?.nameAr ?? 'Ù„Ø§ Ø´ÙŠØ¡'}');\n    debugPrint('ğŸ’¾ Ø¢Ø®Ø± Ø´Ø±ÙƒØ© Ù…Ø­ÙÙˆØ¸Ø©: ${_lastSelectedCompany?.nameAr ?? 'Ù„Ø§ Ø´ÙŠØ¡'}');\n    \n    isBrandModeActive.value = true;\n    \n    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ÙØ§Ø±ØºØ© Ø£Ùˆ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©\n    if (companies.isEmpty) {\n      debugPrint('ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ù…Ø³Ø­ Ø§Ù„Ø°Ø§ÙƒØ±Ø©...');\n      await loadCompanies();\n    } else if (_lastSelectedCompany != null) {\n      debugPrint('ğŸ”„ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚...');\n      selectedCompany.value = _lastSelectedCompany;\n      selectedCompanyProduct.value = _lastSelectedCompanyProduct;\n      selectedCompanyProducts.value = _lastSelectedCompany!.products;\n      \n      debugPrint('âœ… ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø´Ø±ÙƒØ©: ${_lastSelectedCompany!.nameAr}');\n      debugPrint('âœ… Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø¯Ø©: ${_lastSelectedCompany!.products.length}');\n    }\n    \n    await animationController.forward();\n    update(); // Ø¥Ø¶Ø§ÙØ© update Ù„ØªØ­Ø¯ÙŠØ« GetBuilder\n    \n    debugPrint('âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ø¨Ù†Ø¬Ø§Ø­');\n  }\n  \n  /// Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ù…Ø¹ Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†\n  Future<void> deactivateBrandMode() async {\n    if (!isBrandModeActive.value) return;\n    \n    debugPrint('ğŸ”„ Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯...');\n    \n    // Ø­ÙØ¸ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù‚Ø¨Ù„ Ù…Ø³Ø­Ù‡Ø§\n    _lastSelectedCompany = selectedCompany.value;\n    _lastSelectedCompanyProduct = selectedCompanyProduct.value;\n    \n    debugPrint('ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©: ${_lastSelectedCompany?.nameAr ?? 'Ù„Ø§ Ø´ÙŠØ¡'}');\n    debugPrint('ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø®ØªØ§Ø±: ${_lastSelectedCompanyProduct?.nameAr ?? 'Ù„Ø§ Ø´ÙŠØ¡'}');\n    \n    await animationController.reverse();\n    isBrandModeActive.value = false;\n    \n    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø¦ÙŠØ© ÙÙ‚Ø· (Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©)\n    selectedCompany.value = null;\n    selectedCompanyProduct.value = null;\n    selectedCompanyProducts.clear();\n    \n    update(); // Ø¥Ø¶Ø§ÙØ© update Ù„ØªØ­Ø¯ÙŠØ« GetBuilder\n    \n    debugPrint('âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ù…Ø¹ Ø­ÙØ¸ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª');\n  }\n  \n  /// Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ù…Ø¹ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©\n  Future<void> deactivateBrandModeAndClearMemory() async {\n    if (!isBrandModeActive.value) return;\n    \n    debugPrint('ğŸ”„ Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ù…Ø¹ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª...');\n    \n    await animationController.reverse();\n    isBrandModeActive.value = false;\n    \n    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©\n    clearAllMemoryData();\n    \n    update(); // Ø¥Ø¶Ø§ÙØ© update Ù„ØªØ­Ø¯ÙŠØ« GetBuilder\n    \n    debugPrint('âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…Ø· Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ù…Ø¹ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©');\n  }\n  \n  /// Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©\n  void clearAllMemoryData() {\n    debugPrint('ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©...');\n    \n    // Ù…Ø³Ø­ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©\n    selectedCompany.value = null;\n    selectedCompanyProduct.value = null;\n    selectedCompanyProducts.clear();\n    \n    // Ù…Ø³Ø­ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©\n    _lastSelectedCompany = null;\n    _lastSelectedCompanyProduct = null;\n    \n    // Ù…Ø³Ø­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø­Ù…Ù„Ø©\n    companies.clear();\n    \n    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„\n    isLoading.value = false;\n    \n    debugPrint('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©');\n    debugPrint('ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${companies.length}');\n    debugPrint('ğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©: ${selectedCompany.value?.nameAr ?? 'Ù„Ø§ Ø´ÙŠØ¡'}');\n    debugPrint('ğŸ’¾ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©: ${_lastSelectedCompany?.nameAr ?? 'Ù„Ø§ Ø´ÙŠØ¡'}');\n    \n    update();\n  }\n  \n  /// Ø§Ø®ØªÙŠØ§Ø± Ø´Ø±ÙƒØ©\n  void selectCompany(CompanyModel company) {\n    debugPrint('ğŸ¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø´Ø±ÙƒØ©: ${company.nameAr}');\n    debugPrint('   - Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙƒØ©: ${company.id}');\n    debugPrint('   - Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${company.products.length}');\n    \n    selectedCompany.value = company;\n    selectedCompanyProduct.value = null; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø®ØªØ§Ø±\n    selectedCompanyProducts.value = company.products;\n    \n    debugPrint('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± - Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©: ${selectedCompany.value?.nameAr}');\n    debugPrint('âœ… Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©: ${selectedCompanyProducts.length}');\n    debugPrint('ğŸ”„ ØªØ­Ø¯ÙŠØ« reactive variables - Obx Ø³ÙŠØ¹ÙŠØ¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹');\n  }\n  \n  /// Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø´Ø±ÙƒØ©\n  void selectCompanyProduct(CompanyProductModel product) {\n    selectedCompanyProduct.value = product;\n    debugPrint('ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†ØªØ¬: ${product.nameAr}');\n    debugPrint('ğŸ”„ ØªØ­Ø¯ÙŠØ« reactive variables - Obx Ø³ÙŠØ¹ÙŠØ¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹');\n  }\n  \n  /// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠ\n  String getFilterKey() {\n    if (!isBrandModeActive.value) return 'all';\n    \n    if (selectedCompanyProduct.value != null) {\n      // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ù…Ù†ØªØ¬ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø­Ø¯Ø¯\n      return 'original_product_${selectedCompanyProduct.value!.id}';\n    } else if (selectedCompany.value != null) {\n      // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©\n      return 'original_company_${selectedCompany.value!.id}';\n    }\n    \n    return 'original_brands';\n  }\n  \n  /// ÙˆØµÙ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠ\n  String getFilterDescription() {\n    if (!isBrandModeActive.value) return 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª';\n    \n    if (selectedCompanyProduct.value != null) {\n      return 'Ù…Ù†ØªØ¬Ø§Øª ${selectedCompanyProduct.value!.nameAr}';\n    } else if (selectedCompany.value != null) {\n      return 'Ù…Ù†ØªØ¬Ø§Øª Ø´Ø±ÙƒØ© ${selectedCompany.value!.nameAr}';\n    }\n    \n    return 'Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯';\n  }\n  \n  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ÙÙ„ØªØ± Ù†Ø´Ø·\n  bool get hasActiveFilter => isBrandModeActive.value && \n      (selectedCompany.value != null || selectedCompanyProduct.value != null);\n\n  /// Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª (Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù„Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø­Ø« Ø£Ø®Ø±Ù‰)\n  void clearAllSelections() {\n    debugPrint('ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯...');\n    \n    selectedCompany.value = null;\n    selectedCompanyProduct.value = null;\n    selectedCompanyProducts.clear();\n    \n    // Ù…Ø³Ø­ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø£ÙŠØ¶Ø§Ù‹\n    _lastSelectedCompany = null;\n    _lastSelectedCompanyProduct = null;\n    \n    debugPrint('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª');\n    update();\n  }\n} "
        }
    ]
}