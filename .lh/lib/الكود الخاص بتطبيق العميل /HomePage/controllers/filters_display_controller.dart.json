{
    "sourceFile": "lib/Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ /HomePage/controllers/filters_display_controller.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1753068346584,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753093449446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,15 +27,18 @@\n     try {\n       isLoading.value = true;\n       List<FilterItemModel> filters = [];\n \n-      // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©\n-      await _loadSubCategories(filters);\n+      // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹ÙŠØ©\n+      await _loadAllCategories(filters);\n \n       // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª\n       await _loadBrandFilters(filters);\n \n-      // 3. Ø®Ù„Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹\n+      // 3. Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ÙƒÙ„ ÙÙ„ØªØ± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n+      await _calculateProductCounts(filters);\n+\n+      // 4. Ø®Ù„Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹\n       filters.shuffle();\n \n       allFilters.assignAll(filters);\n \n@@ -46,37 +49,51 @@\n       isLoading.value = false;\n     }\n   }\n \n-  /// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©\n-  Future<void> _loadSubCategories(List<FilterItemModel> filters) async {\n+  /// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹ÙŠØ©\n+  Future<void> _loadAllCategories(List<FilterItemModel> filters) async {\n     try {\n       final QuerySnapshot<Map<String, dynamic>> snapshot =\n           await _firestore\n               .collection('categories')\n               .where('isActive', isEqualTo: true)\n-              .where('parentId', isNotEqualTo: null) // Ø§Ù„ÙØ±Ø¹ÙŠØ© ÙÙ‚Ø·\n               .get();\n \n       for (var doc in snapshot.docs) {\n         final category = CategoryModel.fromSnapshot(doc);\n \n-        filters.add(\n-          FilterItemModel(\n-            id: category.id,\n-            title: category.nameAr,\n-            subtitle: 'Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ',\n-            imageUrl: category.imageUrl,\n-            type: FilterType.subCategory,\n-            filterKey: 'sub_${category.id}',\n-            parentId: category.parentId,\n-          ),\n-        );\n+        if (category.isMainCategory) {\n+          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ\n+          filters.add(\n+            FilterItemModel(\n+              id: category.id,\n+              title: category.nameAr,\n+              subtitle: 'Ù‚Ø³Ù… Ø±Ø¦ÙŠØ³ÙŠ',\n+              imageUrl: category.imageUrl,\n+              type: FilterType.mainCategory,\n+              filterKey: 'main_${category.id}',\n+            ),\n+          );\n+        } else {\n+          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ\n+          filters.add(\n+            FilterItemModel(\n+              id: category.id,\n+              title: category.nameAr,\n+              subtitle: 'Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ',\n+              imageUrl: category.imageUrl,\n+              type: FilterType.subCategory,\n+              filterKey: 'sub_${category.id}',\n+              parentId: category.parentId,\n+            ),\n+          );\n+        }\n       }\n \n-      debugPrint('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${snapshot.docs.length} Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ');\n+      debugPrint('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${snapshot.docs.length} Ù‚Ø³Ù… (Ø±Ø¦ÙŠØ³ÙŠ ÙˆÙØ±Ø¹ÙŠ)');\n     } catch (e) {\n-      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©: $e');\n+      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…: $e');\n     }\n   }\n \n   /// ØªØ­Ù…ÙŠÙ„ ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ (Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª)\n@@ -137,8 +154,115 @@\n       debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯: $e');\n     }\n   }\n \n+  /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ÙƒÙ„ ÙÙ„ØªØ±\n+  Future<void> _calculateProductCounts(List<FilterItemModel> filters) async {\n+    try {\n+      for (int i = 0; i < filters.length; i++) {\n+        final filter = filters[i];\n+        int productCount = 0;\n+\n+        switch (filter.type) {\n+          case FilterType.mainCategory:\n+            productCount = await _countProductsForMainCategory(filter.id);\n+            break;\n+          case FilterType.subCategory:\n+            productCount = await _countProductsForSubCategory(filter.id);\n+            break;\n+          case FilterType.company:\n+            productCount = await _countProductsForCompany(filter.id);\n+            break;\n+          case FilterType.product:\n+            productCount = await _countProductsForProduct(filter.id);\n+            break;\n+        }\n+\n+        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙ„ØªØ± Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø¯\n+        filters[i] = FilterItemModel(\n+          id: filter.id,\n+          title: filter.title,\n+          subtitle: filter.subtitle,\n+          imageUrl: filter.imageUrl,\n+          type: filter.type,\n+          filterKey: filter.filterKey,\n+          parentId: filter.parentId,\n+          parentName: filter.parentName,\n+          productCount: productCount,\n+        );\n+      }\n+      debugPrint('âœ… ØªÙ… Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ±');\n+    } catch (e) {\n+      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: $e');\n+    }\n+  }\n+\n+  /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ\n+  Future<int> _countProductsForMainCategory(String categoryId) async {\n+    try {\n+      final result =\n+          await _firestore\n+              .collection('items')\n+              .where('mainCategoryId', isEqualTo: categoryId)\n+              .count()\n+              .get();\n+      return result.count ?? 0;\n+    } catch (e) {\n+      debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ $categoryId: $e');\n+      return 0;\n+    }\n+  }\n+\n+  /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ\n+  Future<int> _countProductsForSubCategory(String categoryId) async {\n+    try {\n+      final result =\n+          await _firestore\n+              .collection('items')\n+              .where('subCategoryId', isEqualTo: categoryId)\n+              .count()\n+              .get();\n+      return result.count ?? 0;\n+    } catch (e) {\n+      debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ $categoryId: $e');\n+      return 0;\n+    }\n+  }\n+\n+  /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ø´Ø±ÙƒØ©\n+  Future<int> _countProductsForCompany(String companyId) async {\n+    try {\n+      final result =\n+          await _firestore\n+              .collection('items')\n+              .where('itemCondition', isEqualTo: 'original')\n+              .where('originalCompanyId', isEqualTo: companyId)\n+              .count()\n+              .get();\n+      return result.count ?? 0;\n+    } catch (e) {\n+      debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© $companyId: $e');\n+      return 0;\n+    }\n+  }\n+\n+  /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ØµÙ„ÙŠ\n+  Future<int> _countProductsForProduct(String productId) async {\n+    try {\n+      final result =\n+          await _firestore\n+              .collection('items')\n+              .where('itemCondition', isEqualTo: 'original')\n+              .where('originalProductId', isEqualTo: productId)\n+              .count()\n+              .get();\n+      return result.count ?? 0;\n+    } catch (e) {\n+      debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ $productId: $e');\n+      return 0;\n+    }\n+  }\n+\n   /// Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±\n   void toggleFiltersVisibility() {\n     isVisible.value = !isVisible.value;\n     debugPrint('ğŸ”„ ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±: ${isVisible.value ? 'Ù…Ø±Ø¦ÙŠ' : 'Ù…Ø®ÙÙŠ'}');\n@@ -220,8 +344,9 @@\n }\n \n /// Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙÙ„Ø§ØªØ±\n enum FilterType {\n+  mainCategory, // Ù‚Ø³Ù… Ø±Ø¦ÙŠØ³ÙŠ\n   subCategory, // Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ\n   company, // Ø´Ø±ÙƒØ© Ù…ØµÙ†Ø¹Ø©\n   product, // Ù…Ù†ØªØ¬ Ù…Ù† Ø´Ø±ÙƒØ©\n }\n@@ -229,8 +354,10 @@\n /// Ø¥Ø¶Ø§ÙØ© extension Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆØµÙ Ù†ÙˆØ¹ Ø§Ù„ÙÙ„ØªØ±\n extension FilterTypeExtension on FilterType {\n   String get displayName {\n     switch (this) {\n+      case FilterType.mainCategory:\n+        return 'Ù‚Ø³Ù… Ø±Ø¦ÙŠØ³ÙŠ';\n       case FilterType.subCategory:\n         return 'Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ';\n       case FilterType.company:\n         return 'Ø´Ø±ÙƒØ© Ù…ØµÙ†Ø¹Ø©';\n@@ -240,8 +367,10 @@\n   }\n \n   IconData get icon {\n     switch (this) {\n+      case FilterType.mainCategory:\n+        return Icons.category_rounded;\n       case FilterType.subCategory:\n         return Icons.category_outlined;\n       case FilterType.company:\n         return Icons.business_outlined;\n@@ -251,8 +380,10 @@\n   }\n \n   Color get color {\n     switch (this) {\n+      case FilterType.mainCategory:\n+        return Colors.purple;\n       case FilterType.subCategory:\n         return Colors.blue;\n       case FilterType.company:\n         return Colors.green;\n"
                },
                {
                    "date": 1753096098478,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import 'package:get/get.dart';\n import 'package:cloud_firestore/cloud_firestore.dart';\n \n import '../../../Model/company_model.dart';\n+import '../../../XXX/xxx_firebase.dart';\n import 'enhanced_category_filter_controller.dart';\n \n /// ÙƒÙˆÙ†ØªØ±ÙˆÙ„Ø± Ù„Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¨Ø´ÙƒÙ„ Ù…Ø³Ø·Ø­\n class FiltersDisplayController extends GetxController {\n@@ -15,8 +16,15 @@\n \n   // Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø®ØªÙ„Ø·Ø©\n   final RxList<FilterItemModel> allFilters = <FilterItemModel>[].obs;\n \n+  // cache Ù„Ù†ØªØ§Ø¦Ø¬ Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡\n+  final Map<String, int> _productCountCache = {};\n+\n+  // ÙˆÙ‚Øª Ø§Ù†ØªÙ‡Ø§Ø¡ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù€ cache (5 Ø¯Ù‚Ø§Ø¦Ù‚)\n+  final Duration _cacheExpiry = Duration(minutes: 5);\n+  DateTime? _lastCacheUpdate;\n+\n   @override\n   void onInit() {\n     super.onInit();\n     loadAllFilters();\n@@ -27,23 +35,30 @@\n     try {\n       isLoading.value = true;\n       List<FilterItemModel> filters = [];\n \n-      // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹ÙŠØ©\n-      await _loadAllCategories(filters);\n+      // ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ± Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡\n+      await Future.wait([\n+        _loadAllCategories(filters),\n+        _loadBrandFilters(filters),\n+      ]);\n \n-      // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª\n-      await _loadBrandFilters(filters);\n+      // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ\n+      await _calculateProductCountsConcurrently(filters);\n \n-      // 3. Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ÙƒÙ„ ÙÙ„ØªØ± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n-      await _calculateProductCounts(filters);\n+      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª\n+      filters.removeWhere(\n+        (filter) => filter.productCount == null || filter.productCount! <= 0,\n+      );\n \n-      // 4. Ø®Ù„Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹\n+      // Ø®Ù„Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹\n       filters.shuffle();\n \n       allFilters.assignAll(filters);\n \n-      debugPrint('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${allFilters.length} ÙÙ„ØªØ± Ø¥Ø¬Ù…Ø§Ù„ÙŠ');\n+      debugPrint(\n+        'âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${allFilters.length} ÙÙ„ØªØ± Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø¨Ø¯ÙˆÙ† Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„ÙØ§Ø±ØºØ©)',\n+      );\n     } catch (e) {\n       debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙ„Ø§ØªØ±: $e');\n     } finally {\n       isLoading.value = false;\n@@ -154,115 +169,205 @@\n       debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯: $e');\n     }\n   }\n \n-  /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ÙƒÙ„ ÙÙ„ØªØ±\n-  Future<void> _calculateProductCounts(List<FilterItemModel> filters) async {\n+  /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ÙƒÙ„ ÙÙ„ØªØ± Ø¨Ø´ÙƒÙ„ Ù…ØªÙˆØ§Ø²ÙŠ (Ù…Ø­Ø³Ù† Ù„Ù„Ø£Ø¯Ø§Ø¡)\n+  Future<void> _calculateProductCountsConcurrently(\n+    List<FilterItemModel> filters,\n+  ) async {\n     try {\n-      for (int i = 0; i < filters.length; i++) {\n-        final filter = filters[i];\n-        int productCount = 0;\n+      // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ù‡Ø§Ù… Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù„Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠØ©\n+      const batchSize = 10; // Ù…Ø¹Ø§Ù„Ø¬Ø© 10 ÙÙ„Ø§ØªØ± ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©\n \n-        switch (filter.type) {\n-          case FilterType.mainCategory:\n-            productCount = await _countProductsForMainCategory(filter.id);\n-            break;\n-          case FilterType.subCategory:\n-            productCount = await _countProductsForSubCategory(filter.id);\n-            break;\n-          case FilterType.company:\n-            productCount = await _countProductsForCompany(filter.id);\n-            break;\n-          case FilterType.product:\n-            productCount = await _countProductsForProduct(filter.id);\n-            break;\n+      for (int i = 0; i < filters.length; i += batchSize) {\n+        final endIndex =\n+            (i + batchSize < filters.length) ? i + batchSize : filters.length;\n+        final batch = filters.sublist(i, endIndex);\n+\n+        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ\n+        final futures = batch.asMap().entries.map((entry) async {\n+          final filter = entry.value;\n+\n+          int productCount = 0;\n+          switch (filter.type) {\n+            case FilterType.mainCategory:\n+              productCount = await _countProductsForMainCategory(filter.id);\n+              break;\n+            case FilterType.subCategory:\n+              productCount = await _countProductsForSubCategory(filter.id);\n+              break;\n+            case FilterType.company:\n+              productCount = await _countProductsForCompany(filter.id);\n+              break;\n+            case FilterType.product:\n+              productCount = await _countProductsForProduct(filter.id);\n+              break;\n+          }\n+\n+          // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙ„ØªØ± Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø¯\n+          return FilterItemModel(\n+            id: filter.id,\n+            title: filter.title,\n+            subtitle: filter.subtitle,\n+            imageUrl: filter.imageUrl,\n+            type: filter.type,\n+            filterKey: filter.filterKey,\n+            parentId: filter.parentId,\n+            parentName: filter.parentName,\n+            productCount: productCount,\n+          );\n+        });\n+\n+        // Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©\n+        final updatedBatch = await Future.wait(futures);\n+        for (int j = 0; j < updatedBatch.length; j++) {\n+          filters[i + j] = updatedBatch[j];\n         }\n \n-        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙ„ØªØ± Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø¯\n-        filters[i] = FilterItemModel(\n-          id: filter.id,\n-          title: filter.title,\n-          subtitle: filter.subtitle,\n-          imageUrl: filter.imageUrl,\n-          type: filter.type,\n-          filterKey: filter.filterKey,\n-          parentId: filter.parentId,\n-          parentName: filter.parentName,\n-          productCount: productCount,\n-        );\n+        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ± Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n+        if (i + batchSize < filters.length) {\n+          await Future.delayed(Duration(milliseconds: 50));\n+        }\n       }\n-      debugPrint('âœ… ØªÙ… Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ±');\n+\n+      debugPrint('âœ… ØªÙ… Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ± Ø¨Ø´ÙƒÙ„ Ù…ØªÙˆØ§Ø²ÙŠ');\n     } catch (e) {\n-      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: $e');\n+      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠ: $e');\n     }\n   }\n \n   /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ\n   Future<int> _countProductsForMainCategory(String categoryId) async {\n+    final cacheKey = 'main_$categoryId';\n+\n+    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„Ù€ cache\n+    if (_isCacheValid() && _productCountCache.containsKey(cacheKey)) {\n+      return _productCountCache[cacheKey]!;\n+    }\n+\n     try {\n       final result =\n           await _firestore\n-              .collection('items')\n+              .collection(FirebaseX.itemsCollection)\n+              .where('appName', isEqualTo: FirebaseX.appName)\n               .where('mainCategoryId', isEqualTo: categoryId)\n               .count()\n               .get();\n-      return result.count ?? 0;\n+\n+      final count = result.count ?? 0;\n+      _productCountCache[cacheKey] = count; // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ù€ cache\n+      _updateCacheTimestamp();\n+\n+      return count;\n     } catch (e) {\n       debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ $categoryId: $e');\n       return 0;\n     }\n   }\n \n   /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ\n   Future<int> _countProductsForSubCategory(String categoryId) async {\n+    final cacheKey = 'sub_$categoryId';\n+\n+    if (_isCacheValid() && _productCountCache.containsKey(cacheKey)) {\n+      return _productCountCache[cacheKey]!;\n+    }\n+\n     try {\n       final result =\n           await _firestore\n-              .collection('items')\n+              .collection(FirebaseX.itemsCollection)\n+              .where('appName', isEqualTo: FirebaseX.appName)\n               .where('subCategoryId', isEqualTo: categoryId)\n               .count()\n               .get();\n-      return result.count ?? 0;\n+\n+      final count = result.count ?? 0;\n+      _productCountCache[cacheKey] = count;\n+      _updateCacheTimestamp();\n+\n+      return count;\n     } catch (e) {\n       debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ $categoryId: $e');\n       return 0;\n     }\n   }\n \n   /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ø´Ø±ÙƒØ©\n   Future<int> _countProductsForCompany(String companyId) async {\n+    final cacheKey = 'company_$companyId';\n+\n+    if (_isCacheValid() && _productCountCache.containsKey(cacheKey)) {\n+      return _productCountCache[cacheKey]!;\n+    }\n+\n     try {\n       final result =\n           await _firestore\n-              .collection('items')\n+              .collection(FirebaseX.itemsCollection)\n+              .where('appName', isEqualTo: FirebaseX.appName)\n               .where('itemCondition', isEqualTo: 'original')\n               .where('originalCompanyId', isEqualTo: companyId)\n               .count()\n               .get();\n-      return result.count ?? 0;\n+\n+      final count = result.count ?? 0;\n+      _productCountCache[cacheKey] = count;\n+      _updateCacheTimestamp();\n+\n+      return count;\n     } catch (e) {\n       debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© $companyId: $e');\n       return 0;\n     }\n   }\n \n   /// Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ØµÙ„ÙŠ\n   Future<int> _countProductsForProduct(String productId) async {\n+    final cacheKey = 'product_$productId';\n+\n+    if (_isCacheValid() && _productCountCache.containsKey(cacheKey)) {\n+      return _productCountCache[cacheKey]!;\n+    }\n+\n     try {\n       final result =\n           await _firestore\n-              .collection('items')\n+              .collection(FirebaseX.itemsCollection)\n+              .where('appName', isEqualTo: FirebaseX.appName)\n               .where('itemCondition', isEqualTo: 'original')\n               .where('originalProductId', isEqualTo: productId)\n               .count()\n               .get();\n-      return result.count ?? 0;\n+\n+      final count = result.count ?? 0;\n+      _productCountCache[cacheKey] = count;\n+      _updateCacheTimestamp();\n+\n+      return count;\n     } catch (e) {\n       debugPrint('Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ $productId: $e');\n       return 0;\n     }\n   }\n \n+  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù€ cache\n+  bool _isCacheValid() {\n+    if (_lastCacheUpdate == null) return false;\n+    return DateTime.now().difference(_lastCacheUpdate!) < _cacheExpiry;\n+  }\n+\n+  /// ØªØ­Ø¯ÙŠØ« ÙˆÙ‚Øª Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ù„Ù„Ù€ cache\n+  void _updateCacheTimestamp() {\n+    _lastCacheUpdate = DateTime.now();\n+  }\n+\n+  /// Ù…Ø³Ø­ Ø§Ù„Ù€ cache\n+  void _clearCache() {\n+    _productCountCache.clear();\n+    _lastCacheUpdate = null;\n+  }\n+\n   /// Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±\n   void toggleFiltersVisibility() {\n     isVisible.value = !isVisible.value;\n     debugPrint('ğŸ”„ ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±: ${isVisible.value ? 'Ù…Ø±Ø¦ÙŠ' : 'Ù…Ø®ÙÙŠ'}');\n@@ -279,8 +384,9 @@\n   }\n \n   /// Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙ„Ø§ØªØ±\n   Future<void> refreshFilters() async {\n+    _clearCache(); // Ù…Ø³Ø­ Ø§Ù„Ù€ cache Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„\n     await loadAllFilters();\n   }\n \n   /// Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙÙ„Ø§ØªØ±\n"
                },
                {
                    "date": 1753149650098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -515,9 +515,9 @@\n \n       // Ø·Ø¨Ø§Ø¹Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ØªØ£ÙƒØ¯\n       for (int i = 0; i < randomProducts.length && i < 3; i++) {\n         debugPrint(\n-          'ï¿½ Ù…Ù†ØªØ¬ ${i + 1}: ${randomProducts[i]['name']} - Ø§Ù„Ø³Ø¹Ø±: ${randomProducts[i]['price']}',\n+          '\udce6 Ù…Ù†ØªØ¬ ${i + 1}: ${randomProducts[i]['name']} - Ø§Ù„Ø³Ø¹Ø±: ${randomProducts[i]['price']}',\n         );\n       }\n \n       debugPrint('ğŸ¯ Ø§Ù†ØªÙ‡Ø§Ø¡ _loadRandomProducts Ø¨Ù†Ø¬Ø§Ø­');\n"
                },
                {
                    "date": 1753150374087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -515,9 +515,9 @@\n \n       // Ø·Ø¨Ø§Ø¹Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ØªØ£ÙƒØ¯\n       for (int i = 0; i < randomProducts.length && i < 3; i++) {\n         debugPrint(\n-          'ï¿½ Ù…Ù†ØªØ¬ ${i + 1}: ${randomProducts[i]['name']} - Ø§Ù„Ø³Ø¹Ø±: ${randomProducts[i]['price']}',\n+          '\udce6 Ù…Ù†ØªØ¬ ${i + 1}: ${randomProducts[i]['name']} - Ø§Ù„Ø³Ø¹Ø±: ${randomProducts[i]['price']}',\n         );\n       }\n \n       debugPrint('ğŸ¯ Ø§Ù†ØªÙ‡Ø§Ø¡ _loadRandomProducts Ø¨Ù†Ø¬Ø§Ø­');\n"
                }
            ],
            "date": 1753068346584,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:get/get.dart';\nimport 'package:cloud_firestore/cloud_firestore.dart';\n\nimport '../../../Model/company_model.dart';\nimport 'enhanced_category_filter_controller.dart';\n\n/// ÙƒÙˆÙ†ØªØ±ÙˆÙ„Ø± Ù„Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¨Ø´ÙƒÙ„ Ù…Ø³Ø·Ø­\nclass FiltersDisplayController extends GetxController {\n  final FirebaseFirestore _firestore = FirebaseFirestore.instance;\n\n  // Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„\n  final RxBool isLoading = false.obs;\n  final RxBool isVisible = false.obs;\n\n  // Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø®ØªÙ„Ø·Ø©\n  final RxList<FilterItemModel> allFilters = <FilterItemModel>[].obs;\n\n  @override\n  void onInit() {\n    super.onInit();\n    loadAllFilters();\n  }\n\n  /// ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙ„Ø§ØªØ± ÙˆØ®Ù„Ø·Ù‡Ø§ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹\n  Future<void> loadAllFilters() async {\n    try {\n      isLoading.value = true;\n      List<FilterItemModel> filters = [];\n\n      // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©\n      await _loadSubCategories(filters);\n\n      // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª\n      await _loadBrandFilters(filters);\n\n      // 3. Ø®Ù„Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹\n      filters.shuffle();\n\n      allFilters.assignAll(filters);\n\n      debugPrint('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${allFilters.length} ÙÙ„ØªØ± Ø¥Ø¬Ù…Ø§Ù„ÙŠ');\n    } catch (e) {\n      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙ„Ø§ØªØ±: $e');\n    } finally {\n      isLoading.value = false;\n    }\n  }\n\n  /// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©\n  Future<void> _loadSubCategories(List<FilterItemModel> filters) async {\n    try {\n      final QuerySnapshot<Map<String, dynamic>> snapshot =\n          await _firestore\n              .collection('categories')\n              .where('isActive', isEqualTo: true)\n              .where('parentId', isNotEqualTo: null) // Ø§Ù„ÙØ±Ø¹ÙŠØ© ÙÙ‚Ø·\n              .get();\n\n      for (var doc in snapshot.docs) {\n        final category = CategoryModel.fromSnapshot(doc);\n\n        filters.add(\n          FilterItemModel(\n            id: category.id,\n            title: category.nameAr,\n            subtitle: 'Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ',\n            imageUrl: category.imageUrl,\n            type: FilterType.subCategory,\n            filterKey: 'sub_${category.id}',\n            parentId: category.parentId,\n          ),\n        );\n      }\n\n      debugPrint('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${snapshot.docs.length} Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ');\n    } catch (e) {\n      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©: $e');\n    }\n  }\n\n  /// ØªØ­Ù…ÙŠÙ„ ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ (Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª)\n  Future<void> _loadBrandFilters(List<FilterItemModel> filters) async {\n    try {\n      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª\n      final QuerySnapshot companiesSnapshot =\n          await _firestore\n              .collection('brand_companies')\n              .where('isActive', isEqualTo: true)\n              .get();\n\n      for (var companyDoc in companiesSnapshot.docs) {\n        final company = CompanyModel.fromFirestore(companyDoc);\n\n        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø±ÙƒØ© ÙƒÙÙ„ØªØ±\n        filters.add(\n          FilterItemModel(\n            id: company.id,\n            title: company.nameAr,\n            subtitle: 'Ø´Ø±ÙƒØ© Ù…ØµÙ†Ø¹Ø©',\n            imageUrl: company.logoUrl,\n            type: FilterType.company,\n            filterKey: 'original_company_${company.id}',\n          ),\n        );\n\n        // ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©\n        final QuerySnapshot productsSnapshot =\n            await _firestore\n                .collection('company_products')\n                .where('companyId', isEqualTo: company.id)\n                .where('isActive', isEqualTo: true)\n                .get();\n\n        for (var productDoc in productsSnapshot.docs) {\n          final product = CompanyProductModel.fromFirestore(productDoc);\n\n          filters.add(\n            FilterItemModel(\n              id: product.id,\n              title: product.nameAr,\n              subtitle: 'Ù…Ù†ØªØ¬ ${company.nameAr}',\n              imageUrl: product.imageUrl,\n              type: FilterType.product,\n              filterKey: 'original_product_${product.id}',\n              parentId: company.id,\n              parentName: company.nameAr,\n            ),\n          );\n        }\n      }\n\n      debugPrint(\n        'âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${companiesSnapshot.docs.length} Ø´Ø±ÙƒØ© Ù…Ø¹ Ù…Ù†ØªØ¬Ø§ØªÙ‡Ø§',\n      );\n    } catch (e) {\n      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯: $e');\n    }\n  }\n\n  /// Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±\n  void toggleFiltersVisibility() {\n    isVisible.value = !isVisible.value;\n    debugPrint('ğŸ”„ ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±: ${isVisible.value ? 'Ù…Ø±Ø¦ÙŠ' : 'Ù…Ø®ÙÙŠ'}');\n\n    if (isVisible.value && allFilters.isEmpty) {\n      loadAllFilters();\n    }\n  }\n\n  /// Ø¥Ø®ÙØ§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±\n  void hideFilters() {\n    isVisible.value = false;\n    debugPrint('ğŸ”„ Ø¥Ø®ÙØ§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„ÙÙ„Ø§ØªØ±');\n  }\n\n  /// Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙ„Ø§ØªØ±\n  Future<void> refreshFilters() async {\n    await loadAllFilters();\n  }\n\n  /// Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙÙ„Ø§ØªØ±\n  List<FilterItemModel> searchFilters(String query) {\n    if (query.isEmpty) return allFilters;\n\n    return allFilters\n        .where(\n          (filter) =>\n              filter.title.toLowerCase().contains(query.toLowerCase()) ||\n              filter.subtitle.toLowerCase().contains(query.toLowerCase()),\n        )\n        .toList();\n  }\n\n  /// Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙÙ„ØªØ±\n  List<FilterItemModel> getFiltersByType(FilterType type) {\n    return allFilters.where((filter) => filter.type == type).toList();\n  }\n}\n\n/// Ù†Ù…ÙˆØ°Ø¬ Ø¹Ù†ØµØ± Ø§Ù„ÙÙ„ØªØ±\nclass FilterItemModel {\n  final String id;\n  final String title;\n  final String subtitle;\n  final String? imageUrl;\n  final FilterType type;\n  final String filterKey;\n  final String? parentId;\n  final String? parentName;\n  final int? productCount; // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n\n  FilterItemModel({\n    required this.id,\n    required this.title,\n    required this.subtitle,\n    this.imageUrl,\n    required this.type,\n    required this.filterKey,\n    this.parentId,\n    this.parentName,\n    this.productCount,\n  });\n\n  @override\n  String toString() {\n    return 'FilterItemModel(id: $id, title: $title, type: $type, filterKey: $filterKey, productCount: $productCount)';\n  }\n\n  @override\n  bool operator ==(Object other) {\n    if (identical(this, other)) return true;\n    return other is FilterItemModel && other.id == id && other.type == type;\n  }\n\n  @override\n  int get hashCode {\n    return id.hashCode ^ type.hashCode;\n  }\n}\n\n/// Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙÙ„Ø§ØªØ±\nenum FilterType {\n  subCategory, // Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ\n  company, // Ø´Ø±ÙƒØ© Ù…ØµÙ†Ø¹Ø©\n  product, // Ù…Ù†ØªØ¬ Ù…Ù† Ø´Ø±ÙƒØ©\n}\n\n/// Ø¥Ø¶Ø§ÙØ© extension Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆØµÙ Ù†ÙˆØ¹ Ø§Ù„ÙÙ„ØªØ±\nextension FilterTypeExtension on FilterType {\n  String get displayName {\n    switch (this) {\n      case FilterType.subCategory:\n        return 'Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ';\n      case FilterType.company:\n        return 'Ø´Ø±ÙƒØ© Ù…ØµÙ†Ø¹Ø©';\n      case FilterType.product:\n        return 'Ù…Ù†ØªØ¬ Ø£ØµÙ„ÙŠ';\n    }\n  }\n\n  IconData get icon {\n    switch (this) {\n      case FilterType.subCategory:\n        return Icons.category_outlined;\n      case FilterType.company:\n        return Icons.business_outlined;\n      case FilterType.product:\n        return Icons.inventory_2_outlined;\n    }\n  }\n\n  Color get color {\n    switch (this) {\n      case FilterType.subCategory:\n        return Colors.blue;\n      case FilterType.company:\n        return Colors.green;\n      case FilterType.product:\n        return Colors.orange;\n    }\n  }\n}\n"
        }
    ]
}