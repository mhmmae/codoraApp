{
    "sourceFile": "lib/الكود الخاص بتطبيق العميل /HomePage/widgets/filter_status_indicator.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752859416408,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752859416408,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:get/get.dart';\nimport '../controllers/brand_filter_controller.dart';\nimport '../controllers/barcode_filter_controller.dart';\n\nclass FilterStatusIndicator extends StatelessWidget {\n  const FilterStatusIndicator({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    final brandCtrl = Get.find<BrandFilterController>();\n    final barcodeCtrl = Get.find<BarcodeFilterController>();\n    final theme = Theme.of(context);\n\n    return Obx(() {\n      final bool hasBrandFilter = brandCtrl.isBrandModeActive.value;\n      final bool hasBarcodeFilter = barcodeCtrl.hasActiveFilter;\n      final bool hasAnyFilter = hasBrandFilter || hasBarcodeFilter;\n\n      if (!hasAnyFilter) return const SizedBox.shrink();\n\n      return AnimatedContainer(\n        duration: const Duration(milliseconds: 300),\n        margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),\n        child: Material(\n          elevation: 4,\n          borderRadius: BorderRadius.circular(16),\n          child: Container(\n            padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),\n            decoration: BoxDecoration(\n              borderRadius: BorderRadius.circular(16),\n              gradient: LinearGradient(\n                colors: [\n                  theme.primaryColor.withValues(alpha: 0.1),\n                  theme.primaryColor.withValues(alpha: 0.05),\n                ],\n              ),\n              border: Border.all(\n                color: theme.primaryColor.withValues(alpha: 0.3),\n                width: 1,\n              ),\n            ),\n            child: Row(\n              children: [\n                // أيقونة الحالة\n                Container(\n                  padding: const EdgeInsets.all(6),\n                  decoration: BoxDecoration(\n                    color: theme.primaryColor.withValues(alpha: 0.2),\n                    borderRadius: BorderRadius.circular(8),\n                  ),\n                  child: Icon(\n                    hasBarcodeFilter ? Icons.qr_code_scanner : Icons.business,\n                    color: theme.primaryColor,\n                    size: 18,\n                  ),\n                ),\n                \n                const SizedBox(width: 12),\n                \n                // النص التوضيحي\n                Expanded(\n                  child: Text(\n                    _getFilterDescription(hasBarcodeFilter, hasBrandFilter, barcodeCtrl, brandCtrl),\n                    style: TextStyle(\n                      color: theme.primaryColor,\n                      fontWeight: FontWeight.w600,\n                      fontSize: 14,\n                    ),\n                  ),\n                ),\n                \n                // زر الإلغاء\n                InkWell(\n                  onTap: () {\n                    if (hasBarcodeFilter) {\n                      barcodeCtrl.clearCurrentBarcode();\n                    }\n                    if (hasBrandFilter) {\n                      brandCtrl.deactivateBrandModeAndClearMemory();\n                    }\n                  },\n                  borderRadius: BorderRadius.circular(16),\n                  child: Container(\n                    padding: const EdgeInsets.all(4),\n                    child: Icon(\n                      Icons.close,\n                      color: theme.primaryColor,\n                      size: 20,\n                    ),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        ),\n      );\n    });\n  }\n\n  String _getFilterDescription(\n    bool hasBarcodeFilter,\n    bool hasBrandFilter,\n    BarcodeFilterController barcodeCtrl,\n    BrandFilterController brandCtrl,\n  ) {\n    if (hasBarcodeFilter) {\n      return 'البحث بالباركود: ${barcodeCtrl.currentSearchBarcode.value}';\n    }\n    if (hasBrandFilter) {\n      final company = brandCtrl.selectedCompany.value;\n      final product = brandCtrl.selectedCompanyProduct.value;\n      \n      if (product != null) {\n        return 'منتج: ${product.nameAr}';\n      } else if (company != null) {\n        return 'شركة: ${company.nameAr}';\n      } else {\n        return 'فلتر البراند نشط';\n      }\n    }\n    return 'فلتر نشط';\n  }\n}\n"
        }
    ]
}