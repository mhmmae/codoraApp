{
    "sourceFile": "lib/الكود الخاص بتطبيق العميل /HomePage/widgets/product_details_dialog.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752919676713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752919676713,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:flutter/services.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:get/get.dart';\nimport 'package:cached_network_image/cached_network_image.dart';\n\nimport '../../../Model/model_item.dart';\n\n/// ويدجت تفاصيل المنتج الاحترافية\nclass ProductDetailsDialog extends StatelessWidget {\n  final ItemModel product;\n\n  const ProductDetailsDialog({\n    super.key,\n    required this.product,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final theme = Theme.of(context);\n\n    return Dialog(\n      backgroundColor: Colors.transparent,\n      insetPadding: EdgeInsets.all(16.r),\n      child: Container(\n        constraints: BoxConstraints(\n          maxHeight: MediaQuery.of(context).size.height * 0.8,\n          maxWidth: MediaQuery.of(context).size.width * 0.95,\n        ),\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(20.r),\n          boxShadow: [\n            BoxShadow(\n              color: Colors.black.withValues(alpha: 0.15),\n              blurRadius: 20.r,\n              offset: Offset(0, 10.h),\n            ),\n          ],\n        ),\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            // Header\n            _buildHeader(theme),\n            \n            // محتوى المنتج\n            Flexible(\n              child: SingleChildScrollView(\n                padding: EdgeInsets.all(20.r),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.start,\n                  children: [\n                    // صورة المنتج\n                    _buildProductImage(),\n                    \n                    SizedBox(height: 20.h),\n                    \n                    // معلومات أساسية\n                    _buildBasicInfo(theme),\n                    \n                    SizedBox(height: 16.h),\n                    \n                    // تفاصيل إضافية\n                    _buildAdditionalDetails(theme),\n                    \n                    SizedBox(height: 20.h),\n                    \n                    // أزرار العمل\n                    _buildActionButtons(theme),\n                  ],\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  /// Header العلوي\n  Widget _buildHeader(ThemeData theme) {\n    return Container(\n      padding: EdgeInsets.all(20.r),\n      decoration: BoxDecoration(\n        gradient: LinearGradient(\n          colors: [\n            theme.primaryColor,\n            theme.primaryColor.withValues(alpha: 0.8),\n          ],\n          begin: Alignment.topLeft,\n          end: Alignment.bottomRight,\n        ),\n        borderRadius: BorderRadius.only(\n          topLeft: Radius.circular(20.r),\n          topRight: Radius.circular(20.r),\n        ),\n      ),\n      child: Row(\n        children: [\n          Container(\n            padding: EdgeInsets.all(8.r),\n            decoration: BoxDecoration(\n              color: Colors.white.withValues(alpha: 0.2),\n              borderRadius: BorderRadius.circular(10.r),\n            ),\n            child: Icon(\n              Icons.inventory_2,\n              color: Colors.white,\n              size: 24.sp,\n            ),\n          ),\n          SizedBox(width: 12.w),\n          Expanded(\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.start,\n              children: [\n                Text(\n                  'تفاصيل المنتج',\n                  style: TextStyle(\n                    color: Colors.white,\n                    fontSize: 18.sp,\n                    fontWeight: FontWeight.bold,\n                  ),\n                ),\n                SizedBox(height: 2.h),\n                Text(\n                  'المعلومات الكاملة للمنتج',\n                  style: TextStyle(\n                    color: Colors.white.withValues(alpha: 0.9),\n                    fontSize: 12.sp,\n                  ),\n                ),\n              ],\n            ),\n          ),\n          IconButton(\n            onPressed: () {\n              HapticFeedback.lightImpact();\n              Get.back();\n            },\n            icon: Icon(\n              Icons.close,\n              color: Colors.white,\n              size: 24.sp,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  /// صورة المنتج\n  Widget _buildProductImage() {\n    return Center(\n      child: Container(\n        width: 200.w,\n        height: 200.h,\n        decoration: BoxDecoration(\n          borderRadius: BorderRadius.circular(16.r),\n          boxShadow: [\n            BoxShadow(\n              color: Colors.grey.withValues(alpha: 0.3),\n              blurRadius: 15.r,\n              offset: Offset(0, 8.h),\n            ),\n          ],\n        ),\n        child: ClipRRect(\n          borderRadius: BorderRadius.circular(16.r),\n          child: product.imageUrl?.isNotEmpty == true\n              ? CachedNetworkImage(\n                  imageUrl: product.imageUrl!,\n                  fit: BoxFit.cover,\n                  placeholder: (context, url) => Container(\n                    color: Colors.grey.shade100,\n                    child: Center(\n                      child: CircularProgressIndicator(strokeWidth: 2.w),\n                    ),\n                  ),\n                  errorWidget: (context, url, error) => Container(\n                    color: Colors.grey.shade100,\n                    child: Icon(\n                      Icons.inventory_2,\n                      color: Colors.grey,\n                      size: 60.sp,\n                    ),\n                  ),\n                )\n              : Container(\n                  color: Colors.grey.shade100,\n                  child: Icon(\n                    Icons.inventory_2,\n                    color: Colors.grey,\n                    size: 60.sp,\n                  ),\n                ),\n        ),\n      ),\n    );\n  }\n\n  /// المعلومات الأساسية\n  Widget _buildBasicInfo(ThemeData theme) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      children: [\n        // اسم المنتج\n        Text(\n          product.name.isNotEmpty ? product.name : 'غير محدد',\n          style: TextStyle(\n            fontSize: 20.sp,\n            fontWeight: FontWeight.bold,\n            color: theme.primaryColor,\n          ),\n        ),\n        \n        SizedBox(height: 12.h),\n        \n        // السعر\n        if (product.price > 0) ...[\n          _buildInfoRow(\n            icon: Icons.attach_money,\n            label: 'السعر',\n            value: '${product.price} ر.س',\n            color: Colors.green,\n          ),\n          SizedBox(height: 8.h),\n        ],\n        \n        // الباركود\n        _buildInfoRow(\n          icon: Icons.qr_code,\n          label: 'الباركود',\n          value: (product.productBarcode?.isNotEmpty == true) ? product.productBarcode! : 'غير متوفر',\n          color: theme.primaryColor,\n          isCopyable: true,\n        ),\n      ],\n    );\n  }\n\n  /// التفاصيل الإضافية\n  Widget _buildAdditionalDetails(ThemeData theme) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      children: [\n        Text(\n          'تفاصيل إضافية',\n          style: TextStyle(\n            fontSize: 16.sp,\n            fontWeight: FontWeight.bold,\n            color: theme.primaryColor,\n          ),\n        ),\n        \n        SizedBox(height: 12.h),\n        \n        // الوصف\n        if (product.description?.isNotEmpty == true) ...[\n          _buildInfoSection(\n            title: 'الوصف',\n            content: product.description!,\n            icon: Icons.description,\n          ),\n          SizedBox(height: 12.h),\n        ],\n        \n        // معرف المنتج\n        _buildInfoRow(\n          icon: Icons.tag,\n          label: 'معرف المنتج',\n          value: product.id,\n          color: Colors.grey.shade600,\n          isSmall: true,\n        ),\n      ],\n    );\n  }\n\n  /// صف معلومات\n  Widget _buildInfoRow({\n    required IconData icon,\n    required String label,\n    required String value,\n    required Color color,\n    bool isCopyable = false,\n    bool isSmall = false,\n  }) {\n    return Container(\n      padding: EdgeInsets.all(12.r),\n      decoration: BoxDecoration(\n        color: color.withValues(alpha: 0.1),\n        borderRadius: BorderRadius.circular(10.r),\n        border: Border.all(\n          color: color.withValues(alpha: 0.3),\n          width: 1.w,\n        ),\n      ),\n      child: Row(\n        children: [\n          Icon(\n            icon,\n            color: color,\n            size: isSmall ? 16.sp : 20.sp,\n          ),\n          SizedBox(width: 12.w),\n          Column(\n            crossAxisAlignment: CrossAxisAlignment.start,\n            children: [\n              Text(\n                label,\n                style: TextStyle(\n                  fontSize: isSmall ? 10.sp : 12.sp,\n                  color: Colors.grey.shade600,\n                ),\n              ),\n              SizedBox(height: 2.h),\n              Text(\n                value,\n                style: TextStyle(\n                  fontSize: isSmall ? 12.sp : 14.sp,\n                  fontWeight: FontWeight.bold,\n                  color: color,\n                ),\n              ),\n            ],\n          ),\n          if (isCopyable) ...[\n            const Spacer(),\n            IconButton(\n              onPressed: () {\n                Clipboard.setData(ClipboardData(text: value));\n                HapticFeedback.selectionClick();\n                Get.snackbar(\n                  'تم النسخ',\n                  'تم نسخ $label إلى الحافظة',\n                  snackPosition: SnackPosition.TOP,\n                  backgroundColor: Colors.green.withValues(alpha: 0.8),\n                  colorText: Colors.white,\n                  duration: const Duration(seconds: 2),\n                );\n              },\n              icon: Icon(\n                Icons.copy,\n                color: color,\n                size: 16.sp,\n              ),\n            ),\n          ],\n        ],\n      ),\n    );\n  }\n\n  /// قسم معلومات\n  Widget _buildInfoSection({\n    required String title,\n    required String content,\n    required IconData icon,\n  }) {\n    return Container(\n      width: double.infinity,\n      padding: EdgeInsets.all(12.r),\n      decoration: BoxDecoration(\n        color: Colors.grey.shade50,\n        borderRadius: BorderRadius.circular(10.r),\n        border: Border.all(\n          color: Colors.grey.shade300,\n          width: 1.w,\n        ),\n      ),\n      child: Column(\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          Row(\n            children: [\n              Icon(\n                icon,\n                color: Colors.grey.shade600,\n                size: 16.sp,\n              ),\n              SizedBox(width: 8.w),\n              Text(\n                title,\n                style: TextStyle(\n                  fontSize: 12.sp,\n                  fontWeight: FontWeight.bold,\n                  color: Colors.grey.shade600,\n                ),\n              ),\n            ],\n          ),\n          SizedBox(height: 8.h),\n          Text(\n            content,\n            style: TextStyle(\n              fontSize: 14.sp,\n              color: Colors.grey.shade800,\n              height: 1.4,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  /// أزرار العمل\n  Widget _buildActionButtons(ThemeData theme) {\n    return Row(\n      children: [\n        Expanded(\n          child: ElevatedButton(\n            onPressed: () {\n              HapticFeedback.lightImpact();\n              Get.back();\n            },\n            style: ElevatedButton.styleFrom(\n              backgroundColor: Colors.grey.shade100,\n              foregroundColor: Colors.grey.shade700,\n              elevation: 0,\n              padding: EdgeInsets.symmetric(vertical: 12.h),\n              shape: RoundedRectangleBorder(\n                borderRadius: BorderRadius.circular(10.r),\n              ),\n            ),\n            child: Text(\n              'إغلاق',\n              style: TextStyle(\n                fontSize: 14.sp,\n                fontWeight: FontWeight.bold,\n              ),\n            ),\n          ),\n        ),\n        SizedBox(width: 12.w),\n        Expanded(\n          flex: 2,\n          child: ElevatedButton(\n            onPressed: () {\n              HapticFeedback.mediumImpact();\n              // يمكن إضافة منطق إضافة المنتج للسلة أو المفضلة\n              Get.snackbar(\n                '✅ تم',\n                'يمكن إضافة منطق إضافي هنا',\n                backgroundColor: theme.primaryColor.withValues(alpha: 0.1),\n                colorText: theme.primaryColor,\n                duration: const Duration(seconds: 2),\n              );\n            },\n            style: ElevatedButton.styleFrom(\n              backgroundColor: theme.primaryColor,\n              foregroundColor: Colors.white,\n              elevation: 2,\n              padding: EdgeInsets.symmetric(vertical: 12.h),\n              shape: RoundedRectangleBorder(\n                borderRadius: BorderRadius.circular(10.r),\n              ),\n            ),\n            child: Row(\n              mainAxisAlignment: MainAxisAlignment.center,\n              children: [\n                Icon(\n                  Icons.add_shopping_cart,\n                  size: 18.sp,\n                ),\n                SizedBox(width: 8.w),\n                Text(\n                  'إضافة للسلة',\n                  style: TextStyle(\n                    fontSize: 14.sp,\n                    fontWeight: FontWeight.bold,\n                  ),\n                ),\n              ],\n            ),\n          ),\n        ),\n      ],\n    );\n  }\n\n  /// عرض نافذة تفاصيل المنتج\n  static void show(ItemModel product) {\n    Get.dialog(\n      ProductDetailsDialog(product: product),\n      barrierDismissible: true,\n    );\n  }\n}\n"
        }
    ]
}