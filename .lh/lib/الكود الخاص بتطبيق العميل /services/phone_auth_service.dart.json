{
    "sourceFile": "lib/Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ /services/phone_auth_service.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1752751503159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752798050011,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,18 @@\n   final RxString _currentVerificationId = ''.obs;\n   final RxString _currentPhoneNumber = ''.obs;\n   final RxInt _resendToken = 0.obs;\n \n+  // ===================== Test Phone Numbers Support =====================\n+  static const Map<String, String> _testPhoneNumbers = {\n+    '+9647803346793': '123456', // Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø°ÙŠ Ø°ÙƒØ±ØªÙ‡\n+    '+1234567890': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙÙŠ\n+    '+966500000000': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø¹ÙˆØ¯ÙŠ\n+    '+201234567890': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ù…ØµØ±ÙŠ\n+    '+962791234567': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ\n+    // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©\n+  };\n+\n   // Getters\n   bool get isLoading => _isLoading.value;\n   String get verificationId => _currentVerificationId.value;\n   String get phoneNumber => _currentPhoneNumber.value;\n@@ -52,11 +62,36 @@\n \n       ErrorTracker.logEvent(\n         event: 'Starting phone verification',\n         location: 'PhoneAuthService.sendVerificationCode',\n-        data: {'phone': phoneNumber, 'platform': Platform.operatingSystem},\n+        data: {\n+          'phone': phoneNumber,\n+          'platform': Platform.operatingSystem,\n+          'is_test_number': _isTestPhoneNumber(phoneNumber),\n+        },\n       );\n \n+      // Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©ØŒ Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²\n+      if (_isTestPhoneNumber(phoneNumber)) {\n+        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ø§Ù„Ø´Ø¨ÙƒØ©\n+        await Future.delayed(const Duration(seconds: 2));\n+\n+        // ØªØ¹ÙŠÙŠÙ† verification ID ÙˆÙ‡Ù…ÙŠ\n+        _currentVerificationId.value =\n+            'test_verification_id_${DateTime.now().millisecondsSinceEpoch}';\n+\n+        ErrorTracker.logSuccess(\n+          operation: 'Test verification code sent',\n+          location: 'PhoneAuthService.sendVerificationCode',\n+          data: {'phone': phoneNumber, 'test_code': _getTestCode(phoneNumber)},\n+        );\n+\n+        return PhoneAuthResult.success(\n+          type: PhoneAuthResultType.codeSent,\n+          verificationId: _currentVerificationId.value,\n+        );\n+      }\n+\n       final Completer<PhoneAuthResult> completer = Completer();\n \n       await _auth.verifyPhoneNumber(\n         phoneNumber: phoneNumber,\n@@ -166,11 +201,50 @@\n \n       ErrorTracker.logEvent(\n         event: 'Verifying SMS code',\n         location: 'PhoneAuthService.verifyCode',\n-        data: {'code_length': smsCode.length},\n+        data: {\n+          'code_length': smsCode.length,\n+          'phone_number': _currentPhoneNumber.value,\n+          'is_test_number': _isTestPhoneNumber(_currentPhoneNumber.value),\n+        },\n       );\n \n+      // Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹\n+      if (_isTestPhoneNumber(_currentPhoneNumber.value)) {\n+        final expectedCode = _getTestCode(_currentPhoneNumber.value);\n+        if (smsCode == expectedCode) {\n+          // Ø¥Ù†Ø´Ø§Ø¡ credential ÙˆÙ‡Ù…ÙŠ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n+          ErrorTracker.logSuccess(\n+            operation: 'Test phone number verified successfully',\n+            location: 'PhoneAuthService.verifyCode',\n+            data: {'phone': _currentPhoneNumber.value, 'code': smsCode},\n+          );\n+\n+          // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ‡Ù…ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±\n+          final mockUser = _auth.currentUser;\n+\n+          return PhoneAuthResult.success(\n+            type: PhoneAuthResultType.verified,\n+            user: mockUser,\n+          );\n+        } else {\n+          ErrorTracker.logError(\n+            error: 'Test phone verification failed: wrong code',\n+            location: 'PhoneAuthService.verifyCode',\n+            additionalData: {\n+              'expected': expectedCode,\n+              'received': smsCode,\n+              'phone': _currentPhoneNumber.value,\n+            },\n+            severity: ErrorSeverity.medium,\n+          );\n+\n+          return PhoneAuthResult.error('Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­ Ù„Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ');\n+        }\n+      }\n+\n+      // Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©\n       final credential = PhoneAuthProvider.credential(\n         verificationId: _currentVerificationId.value,\n         smsCode: smsCode,\n       );\n@@ -264,8 +338,107 @@\n       event: 'PhoneAuthService reset',\n       location: 'PhoneAuthService.reset',\n     );\n   }\n+\n+  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… Ù…Ù† Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±\n+  bool _isTestPhoneNumber(String phoneNumber) {\n+    return _testPhoneNumbers.containsKey(phoneNumber);\n+  }\n+\n+  /// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯\n+  String? _getTestCode(String phoneNumber) {\n+    return _testPhoneNumbers[phoneNumber];\n+  }\n+\n+  /// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø±Ù‚Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±\n+  Map<String, String> getTestNumberInfo(String phoneNumber) {\n+    if (_isTestPhoneNumber(phoneNumber)) {\n+      return {\n+        'phone': phoneNumber,\n+        'code': _getTestCode(phoneNumber) ?? '',\n+        'type': 'test_number',\n+        'instructions':\n+            'Ù‡Ø°Ø§ Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø±. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø²: ${_getTestCode(phoneNumber)}',\n+      };\n+    }\n+    return {\n+      'type': 'real_number',\n+      'instructions': 'Ù‡Ø°Ø§ Ø±Ù‚Ù… Ø­Ù‚ÙŠÙ‚ÙŠ. Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² SMS ÙØ¹Ù„ÙŠ.',\n+    };\n+  }\n+\n+  /// Ø¥Ø¶Ø§ÙØ© Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯ (Ù„Ù„ØªØ·ÙˆÙŠØ± ÙÙ‚Ø·)\n+  static void addTestPhoneNumber(String phoneNumber, String code) {\n+    _testPhoneNumbers[phoneNumber] = code;\n+  }\n+\n+  /// ØªØ´Ø®ÙŠØµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase ÙˆØ¥Ø¹Ø·Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„\n+  Future<Map<String, dynamic>> diagnoseFirebaseSetup() async {\n+    final diagnosis = <String, dynamic>{};\n+\n+    try {\n+      // 1. ÙØ­Øµ Firebase Auth\n+      diagnosis['firebase_auth_initialized'] = _auth != null;\n+      diagnosis['current_user'] = _auth.currentUser?.uid ?? 'no_user';\n+\n+      // 2. ÙØ­Øµ Platform\n+      diagnosis['platform'] = Platform.operatingSystem;\n+      diagnosis['is_android'] = Platform.isAndroid;\n+      diagnosis['is_ios'] = Platform.isIOS;\n+\n+      // 3. ÙØ­Øµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚\n+      diagnosis['app_id'] = _auth.app.options.appId;\n+      diagnosis['project_id'] = _auth.app.options.projectId;\n+\n+      // 4. ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©\n+      diagnosis['service_loading'] = _isLoading.value;\n+      diagnosis['current_phone'] = _currentPhoneNumber.value;\n+      diagnosis['verification_id'] = _currentVerificationId.value.isNotEmpty;\n+\n+      ErrorTracker.logEvent(\n+        event: 'Firebase diagnosis completed',\n+        location: 'PhoneAuthService.diagnoseFirebaseSetup',\n+        data: diagnosis,\n+      );\n+\n+      return diagnosis;\n+    } catch (e) {\n+      diagnosis['error'] = e.toString();\n+      return diagnosis;\n+    }\n+  }\n+\n+  /// ÙØ­Øµ ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n+  Map<String, dynamic> validatePhoneNumber(String phoneNumber) {\n+    final validation = <String, dynamic>{};\n+\n+    // 1. ÙØ­Øµ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚\n+    validation['has_plus'] = phoneNumber.startsWith('+');\n+    validation['length'] = phoneNumber.length;\n+    validation['is_numeric'] = RegExp(r'^\\+\\d+$').hasMatch(phoneNumber);\n+\n+    // 2. ÙØ­Øµ Ø§Ù„Ø¨Ù„Ø¯\n+    if (phoneNumber.startsWith('+964')) {\n+      validation['country'] = 'Iraq';\n+      validation['valid_length'] =\n+          phoneNumber.length >= 13 && phoneNumber.length <= 14;\n+    } else if (phoneNumber.startsWith('+966')) {\n+      validation['country'] = 'Saudi Arabia';\n+      validation['valid_length'] = phoneNumber.length == 13;\n+    } else if (phoneNumber.startsWith('+1')) {\n+      validation['country'] = 'US/Canada';\n+      validation['valid_length'] = phoneNumber.length == 12;\n+    } else {\n+      validation['country'] = 'Other';\n+      validation['valid_length'] = phoneNumber.length >= 10;\n+    }\n+\n+    // 3. ÙØ­Øµ Ù†ÙˆØ¹ Ø§Ù„Ø±Ù‚Ù…\n+    validation['is_test_number'] = _isTestPhoneNumber(phoneNumber);\n+\n+    return validation;\n+  }\n }\n \n /// Ù†ØªÙŠØ¬Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\n class PhoneAuthResult {\n"
                },
                {
                    "date": 1752837553553,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,11 @@\n import 'dart:async';\n import 'dart:io';\n import 'package:firebase_auth/firebase_auth.dart';\n import 'package:get/get.dart';\n-import '../core/error_tracker.dart';\n+import 'package:flutter/foundation.dart';\n \n-/// Ø®Ø¯Ù…Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n+/// Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ø³Ù†Ø© - ØªØ¹Ù…Ù„ ÙÙ‚Ø· Ù…Ø¹ Firebase ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©\n class PhoneAuthService extends GetxService {\n   static PhoneAuthService get instance => Get.find<PhoneAuthService>();\n \n   final FirebaseAuth _auth = FirebaseAuth.instance;\n@@ -15,18 +15,8 @@\n   final RxString _currentVerificationId = ''.obs;\n   final RxString _currentPhoneNumber = ''.obs;\n   final RxInt _resendToken = 0.obs;\n \n-  // ===================== Test Phone Numbers Support =====================\n-  static const Map<String, String> _testPhoneNumbers = {\n-    '+9647803346793': '123456', // Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø°ÙŠ Ø°ÙƒØ±ØªÙ‡\n-    '+1234567890': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙÙŠ\n-    '+966500000000': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø¹ÙˆØ¯ÙŠ\n-    '+201234567890': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ù…ØµØ±ÙŠ\n-    '+962791234567': '123456', // Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ\n-    // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©\n-  };\n-\n   // Getters\n   bool get isLoading => _isLoading.value;\n   String get verificationId => _currentVerificationId.value;\n   String get phoneNumber => _currentPhoneNumber.value;\n@@ -34,74 +24,58 @@\n   @override\n   void onInit() {\n     super.onInit();\n     _setupAuthStateListener();\n-    ErrorTracker.logEvent(\n-      event: 'PhoneAuthService initialized',\n-      location: 'PhoneAuthService.onInit',\n-    );\n+    debugPrint('ğŸ“± ØªÙ… ØªÙ‡ÙŠØ¦Ø© PhoneAuthService Ø¨Ù†Ø¬Ø§Ø­');\n+    _logEvent('PhoneAuthService ØªÙ… ØªÙ‡ÙŠØ¦ØªÙ‡', {\n+      'timestamp': DateTime.now().toString(),\n+    });\n   }\n \n   /// Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\n   void _setupAuthStateListener() {\n     _auth.authStateChanges().listen((User? user) {\n       if (user != null) {\n-        ErrorTracker.logSuccess(\n-          operation: 'User authenticated',\n-          location: 'PhoneAuthService._setupAuthStateListener',\n-          data: {'uid': user.uid, 'phone': user.phoneNumber},\n-        );\n+        debugPrint('âœ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ${user.uid}');\n+        _logSuccess('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', {\n+          'uid': user.uid,\n+          'phone': user.phoneNumber,\n+        });\n+      } else {\n+        debugPrint('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„');\n       }\n     });\n   }\n \n-  /// Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n+  /// Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ - ÙÙ‚Ø· Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©\n   Future<PhoneAuthResult> sendVerificationCode(String phoneNumber) async {\n     try {\n       _isLoading.value = true;\n       _currentPhoneNumber.value = phoneNumber;\n \n-      ErrorTracker.logEvent(\n-        event: 'Starting phone verification',\n-        location: 'PhoneAuthService.sendVerificationCode',\n-        data: {\n-          'phone': phoneNumber,\n-          'platform': Platform.operatingSystem,\n-          'is_test_number': _isTestPhoneNumber(phoneNumber),\n-        },\n-      );\n+      debugPrint('ğŸ“¤ Ø¨Ø¯Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰: $phoneNumber');\n+      _logEvent('Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ', {\n+        'phone': phoneNumber,\n+        'platform': Platform.operatingSystem,\n+      });\n \n-      // Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©ØŒ Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²\n-      if (_isTestPhoneNumber(phoneNumber)) {\n-        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ø§Ù„Ø´Ø¨ÙƒØ©\n-        await Future.delayed(const Duration(seconds: 2));\n+      // ÙØ­Øµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡\n+      await _ensureFirebaseReady();\n \n-        // ØªØ¹ÙŠÙŠÙ† verification ID ÙˆÙ‡Ù…ÙŠ\n-        _currentVerificationId.value =\n-            'test_verification_id_${DateTime.now().millisecondsSinceEpoch}';\n+      final Completer<PhoneAuthResult> completer = Completer();\n \n-        ErrorTracker.logSuccess(\n-          operation: 'Test verification code sent',\n-          location: 'PhoneAuthService.sendVerificationCode',\n-          data: {'phone': phoneNumber, 'test_code': _getTestCode(phoneNumber)},\n-        );\n-\n-        return PhoneAuthResult.success(\n-          type: PhoneAuthResultType.codeSent,\n-          verificationId: _currentVerificationId.value,\n-        );\n+      // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ø³Ù†Ø© Ù„Ù„Ù€ reCAPTCHA\n+      if (Platform.isIOS) {\n+        debugPrint('ğŸ ØªÙ‡ÙŠØ¦Ø© iOS reCAPTCHA...');\n+        await _configureiOSRecaptcha();\n       }\n \n-      final Completer<PhoneAuthResult> completer = Completer();\n-\n       await _auth.verifyPhoneNumber(\n         phoneNumber: phoneNumber,\n-        timeout: const Duration(seconds: 60),\n+        timeout: const Duration(seconds: 120), // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù„Ø©\n         verificationCompleted: (PhoneAuthCredential credential) async {\n-          ErrorTracker.logSuccess(\n-            operation: 'Auto verification completed',\n-            location: 'PhoneAuthService.verificationCompleted',\n-          );\n+          debugPrint('âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');\n+          _logSuccess('Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');\n \n           try {\n             final result = await _signInWithCredential(credential);\n             if (!completer.isCompleted) {\n@@ -113,30 +87,30 @@\n                 ),\n               );\n             }\n           } catch (e) {\n-            ErrorTracker.logError(\n-              error: 'Auto sign-in failed: ${e.toString()}',\n-              location: 'PhoneAuthService.verificationCompleted',\n-              severity: ErrorSeverity.high,\n-            );\n+            debugPrint('âŒ ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ: $e');\n+            _logError('ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ', e.toString());\n             if (!completer.isCompleted) {\n               completer.complete(PhoneAuthResult.error(e.toString()));\n             }\n           }\n         },\n-        verificationFailed: (FirebaseAuthException e) {\n-          ErrorTracker.logError(\n-            error: 'Phone verification failed: ${e.code} - ${e.message}',\n-            location: 'PhoneAuthService.verificationFailed',\n-            additionalData: {\n-              'error_code': e.code,\n-              'error_message': e.message,\n-              'phone': phoneNumber,\n-            },\n-            severity: ErrorSeverity.high,\n-          );\n+        verificationFailed: (FirebaseAuthException e) async {\n+          debugPrint('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ: ${e.code} - ${e.message}');\n \n+          // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø§ØµØ© Ù„Ù€ internal-error\n+          if (e.code == 'internal-error') {\n+            await _handleInternalError(e, phoneNumber, completer);\n+            return;\n+          }\n+\n+          _logError('ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ', '${e.code} - ${e.message}', {\n+            'error_code': e.code,\n+            'error_message': e.message,\n+            'phone': phoneNumber,\n+          });\n+\n           if (!completer.isCompleted) {\n             completer.complete(\n               PhoneAuthResult.error(_getLocalizedErrorMessage(e.code)),\n             );\n@@ -145,16 +119,13 @@\n         codeSent: (String verificationId, int? resendToken) {\n           _currentVerificationId.value = verificationId;\n           _resendToken.value = resendToken ?? 0;\n \n-          ErrorTracker.logSuccess(\n-            operation: 'Verification code sent',\n-            location: 'PhoneAuthService.codeSent',\n-            data: {\n-              'verification_id': verificationId,\n-              'resend_token': resendToken,\n-            },\n-          );\n+          debugPrint('ğŸ“© ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­. ID: $verificationId');\n+          _logSuccess('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚', {\n+            'verification_id': verificationId,\n+            'resend_token': resendToken,\n+          });\n \n           if (!completer.isCompleted) {\n             completer.complete(\n               PhoneAuthResult.success(\n@@ -165,124 +136,153 @@\n           }\n         },\n         codeAutoRetrievalTimeout: (String verificationId) {\n           _currentVerificationId.value = verificationId;\n-          ErrorTracker.logEvent(\n-            event: 'Code auto-retrieval timeout',\n-            location: 'PhoneAuthService.codeAutoRetrievalTimeout',\n-            data: {'verification_id': verificationId},\n-          );\n+          debugPrint('â° Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ. ID: $verificationId');\n+          _logEvent('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ', {\n+            'verification_id': verificationId,\n+          });\n         },\n       );\n \n       return completer.future;\n     } catch (e, stackTrace) {\n-      ErrorTracker.logError(\n-        error: 'Send verification code failed: ${e.toString()}',\n-        location: 'PhoneAuthService.sendVerificationCode',\n-        stackTrace: stackTrace,\n-        additionalData: {'phone': phoneNumber},\n-        severity: ErrorSeverity.critical,\n-      );\n+      debugPrint('ğŸš¨ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚: $e');\n+      debugPrint('StackTrace: $stackTrace');\n+      _logError('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚', e.toString(), {\n+        'phone': phoneNumber,\n+        'stack_trace': stackTrace.toString(),\n+      });\n \n       return PhoneAuthResult.error('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ${e.toString()}');\n     } finally {\n       _isLoading.value = false;\n     }\n   }\n \n-  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² SMS Ø§Ù„Ù…Ø¯Ø®Ù„\n-  Future<PhoneAuthResult> verifyCode(String smsCode) async {\n+  /// Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase\n+  Future<void> _ensureFirebaseReady() async {\n     try {\n-      if (_currentVerificationId.value.isEmpty) {\n-        throw Exception('Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø¹Ø¯');\n+      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ‡ÙŠØ¦Ø©\n+      if (_auth.app.isAutomaticDataCollectionEnabled) {\n+        debugPrint('âœ… Firebase Auth Ø¬Ø§Ù‡Ø²');\n       }\n \n-      _isLoading.value = true;\n+      // ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„\n+      final user = _auth.currentUser;\n+      debugPrint('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ: ${user?.uid ?? \"Ù„Ø§ ÙŠÙˆØ¬Ø¯\"}');\n \n-      ErrorTracker.logEvent(\n-        event: 'Verifying SMS code',\n-        location: 'PhoneAuthService.verifyCode',\n-        data: {\n-          'code_length': smsCode.length,\n-          'phone_number': _currentPhoneNumber.value,\n-          'is_test_number': _isTestPhoneNumber(_currentPhoneNumber.value),\n-        },\n-      );\n+      // Ø§Ù†ØªØ¸Ø§Ø± ØµØºÙŠØ± Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø±\n+      await Future.delayed(const Duration(milliseconds: 500));\n+    } catch (e) {\n+      debugPrint('âš ï¸ ØªØ­Ø°ÙŠØ± ÙÙŠ ÙØ­Øµ Firebase: $e');\n+    }\n+  }\n \n-      // Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹\n-      if (_isTestPhoneNumber(_currentPhoneNumber.value)) {\n-        final expectedCode = _getTestCode(_currentPhoneNumber.value);\n-        if (smsCode == expectedCode) {\n-          // Ø¥Ù†Ø´Ø§Ø¡ credential ÙˆÙ‡Ù…ÙŠ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n-          ErrorTracker.logSuccess(\n-            operation: 'Test phone number verified successfully',\n-            location: 'PhoneAuthService.verifyCode',\n-            data: {'phone': _currentPhoneNumber.value, 'code': smsCode},\n-          );\n+  /// ØªÙƒÙˆÙŠÙ† reCAPTCHA Ù„Ù€ iOS\n+  Future<void> _configureiOSRecaptcha() async {\n+    try {\n+      if (Platform.isIOS) {\n+        // Ø¥Ø¹Ø·Ø§Ø¡ ÙˆÙ‚Øª Ø¥Ø¶Ø§ÙÙŠ Ù„ØªØ­Ù…ÙŠÙ„ reCAPTCHA Ø¹Ù„Ù‰ iOS\n+        await Future.delayed(const Duration(milliseconds: 1000));\n+        debugPrint('ğŸ” ØªÙ… ØªÙƒÙˆÙŠÙ† iOS reCAPTCHA');\n+      }\n+    } catch (e) {\n+      debugPrint('âš ï¸ ØªØ­Ø°ÙŠØ± ÙÙŠ ØªÙƒÙˆÙŠÙ† iOS reCAPTCHA: $e');\n+    }\n+  }\n \n-          // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ‡Ù…ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±\n-          final mockUser = _auth.currentUser;\n+  /// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø§ØµØ© Ù„Ø®Ø·Ø£ internal-error\n+  Future<void> _handleInternalError(\n+    FirebaseAuthException e,\n+    String phoneNumber,\n+    Completer<PhoneAuthResult> completer,\n+  ) async {\n+    debugPrint('ğŸ”§ Ù…Ø¹Ø§Ù„Ø¬Ø© internal-error...');\n \n-          return PhoneAuthResult.success(\n-            type: PhoneAuthResultType.verified,\n-            user: mockUser,\n-          );\n-        } else {\n-          ErrorTracker.logError(\n-            error: 'Test phone verification failed: wrong code',\n-            location: 'PhoneAuthService.verifyCode',\n-            additionalData: {\n-              'expected': expectedCode,\n-              'received': smsCode,\n-              'phone': _currentPhoneNumber.value,\n-            },\n-            severity: ErrorSeverity.medium,\n-          );\n+    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ´Ø®ÙŠØµ\n+    final diagnosis = await diagnoseFirebaseSetup();\n+    debugPrint('ğŸ“Š ØªØ´Ø®ÙŠØµ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£: $diagnosis');\n \n-          return PhoneAuthResult.error('Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­ Ù„Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ');\n-        }\n+    // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„Ù„Ø­Ù„\n+    String errorMsg = 'Ø®Ø·Ø£ Ø¯Ø§Ø®Ù„ÙŠ ÙÙŠ Firebase. ';\n+\n+    if (Platform.isIOS) {\n+      errorMsg +=\n+          'Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© iOS: ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª reCAPTCHA ÙÙŠ Firebase Console. ';\n+    }\n+\n+    if (Platform.isAndroid) {\n+      errorMsg +=\n+          'Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Android: ØªØ£ÙƒØ¯ Ù…Ù† SHA-1 fingerprint ÙÙŠ Firebase Console. ';\n+    }\n+\n+    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ‡ÙŠØ¦Ø©\n+    try {\n+      debugPrint('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ‡ÙŠØ¦Ø©...');\n+      await Future.delayed(const Duration(seconds: 2));\n+\n+      // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©\n+      if (!completer.isCompleted) {\n+        errorMsg += 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ Ù„Ø­Ø¸Ø§Øª.';\n+        completer.complete(PhoneAuthResult.error(errorMsg));\n       }\n+    } catch (retryError) {\n+      debugPrint('âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©: $retryError');\n+      if (!completer.isCompleted) {\n+        completer.complete(\n+          PhoneAuthResult.error('$errorMsg Ø®Ø·Ø£ Ø¥Ø¶Ø§ÙÙŠ: $retryError'),\n+        );\n+      }\n+    }\n+  }\n \n-      // Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©\n+  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² SMS Ø§Ù„Ù…Ø¯Ø®Ù„ - ÙÙ‚Ø· Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©\n+  Future<PhoneAuthResult> verifyCode(String smsCode) async {\n+    try {\n+      if (_currentVerificationId.value.isEmpty) {\n+        throw Exception('Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø¹Ø¯');\n+      }\n+\n+      _isLoading.value = true;\n+\n+      debugPrint('ğŸ” Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²: $smsCode');\n+      _logEvent('Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² SMS', {\n+        'code_length': smsCode.length,\n+        'phone_number': _currentPhoneNumber.value,\n+      });\n+\n+      // Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²\n       final credential = PhoneAuthProvider.credential(\n         verificationId: _currentVerificationId.value,\n         smsCode: smsCode,\n       );\n \n       final result = await _signInWithCredential(credential);\n \n-      ErrorTracker.logSuccess(\n-        operation: 'SMS code verified successfully',\n-        location: 'PhoneAuthService.verifyCode',\n-        data: {'uid': result.user?.uid},\n-      );\n+      debugPrint('âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² Ø¨Ù†Ø¬Ø§Ø­. UID: ${result.user?.uid}');\n+      _logSuccess('ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² SMS Ø¨Ù†Ø¬Ø§Ø­', {'uid': result.user?.uid});\n \n       return PhoneAuthResult.success(\n         type: PhoneAuthResultType.verified,\n         credential: credential,\n         user: result.user,\n       );\n     } on FirebaseAuthException catch (e) {\n-      ErrorTracker.logError(\n-        error: 'Code verification failed: ${e.code} - ${e.message}',\n-        location: 'PhoneAuthService.verifyCode',\n-        additionalData: {\n-          'error_code': e.code,\n-          'error_message': e.message,\n-          'code_length': smsCode.length,\n-        },\n-        severity: ErrorSeverity.medium,\n-      );\n+      debugPrint('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²: ${e.code} - ${e.message}');\n+      _logError('ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø²', '${e.code} - ${e.message}', {\n+        'error_code': e.code,\n+        'error_message': e.message,\n+        'code_length': smsCode.length,\n+      });\n \n       return PhoneAuthResult.error(_getLocalizedErrorMessage(e.code));\n     } catch (e, stackTrace) {\n-      ErrorTracker.logError(\n-        error: 'Verify code failed: ${e.toString()}',\n-        location: 'PhoneAuthService.verifyCode',\n-        stackTrace: stackTrace,\n-        severity: ErrorSeverity.high,\n-      );\n+      debugPrint('ğŸš¨ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚: $e');\n+      debugPrint('StackTrace: $stackTrace');\n+      _logError('Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚', e.toString(), {\n+        'stack_trace': stackTrace.toString(),\n+      });\n \n       return PhoneAuthResult.error('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚: ${e.toString()}');\n     } finally {\n       _isLoading.value = false;\n@@ -304,82 +304,89 @@\n   ) async {\n     return await _auth.signInWithCredential(credential);\n   }\n \n-  /// ØªØ±Ø¬Ù…Ø© Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©\n+  /// ØªØ±Ø¬Ù…Ø© Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¹ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©\n   String _getLocalizedErrorMessage(String errorCode) {\n     switch (errorCode) {\n       case 'invalid-phone-number':\n-        return 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù‚Ù….';\n+        return 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù‚Ù… ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© (+964 Ù„Ù„Ø¹Ø±Ø§Ù‚).';\n       case 'too-many-requests':\n-        return 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.';\n+        return 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ${_getWaitTime()} Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.';\n       case 'invalid-verification-code':\n         return 'Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.';\n       case 'session-expired':\n         return 'Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¬Ù„Ø³Ø©. ÙŠØ±Ø¬Ù‰ Ø·Ù„Ø¨ Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯.';\n       case 'quota-exceeded':\n-        return 'ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.';\n+        return 'ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù…Ù† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ØºØ¯Ø§Ù‹.';\n       case 'captcha-check-failed':\n-        return 'ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';\n+        return 'ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ (reCAPTCHA). ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';\n       case 'web-context-cancelled':\n         return 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';\n+      case 'network-request-failed':\n+        return 'Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';\n+      case 'app-not-authorized':\n+        return 'Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØºÙŠØ± Ù…ÙØ®ÙˆÙ„ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase Auth. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n+      case 'internal-error':\n+        return _getInternalErrorMessage();\n+      case 'missing-client-identifier':\n+        return 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.';\n+      case 'invalid-app-credential':\n+        return 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØºÙŠØ± ØµØ­ÙŠØ­Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n+      case 'operation-not-allowed':\n+        return 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± Ù…ÙØ¹Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n+      case 'user-disabled':\n+        return 'ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n       default:\n-        return 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: $errorCode';\n+        return 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: $errorCode. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n     }\n   }\n \n+  /// Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ internal-error Ù…Ø®ØµØµØ©\n+  String _getInternalErrorMessage() {\n+    if (Platform.isIOS) {\n+      return '''Ø®Ø·Ø£ Ø¯Ø§Ø®Ù„ÙŠ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… (iOS). \n+Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª\n+â€¢ Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚\n+â€¢ Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø± Ø§Ù„Ø®Ø·Ø£ØŒ ÙÙ‚Ø¯ ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª reCAPTCHA\n+â€¢ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚''';\n+    } else if (Platform.isAndroid) {\n+      return '''Ø®Ø·Ø£ Ø¯Ø§Ø®Ù„ÙŠ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… (Android).\n+Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª\n+â€¢ Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ« Google Play Services\n+â€¢ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚''';\n+    } else {\n+      return 'Ø®Ø·Ø£ Ø¯Ø§Ø®Ù„ÙŠ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…. ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n+    }\n+  }\n+\n+  /// Ø­Ø³Ø§Ø¨ ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª\n+  String _getWaitTime() {\n+    // ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ† Ù‡Ø°Ø§ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠ\n+    return '5'; // Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ 5 Ø¯Ù‚Ø§Ø¦Ù‚\n+  }\n+\n   /// ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n   void reset() {\n     _currentVerificationId.value = '';\n     _currentPhoneNumber.value = '';\n     _resendToken.value = 0;\n     _isLoading.value = false;\n \n-    ErrorTracker.logEvent(\n-      event: 'PhoneAuthService reset',\n-      location: 'PhoneAuthService.reset',\n-    );\n+    debugPrint('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† PhoneAuthService');\n+    _logEvent('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† PhoneAuthService');\n   }\n \n-  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… Ù…Ù† Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±\n-  bool _isTestPhoneNumber(String phoneNumber) {\n-    return _testPhoneNumbers.containsKey(phoneNumber);\n-  }\n-\n-  /// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯\n-  String? _getTestCode(String phoneNumber) {\n-    return _testPhoneNumbers[phoneNumber];\n-  }\n-\n-  /// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø±Ù‚Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±\n-  Map<String, String> getTestNumberInfo(String phoneNumber) {\n-    if (_isTestPhoneNumber(phoneNumber)) {\n-      return {\n-        'phone': phoneNumber,\n-        'code': _getTestCode(phoneNumber) ?? '',\n-        'type': 'test_number',\n-        'instructions':\n-            'Ù‡Ø°Ø§ Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø±. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø²: ${_getTestCode(phoneNumber)}',\n-      };\n-    }\n-    return {\n-      'type': 'real_number',\n-      'instructions': 'Ù‡Ø°Ø§ Ø±Ù‚Ù… Ø­Ù‚ÙŠÙ‚ÙŠ. Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² SMS ÙØ¹Ù„ÙŠ.',\n-    };\n-  }\n-\n-  /// Ø¥Ø¶Ø§ÙØ© Ø±Ù‚Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯ (Ù„Ù„ØªØ·ÙˆÙŠØ± ÙÙ‚Ø·)\n-  static void addTestPhoneNumber(String phoneNumber, String code) {\n-    _testPhoneNumbers[phoneNumber] = code;\n-  }\n-\n   /// ØªØ´Ø®ÙŠØµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase ÙˆØ¥Ø¹Ø·Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„\n   Future<Map<String, dynamic>> diagnoseFirebaseSetup() async {\n     final diagnosis = <String, dynamic>{};\n \n     try {\n       // 1. ÙØ­Øµ Firebase Auth\n-      diagnosis['firebase_auth_initialized'] = _auth != null;\n+      diagnosis['firebase_auth_initialized'] = true;\n       diagnosis['current_user'] = _auth.currentUser?.uid ?? 'no_user';\n \n       // 2. ÙØ­Øµ Platform\n       diagnosis['platform'] = Platform.operatingSystem;\n@@ -394,17 +401,15 @@\n       diagnosis['service_loading'] = _isLoading.value;\n       diagnosis['current_phone'] = _currentPhoneNumber.value;\n       diagnosis['verification_id'] = _currentVerificationId.value.isNotEmpty;\n \n-      ErrorTracker.logEvent(\n-        event: 'Firebase diagnosis completed',\n-        location: 'PhoneAuthService.diagnoseFirebaseSetup',\n-        data: diagnosis,\n-      );\n+      debugPrint('ğŸ“Š ØªØ´Ø®ÙŠØµ Firebase Ù…ÙƒØªÙ…Ù„: $diagnosis');\n+      _logEvent('ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ ØªØ´Ø®ÙŠØµ Firebase', diagnosis);\n \n       return diagnosis;\n     } catch (e) {\n       diagnosis['error'] = e.toString();\n+      debugPrint('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´Ø®ÙŠØµ Firebase: $e');\n       return diagnosis;\n     }\n   }\n \n@@ -432,13 +437,72 @@\n       validation['country'] = 'Other';\n       validation['valid_length'] = phoneNumber.length >= 10;\n     }\n \n-    // 3. ÙØ­Øµ Ù†ÙˆØ¹ Ø§Ù„Ø±Ù‚Ù…\n-    validation['is_test_number'] = _isTestPhoneNumber(phoneNumber);\n+    // Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· Ù…Ø¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©\n+    validation['is_real_number'] = true;\n \n+    debugPrint('ğŸ“ ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ù‚Ù…: $validation');\n     return validation;\n   }\n+\n+  /// Ø·Ø±ÙŠÙ‚Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø®Ø¯Ù…Ø© ØªØ¹Ù…Ù„\n+  void testService() {\n+    debugPrint('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± PhoneAuthService...');\n+    debugPrint('âœ… Ø§Ù„Ø®Ø¯Ù…Ø© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!');\n+    debugPrint('ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${_isLoading.value}');\n+    debugPrint('ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${_currentPhoneNumber.value}');\n+    debugPrint('ğŸ”‘ Ù…Ø¹Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚: ${_currentVerificationId.value}');\n+  }\n+\n+  /// Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ Ø¹Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©\n+  Map<String, dynamic> getServiceReport() {\n+    return {\n+      'service_name': 'PhoneAuthService',\n+      'version': '2.0.0',\n+      'status': isLoading ? 'busy' : 'ready',\n+      'current_session': {\n+        'phone_number': _currentPhoneNumber.value,\n+        'has_verification_id': _currentVerificationId.value.isNotEmpty,\n+      },\n+      'firebase_info': {\n+        'auth_initialized': _auth.currentUser != null,\n+        'current_user_uid': _auth.currentUser?.uid,\n+        'current_user_phone': _auth.currentUser?.phoneNumber,\n+      },\n+      'generated_at': DateTime.now().toIso8601String(),\n+    };\n+  }\n+\n+  // === Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ===\n+\n+  /// ØªØ³Ø¬ÙŠÙ„ Ø­Ø¯Ø« Ø¹Ø§Ù…\n+  void _logEvent(String event, [Map<String, dynamic>? data]) {\n+    final timestamp = DateTime.now().toIso8601String();\n+    debugPrint('ğŸ“Š [$timestamp] PhoneAuthService: $event');\n+    if (data != null && data.isNotEmpty) {\n+      debugPrint('   ğŸ“„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${data.toString()}');\n+    }\n+  }\n+\n+  /// ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ù†Ø§Ø¬Ø­Ø©\n+  void _logSuccess(String operation, [Map<String, dynamic>? data]) {\n+    _logEvent('âœ… Ù†Ø¬Ø­: $operation', data);\n+  }\n+\n+  /// ØªØ³Ø¬ÙŠÙ„ Ø®Ø·Ø£\n+  void _logError(\n+    String operation,\n+    String error, [\n+    Map<String, dynamic>? additionalData,\n+  ]) {\n+    final errorData = {\n+      'error': error,\n+      'operation': operation,\n+      if (additionalData != null) ...additionalData,\n+    };\n+    _logEvent('âŒ ÙØ´Ù„: $operation', errorData);\n+  }\n }\n \n /// Ù†ØªÙŠØ¬Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\n class PhoneAuthResult {\n"
                },
                {
                    "date": 1752858134118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,18 +9,25 @@\n   static PhoneAuthService get instance => Get.find<PhoneAuthService>();\n \n   final FirebaseAuth _auth = FirebaseAuth.instance;\n \n-  // Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø©\n+  // Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©\n   final RxBool _isLoading = false.obs;\n   final RxString _currentVerificationId = ''.obs;\n   final RxString _currentPhoneNumber = ''.obs;\n   final RxInt _resendToken = 0.obs;\n+  \n+  // Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©\n+  DateTime? _lastRequestTime;\n+  String? _lastRequestedPhone;\n+  bool _isRequestInProgress = false;\n+  static const int _minimumRequestInterval = 5000; // 5 Ø«ÙˆØ§Ù†ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ø·Ù„Ø¨Ø§Øª\n \n   // Getters\n   bool get isLoading => _isLoading.value;\n   String get verificationId => _currentVerificationId.value;\n   String get phoneNumber => _currentPhoneNumber.value;\n+  bool get canMakeRequest => !_isRequestInProgress;\n \n   @override\n   void onInit() {\n     super.onInit();\n@@ -45,18 +52,40 @@\n       }\n     });\n   }\n \n-  /// Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ - ÙÙ‚Ø· Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©\n+  /// Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø¹ Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©\n   Future<PhoneAuthResult> sendVerificationCode(String phoneNumber) async {\n+    // ÙØ­Øµ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©\n+    if (!_canMakeNewRequest(phoneNumber)) {\n+      final timeLeft = _getTimeUntilNextRequest();\n+      debugPrint('ğŸ›¡ï¸ Ø·Ù„Ø¨ Ù…Ø±ÙÙˆØ¶ - ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± $timeLeft Ø«Ø§Ù†ÙŠØ©');\n+      return PhoneAuthResult.error(\n+        'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± $timeLeft Ø«Ø§Ù†ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'\n+      );\n+    }\n+\n+    // ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°\n+    if (_isRequestInProgress) {\n+      debugPrint('âš ï¸ Ø·Ù„Ø¨ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨Ø§Ù„ÙØ¹Ù„');\n+      return PhoneAuthResult.error('ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±');\n+    }\n+\n     try {\n+      _isRequestInProgress = true;\n       _isLoading.value = true;\n       _currentPhoneNumber.value = phoneNumber;\n+      _lastRequestTime = DateTime.now();\n+      _lastRequestedPhone = phoneNumber;\n \n       debugPrint('ğŸ“¤ Ø¨Ø¯Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰: $phoneNumber');\n+      debugPrint('ğŸ›¡ï¸ Ø­Ù…Ø§ÙŠØ© Ù…Ø·Ø¨Ù‚Ø© - Ø¢Ø®Ø± Ø·Ù„Ø¨: ${_lastRequestTime}');\n+      \n       _logEvent('Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ', {\n         'phone': phoneNumber,\n         'platform': Platform.operatingSystem,\n+        'request_time': _lastRequestTime.toString(),\n+        'protection_active': true,\n       });\n \n       // ÙØ­Øµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡\n       await _ensureFirebaseReady();\n@@ -155,8 +184,10 @@\n \n       return PhoneAuthResult.error('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ${e.toString()}');\n     } finally {\n       _isLoading.value = false;\n+      _isRequestInProgress = false;\n+      debugPrint('ğŸ”„ ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ - Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù†Ø´Ø·Ø©');\n     }\n   }\n \n   /// Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase\n@@ -501,8 +532,42 @@\n       if (additionalData != null) ...additionalData,\n     };\n     _logEvent('âŒ ÙØ´Ù„: $operation', errorData);\n   }\n+\n+  /// ÙØ­Øµ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ø¬Ø±Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ (Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©)\n+  bool _canMakeNewRequest(String phoneNumber) {\n+    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ Ø³Ø§Ø¨Ù‚ØŒ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¥Ø±Ø³Ø§Ù„\n+    if (_lastRequestTime == null) {\n+      return true;\n+    }\n+\n+    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… Ù…Ø®ØªÙ„ÙØŒ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¥Ø±Ø³Ø§Ù„\n+    if (_lastRequestedPhone != phoneNumber) {\n+      return true;\n+    }\n+\n+    // ÙØ­Øµ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©\n+    final timeSinceLastRequest = DateTime.now().difference(_lastRequestTime!).inMilliseconds;\n+    return timeSinceLastRequest >= _minimumRequestInterval;\n+  }\n+\n+  /// Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø·Ù„Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ\n+  int _getTimeUntilNextRequest() {\n+    if (_lastRequestTime == null) return 0;\n+    \n+    final timeSinceLastRequest = DateTime.now().difference(_lastRequestTime!).inMilliseconds;\n+    final timeLeft = _minimumRequestInterval - timeSinceLastRequest;\n+    return (timeLeft / 1000).ceil().clamp(0, 99);\n+  }\n+\n+  /// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ Ø£Ùˆ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±)\n+  void resetRequestState() {\n+    _lastRequestTime = null;\n+    _lastRequestedPhone = null;\n+    _isRequestInProgress = false;\n+    debugPrint('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ø§Øª PhoneAuthService');\n+  }\n }\n \n /// Ù†ØªÙŠØ¬Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\n class PhoneAuthResult {\n"
                },
                {
                    "date": 1753097375571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n   final RxBool _isLoading = false.obs;\n   final RxString _currentVerificationId = ''.obs;\n   final RxString _currentPhoneNumber = ''.obs;\n   final RxInt _resendToken = 0.obs;\n-  \n+\n   // Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©\n   DateTime? _lastRequestTime;\n   String? _lastRequestedPhone;\n   bool _isRequestInProgress = false;\n@@ -59,16 +59,18 @@\n     if (!_canMakeNewRequest(phoneNumber)) {\n       final timeLeft = _getTimeUntilNextRequest();\n       debugPrint('ğŸ›¡ï¸ Ø·Ù„Ø¨ Ù…Ø±ÙÙˆØ¶ - ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± $timeLeft Ø«Ø§Ù†ÙŠØ©');\n       return PhoneAuthResult.error(\n-        'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± $timeLeft Ø«Ø§Ù†ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'\n+        'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± $timeLeft Ø«Ø§Ù†ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰',\n       );\n     }\n \n     // ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°\n     if (_isRequestInProgress) {\n       debugPrint('âš ï¸ Ø·Ù„Ø¨ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨Ø§Ù„ÙØ¹Ù„');\n-      return PhoneAuthResult.error('ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±');\n+      return PhoneAuthResult.error(\n+        'ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',\n+      );\n     }\n \n     try {\n       _isRequestInProgress = true;\n@@ -77,10 +79,10 @@\n       _lastRequestTime = DateTime.now();\n       _lastRequestedPhone = phoneNumber;\n \n       debugPrint('ğŸ“¤ Ø¨Ø¯Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰: $phoneNumber');\n-      debugPrint('ğŸ›¡ï¸ Ø­Ù…Ø§ÙŠØ© Ù…Ø·Ø¨Ù‚Ø© - Ø¢Ø®Ø± Ø·Ù„Ø¨: ${_lastRequestTime}');\n-      \n+      debugPrint('ğŸ›¡ï¸ Ø­Ù…Ø§ÙŠØ© Ù…Ø·Ø¨Ù‚Ø© - Ø¢Ø®Ø± Ø·Ù„Ø¨: $_lastRequestTime');\n+\n       _logEvent('Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ', {\n         'phone': phoneNumber,\n         'platform': Platform.operatingSystem,\n         'request_time': _lastRequestTime.toString(),\n@@ -546,17 +548,19 @@\n       return true;\n     }\n \n     // ÙØ­Øµ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©\n-    final timeSinceLastRequest = DateTime.now().difference(_lastRequestTime!).inMilliseconds;\n+    final timeSinceLastRequest =\n+        DateTime.now().difference(_lastRequestTime!).inMilliseconds;\n     return timeSinceLastRequest >= _minimumRequestInterval;\n   }\n \n   /// Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø·Ù„Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ\n   int _getTimeUntilNextRequest() {\n     if (_lastRequestTime == null) return 0;\n-    \n-    final timeSinceLastRequest = DateTime.now().difference(_lastRequestTime!).inMilliseconds;\n+\n+    final timeSinceLastRequest =\n+        DateTime.now().difference(_lastRequestTime!).inMilliseconds;\n     final timeLeft = _minimumRequestInterval - timeSinceLastRequest;\n     return (timeLeft / 1000).ceil().clamp(0, 99);\n   }\n \n"
                },
                {
                    "date": 1753181639040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n       }\n     });\n   }\n \n-  /// Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø¹ Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©\n+  /// Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø¹ Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© ÙˆØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n   Future<PhoneAuthResult> sendVerificationCode(String phoneNumber) async {\n     // ÙØ­Øµ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©\n     if (!_canMakeNewRequest(phoneNumber)) {\n       final timeLeft = _getTimeUntilNextRequest();\n@@ -99,11 +99,18 @@\n         debugPrint('ğŸ ØªÙ‡ÙŠØ¦Ø© iOS reCAPTCHA...');\n         await _configureiOSRecaptcha();\n       }\n \n+      // âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ø³Ù†Ø© Ù„Ø¯Ø¹Ù… Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n+      debugPrint('ğŸ§ª ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ...');\n+      final isTestNumber = _isTestPhoneNumber(phoneNumber);\n+      debugPrint('ğŸ“± Ù†ÙˆØ¹ Ø§Ù„Ø±Ù‚Ù…: ${isTestNumber ? \"ØªØ¬Ø±ÙŠØ¨ÙŠ\" : \"Ø­Ù‚ÙŠÙ‚ÙŠ\"}');\n+\n       await _auth.verifyPhoneNumber(\n         phoneNumber: phoneNumber,\n-        timeout: const Duration(seconds: 120), // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù„Ø©\n+        timeout: Duration(\n+          seconds: isTestNumber ? 60 : 120,\n+        ), // Ù…Ù‡Ù„Ø© Ø£Ù‚Ù„ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n         verificationCompleted: (PhoneAuthCredential credential) async {\n           debugPrint('âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');\n           _logSuccess('Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');\n \n@@ -128,8 +135,23 @@\n         },\n         verificationFailed: (FirebaseAuthException e) async {\n           debugPrint('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ: ${e.code} - ${e.message}');\n \n+          // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø§ØµØ© Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n+          if (isTestNumber && e.code == 'invalid-phone-number') {\n+            debugPrint(\n+              'ğŸ§ª Ø®Ø·Ø£ Ø±Ù‚Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± Ù…ÙØ¶Ø§Ù ÙÙŠ Firebase Console',\n+            );\n+            if (!completer.isCompleted) {\n+              completer.complete(\n+                PhoneAuthResult.error(\n+                  'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ ØºÙŠØ± Ù…ÙØ¶Ø§Ù ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØªÙ‡ ÙÙŠ Firebase Console ØªØ­Øª Phone numbers for testing.',\n+                ),\n+              );\n+            }\n+            return;\n+          }\n+\n           // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø§ØµØ© Ù„Ù€ internal-error\n           if (e.code == 'internal-error') {\n             await _handleInternalError(e, phoneNumber, completer);\n             return;\n@@ -138,8 +160,9 @@\n           _logError('ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ', '${e.code} - ${e.message}', {\n             'error_code': e.code,\n             'error_message': e.message,\n             'phone': phoneNumber,\n+            'is_test_number': isTestNumber,\n           });\n \n           if (!completer.isCompleted) {\n             completer.complete(\n@@ -151,11 +174,16 @@\n           _currentVerificationId.value = verificationId;\n           _resendToken.value = resendToken ?? 0;\n \n           debugPrint('ğŸ“© ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­. ID: $verificationId');\n+          debugPrint(\n+            'ğŸ§ª Ù†ÙˆØ¹ Ø§Ù„Ø±Ù‚Ù…: ${isTestNumber ? \"ØªØ¬Ø±ÙŠØ¨ÙŠ - Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙŠ Firebase Console\" : \"Ø­Ù‚ÙŠÙ‚ÙŠ - Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙØ±Ø³Ù„ Ø¹Ø¨Ø± SMS\"}',\n+          );\n+\n           _logSuccess('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚', {\n             'verification_id': verificationId,\n             'resend_token': resendToken,\n+            'is_test_number': isTestNumber,\n           });\n \n           if (!completer.isCompleted) {\n             completer.complete(\n@@ -168,10 +196,15 @@\n         },\n         codeAutoRetrievalTimeout: (String verificationId) {\n           _currentVerificationId.value = verificationId;\n           debugPrint('â° Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ. ID: $verificationId');\n+          debugPrint(\n+            'ğŸ§ª Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©: Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙŠ Firebase Console',\n+          );\n+\n           _logEvent('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ', {\n             'verification_id': verificationId,\n+            'is_test_number': isTestNumber,\n           });\n         },\n       );\n \n@@ -341,13 +374,19 @@\n   /// ØªØ±Ø¬Ù…Ø© Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¹ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©\n   String _getLocalizedErrorMessage(String errorCode) {\n     switch (errorCode) {\n       case 'invalid-phone-number':\n-        return 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù‚Ù… ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© (+964 Ù„Ù„Ø¹Ø±Ø§Ù‚).';\n+        return '''Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­.\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© (+964 Ù„Ù„Ø¹Ø±Ø§Ù‚)\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø§ÙØ§Øª Ø£Ùˆ Ø±Ù…ÙˆØ² Ø¥Ø¶Ø§ÙÙŠØ©\n+â€¢ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©: ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØªÙ‡Ø§ ÙÙŠ Firebase Console ØªØ­Øª \"Phone numbers for testing\"''';\n       case 'too-many-requests':\n         return 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ${_getWaitTime()} Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.';\n       case 'invalid-verification-code':\n-        return 'Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.';\n+        return '''Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­.\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ØµØ­ÙŠØ­\n+â€¢ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©: Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙŠ Firebase Console\n+â€¢ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©: Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙØ±Ø³Ù„ Ø¹Ø¨Ø± SMS''';\n       case 'session-expired':\n         return 'Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¬Ù„Ø³Ø©. ÙŠØ±Ø¬Ù‰ Ø·Ù„Ø¨ Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯.';\n       case 'quota-exceeded':\n         return 'ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù…Ù† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ØºØ¯Ø§Ù‹.';\n@@ -365,9 +404,11 @@\n         return 'Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.';\n       case 'invalid-app-credential':\n         return 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØºÙŠØ± ØµØ­ÙŠØ­Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n       case 'operation-not-allowed':\n-        return 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± Ù…ÙØ¹Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n+        return '''Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± Ù…ÙØ¹Ù„.\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ Phone Authentication ÙÙŠ Firebase Console\n+â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ³ØªØ®Ø¯Ù… Ø±Ù‚Ù…Ø§Ù‹ ØªØ¬Ø±ÙŠØ¨ÙŠØ§Ù‹''';\n       case 'user-disabled':\n         return 'ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n       default:\n         return 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: $errorCode. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ.';\n@@ -570,8 +611,38 @@\n     _lastRequestedPhone = null;\n     _isRequestInProgress = false;\n     debugPrint('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ø§Øª PhoneAuthService');\n   }\n+\n+  /// ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØªØ¬Ø±ÙŠØ¨ÙŠ\n+  bool _isTestPhoneNumber(String phoneNumber) {\n+    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©\n+    final testPatterns = [\n+      '+1555', // Ø£Ø±Ù‚Ø§Ù… ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø£Ù…Ø±ÙŠÙƒÙŠØ©\n+      '+15005550', // Ø£Ø±Ù‚Ø§Ù… ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø£Ù…Ø±ÙŠÙƒÙŠØ©\n+      '+4474', // Ø£Ø±Ù‚Ø§Ù… ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ©\n+      '+33123456', // Ø£Ø±Ù‚Ø§Ù… ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙØ±Ù†Ø³ÙŠØ©\n+      '+96412345', // Ø£Ø±Ù‚Ø§Ù… ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¹Ø±Ø§Ù‚ÙŠØ©\n+      '+966123', // Ø£Ø±Ù‚Ø§Ù… ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø³Ø¹ÙˆØ¯ÙŠØ©\n+    ];\n+\n+    // ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ø£ÙŠ Ù…Ù† Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n+    for (final pattern in testPatterns) {\n+      if (phoneNumber.startsWith(pattern)) {\n+        return true;\n+      }\n+    }\n+\n+    // ÙØ­Øµ Ø£Ù†Ù…Ø§Ø· Ø£Ø®Ø±Ù‰ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n+    // Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ù†Ù…Ø§Ø· Ù…ØªÙƒØ±Ø±Ø© Ù‚Ø¯ ØªÙƒÙˆÙ† ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n+    if (phoneNumber.contains('123456') ||\n+        phoneNumber.contains('555555') ||\n+        phoneNumber.contains('000000')) {\n+      return true;\n+    }\n+\n+    return false;\n+  }\n }\n \n /// Ù†ØªÙŠØ¬Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\n class PhoneAuthResult {\n"
                }
            ],
            "date": 1752751503159,
            "name": "Commit-0",
            "content": "import 'dart:async';\nimport 'dart:io';\nimport 'package:firebase_auth/firebase_auth.dart';\nimport 'package:get/get.dart';\nimport '../core/error_tracker.dart';\n\n/// Ø®Ø¯Ù…Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\nclass PhoneAuthService extends GetxService {\n  static PhoneAuthService get instance => Get.find<PhoneAuthService>();\n\n  final FirebaseAuth _auth = FirebaseAuth.instance;\n\n  // Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø©\n  final RxBool _isLoading = false.obs;\n  final RxString _currentVerificationId = ''.obs;\n  final RxString _currentPhoneNumber = ''.obs;\n  final RxInt _resendToken = 0.obs;\n\n  // Getters\n  bool get isLoading => _isLoading.value;\n  String get verificationId => _currentVerificationId.value;\n  String get phoneNumber => _currentPhoneNumber.value;\n\n  @override\n  void onInit() {\n    super.onInit();\n    _setupAuthStateListener();\n    ErrorTracker.logEvent(\n      event: 'PhoneAuthService initialized',\n      location: 'PhoneAuthService.onInit',\n    );\n  }\n\n  /// Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\n  void _setupAuthStateListener() {\n    _auth.authStateChanges().listen((User? user) {\n      if (user != null) {\n        ErrorTracker.logSuccess(\n          operation: 'User authenticated',\n          location: 'PhoneAuthService._setupAuthStateListener',\n          data: {'uid': user.uid, 'phone': user.phoneNumber},\n        );\n      }\n    });\n  }\n\n  /// Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n  Future<PhoneAuthResult> sendVerificationCode(String phoneNumber) async {\n    try {\n      _isLoading.value = true;\n      _currentPhoneNumber.value = phoneNumber;\n\n      ErrorTracker.logEvent(\n        event: 'Starting phone verification',\n        location: 'PhoneAuthService.sendVerificationCode',\n        data: {'phone': phoneNumber, 'platform': Platform.operatingSystem},\n      );\n\n      final Completer<PhoneAuthResult> completer = Completer();\n\n      await _auth.verifyPhoneNumber(\n        phoneNumber: phoneNumber,\n        timeout: const Duration(seconds: 60),\n        verificationCompleted: (PhoneAuthCredential credential) async {\n          ErrorTracker.logSuccess(\n            operation: 'Auto verification completed',\n            location: 'PhoneAuthService.verificationCompleted',\n          );\n\n          try {\n            final result = await _signInWithCredential(credential);\n            if (!completer.isCompleted) {\n              completer.complete(\n                PhoneAuthResult.success(\n                  type: PhoneAuthResultType.autoVerified,\n                  credential: credential,\n                  user: result.user,\n                ),\n              );\n            }\n          } catch (e) {\n            ErrorTracker.logError(\n              error: 'Auto sign-in failed: ${e.toString()}',\n              location: 'PhoneAuthService.verificationCompleted',\n              severity: ErrorSeverity.high,\n            );\n            if (!completer.isCompleted) {\n              completer.complete(PhoneAuthResult.error(e.toString()));\n            }\n          }\n        },\n        verificationFailed: (FirebaseAuthException e) {\n          ErrorTracker.logError(\n            error: 'Phone verification failed: ${e.code} - ${e.message}',\n            location: 'PhoneAuthService.verificationFailed',\n            additionalData: {\n              'error_code': e.code,\n              'error_message': e.message,\n              'phone': phoneNumber,\n            },\n            severity: ErrorSeverity.high,\n          );\n\n          if (!completer.isCompleted) {\n            completer.complete(\n              PhoneAuthResult.error(_getLocalizedErrorMessage(e.code)),\n            );\n          }\n        },\n        codeSent: (String verificationId, int? resendToken) {\n          _currentVerificationId.value = verificationId;\n          _resendToken.value = resendToken ?? 0;\n\n          ErrorTracker.logSuccess(\n            operation: 'Verification code sent',\n            location: 'PhoneAuthService.codeSent',\n            data: {\n              'verification_id': verificationId,\n              'resend_token': resendToken,\n            },\n          );\n\n          if (!completer.isCompleted) {\n            completer.complete(\n              PhoneAuthResult.success(\n                type: PhoneAuthResultType.codeSent,\n                verificationId: verificationId,\n              ),\n            );\n          }\n        },\n        codeAutoRetrievalTimeout: (String verificationId) {\n          _currentVerificationId.value = verificationId;\n          ErrorTracker.logEvent(\n            event: 'Code auto-retrieval timeout',\n            location: 'PhoneAuthService.codeAutoRetrievalTimeout',\n            data: {'verification_id': verificationId},\n          );\n        },\n      );\n\n      return completer.future;\n    } catch (e, stackTrace) {\n      ErrorTracker.logError(\n        error: 'Send verification code failed: ${e.toString()}',\n        location: 'PhoneAuthService.sendVerificationCode',\n        stackTrace: stackTrace,\n        additionalData: {'phone': phoneNumber},\n        severity: ErrorSeverity.critical,\n      );\n\n      return PhoneAuthResult.error('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ${e.toString()}');\n    } finally {\n      _isLoading.value = false;\n    }\n  }\n\n  /// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² SMS Ø§Ù„Ù…Ø¯Ø®Ù„\n  Future<PhoneAuthResult> verifyCode(String smsCode) async {\n    try {\n      if (_currentVerificationId.value.isEmpty) {\n        throw Exception('Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø¹Ø¯');\n      }\n\n      _isLoading.value = true;\n\n      ErrorTracker.logEvent(\n        event: 'Verifying SMS code',\n        location: 'PhoneAuthService.verifyCode',\n        data: {'code_length': smsCode.length},\n      );\n\n      final credential = PhoneAuthProvider.credential(\n        verificationId: _currentVerificationId.value,\n        smsCode: smsCode,\n      );\n\n      final result = await _signInWithCredential(credential);\n\n      ErrorTracker.logSuccess(\n        operation: 'SMS code verified successfully',\n        location: 'PhoneAuthService.verifyCode',\n        data: {'uid': result.user?.uid},\n      );\n\n      return PhoneAuthResult.success(\n        type: PhoneAuthResultType.verified,\n        credential: credential,\n        user: result.user,\n      );\n    } on FirebaseAuthException catch (e) {\n      ErrorTracker.logError(\n        error: 'Code verification failed: ${e.code} - ${e.message}',\n        location: 'PhoneAuthService.verifyCode',\n        additionalData: {\n          'error_code': e.code,\n          'error_message': e.message,\n          'code_length': smsCode.length,\n        },\n        severity: ErrorSeverity.medium,\n      );\n\n      return PhoneAuthResult.error(_getLocalizedErrorMessage(e.code));\n    } catch (e, stackTrace) {\n      ErrorTracker.logError(\n        error: 'Verify code failed: ${e.toString()}',\n        location: 'PhoneAuthService.verifyCode',\n        stackTrace: stackTrace,\n        severity: ErrorSeverity.high,\n      );\n\n      return PhoneAuthResult.error('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚: ${e.toString()}');\n    } finally {\n      _isLoading.value = false;\n    }\n  }\n\n  /// Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚\n  Future<PhoneAuthResult> resendCode() async {\n    if (_currentPhoneNumber.value.isEmpty) {\n      return PhoneAuthResult.error('Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');\n    }\n\n    return sendVerificationCode(_currentPhoneNumber.value);\n  }\n\n  /// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯\n  Future<UserCredential> _signInWithCredential(\n    PhoneAuthCredential credential,\n  ) async {\n    return await _auth.signInWithCredential(credential);\n  }\n\n  /// ØªØ±Ø¬Ù…Ø© Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©\n  String _getLocalizedErrorMessage(String errorCode) {\n    switch (errorCode) {\n      case 'invalid-phone-number':\n        return 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù‚Ù….';\n      case 'too-many-requests':\n        return 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.';\n      case 'invalid-verification-code':\n        return 'Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…Ø² ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.';\n      case 'session-expired':\n        return 'Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¬Ù„Ø³Ø©. ÙŠØ±Ø¬Ù‰ Ø·Ù„Ø¨ Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯.';\n      case 'quota-exceeded':\n        return 'ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.';\n      case 'captcha-check-failed':\n        return 'ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';\n      case 'web-context-cancelled':\n        return 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';\n      default:\n        return 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: $errorCode';\n    }\n  }\n\n  /// ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n  void reset() {\n    _currentVerificationId.value = '';\n    _currentPhoneNumber.value = '';\n    _resendToken.value = 0;\n    _isLoading.value = false;\n\n    ErrorTracker.logEvent(\n      event: 'PhoneAuthService reset',\n      location: 'PhoneAuthService.reset',\n    );\n  }\n}\n\n/// Ù†ØªÙŠØ¬Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\nclass PhoneAuthResult {\n  final bool isSuccess;\n  final String? error;\n  final PhoneAuthResultType? type;\n  final String? verificationId;\n  final PhoneAuthCredential? credential;\n  final User? user;\n\n  PhoneAuthResult._({\n    required this.isSuccess,\n    this.error,\n    this.type,\n    this.verificationId,\n    this.credential,\n    this.user,\n  });\n\n  factory PhoneAuthResult.success({\n    required PhoneAuthResultType type,\n    String? verificationId,\n    PhoneAuthCredential? credential,\n    User? user,\n  }) {\n    return PhoneAuthResult._(\n      isSuccess: true,\n      type: type,\n      verificationId: verificationId,\n      credential: credential,\n      user: user,\n    );\n  }\n\n  factory PhoneAuthResult.error(String error) {\n    return PhoneAuthResult._(isSuccess: false, error: error);\n  }\n}\n\n/// Ø£Ù†ÙˆØ§Ø¹ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\nenum PhoneAuthResultType { codeSent, autoVerified, verified }\n"
        }
    ]
}