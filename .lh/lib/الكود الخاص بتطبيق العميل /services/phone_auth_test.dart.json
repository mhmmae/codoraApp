{
    "sourceFile": "lib/Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…ÙŠÙ„ /services/phone_auth_test.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1752837553467,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753097375622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import 'phone_auth_service.dart';\n \n /// ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± PhoneAuthService\n class PhoneAuthTestPage extends StatelessWidget {\n-  const PhoneAuthTestPage({Key? key}) : super(key: key);\n+  const PhoneAuthTestPage({super.key});\n \n   @override\n   Widget build(BuildContext context) {\n     final controller = Get.put(PhoneAuthTestController());\n"
                }
            ],
            "date": 1752837553467,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\nimport 'package:get/get.dart';\nimport 'phone_auth_service.dart';\n\n/// ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± PhoneAuthService\nclass PhoneAuthTestPage extends StatelessWidget {\n  const PhoneAuthTestPage({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    final controller = Get.put(PhoneAuthTestController());\n\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Ø§Ø®ØªØ¨Ø§Ø± Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ'),\n        backgroundColor: Colors.blue,\n        foregroundColor: Colors.white,\n      ),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©\n            Obx(\n              () => Card(\n                child: Padding(\n                  padding: const EdgeInsets.all(16.0),\n                  child: Column(\n                    crossAxisAlignment: CrossAxisAlignment.start,\n                    children: [\n                      Text(\n                        'Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©:',\n                        style: Theme.of(context).textTheme.titleMedium\n                            ?.copyWith(fontWeight: FontWeight.bold),\n                      ),\n                      const SizedBox(height: 8),\n                      Text('ğŸ“Š Ø§Ù„Ø­Ø§Ù„Ø©: ${controller.serviceStatus.value}'),\n                      Text('ğŸ“± Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ: ${controller.currentPhone.value}'),\n                      Text(\n                        'ğŸ”‘ Ù…Ø¹Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚: ${controller.hasVerificationId.value ? \"Ù…ØªÙˆÙØ±\" : \"ØºÙŠØ± Ù…ØªÙˆÙØ±\"}',\n                      ),\n                      Text(\n                        'â±ï¸ Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${controller.isLoading.value ? \"Ù†Ø¹Ù…\" : \"Ù„Ø§\"}',\n                      ),\n                    ],\n                  ),\n                ),\n              ),\n            ),\n\n            const SizedBox(height: 16),\n\n            // Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n            TextField(\n              controller: controller.phoneController,\n              decoration: const InputDecoration(\n                labelText: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©)',\n                hintText: '+9647XXXXXXXX',\n                border: OutlineInputBorder(),\n                prefixIcon: Icon(Icons.phone),\n              ),\n              keyboardType: TextInputType.phone,\n            ),\n\n            const SizedBox(height: 16),\n\n            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±\n            Obx(\n              () => ElevatedButton(\n                onPressed:\n                    controller.isLoading.value ? null : controller.testSendCode,\n                style: ElevatedButton.styleFrom(\n                  backgroundColor: Colors.blue,\n                  foregroundColor: Colors.white,\n                  padding: const EdgeInsets.symmetric(vertical: 12),\n                ),\n                child:\n                    controller.isLoading.value\n                        ? const Row(\n                          mainAxisAlignment: MainAxisAlignment.center,\n                          children: [\n                            SizedBox(\n                              width: 20,\n                              height: 20,\n                              child: CircularProgressIndicator(\n                                strokeWidth: 2,\n                                valueColor: AlwaysStoppedAnimation<Color>(\n                                  Colors.white,\n                                ),\n                              ),\n                            ),\n                            SizedBox(width: 8),\n                            Text('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...'),\n                          ],\n                        )\n                        : const Text('Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚'),\n              ),\n            ),\n\n            const SizedBox(height: 8),\n\n            ElevatedButton(\n              onPressed: controller.testServiceDiagnosis,\n              style: ElevatedButton.styleFrom(\n                backgroundColor: Colors.green,\n                foregroundColor: Colors.white,\n                padding: const EdgeInsets.symmetric(vertical: 12),\n              ),\n              child: const Text('ØªØ´Ø®ÙŠØµ Ø§Ù„Ø®Ø¯Ù…Ø©'),\n            ),\n\n            const SizedBox(height: 8),\n\n            ElevatedButton(\n              onPressed: controller.validatePhoneNumber,\n              style: ElevatedButton.styleFrom(\n                backgroundColor: Colors.orange,\n                foregroundColor: Colors.white,\n                padding: const EdgeInsets.symmetric(vertical: 12),\n              ),\n              child: const Text('ÙØ­Øµ ØµØ­Ø© Ø§Ù„Ø±Ù‚Ù…'),\n            ),\n\n            const SizedBox(height: 16),\n\n            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬\n            Expanded(\n              child: Obx(\n                () => Container(\n                  padding: const EdgeInsets.all(12),\n                  decoration: BoxDecoration(\n                    color: Colors.grey[100],\n                    borderRadius: BorderRadius.circular(8),\n                    border: Border.all(color: Colors.grey[300]!),\n                  ),\n                  child: SingleChildScrollView(\n                    child: Text(\n                      controller.results.value,\n                      style: const TextStyle(\n                        fontFamily: 'monospace',\n                        fontSize: 12,\n                      ),\n                    ),\n                  ),\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n/// Ù…ØªØ­ÙƒÙ… Ø§Ø®ØªØ¨Ø§Ø± PhoneAuthService\nclass PhoneAuthTestController extends GetxController {\n  late PhoneAuthService phoneAuthService;\n\n  final phoneController = TextEditingController();\n  final RxString results = ''.obs;\n  final RxString serviceStatus = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'.obs;\n  final RxString currentPhone = ''.obs;\n  final RxBool hasVerificationId = false.obs;\n  final RxBool isLoading = false.obs;\n\n  @override\n  void onInit() {\n    super.onInit();\n    _initializeService();\n  }\n\n  /// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ø¯Ù…Ø©\n  void _initializeService() {\n    try {\n      phoneAuthService = Get.find<PhoneAuthService>();\n      _addResult('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ PhoneAuthService');\n      _updateServiceStatus();\n    } catch (e) {\n      _addResult('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ PhoneAuthService: $e');\n      try {\n        Get.put(PhoneAuthService(), permanent: true);\n        phoneAuthService = Get.find<PhoneAuthService>();\n        _addResult('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ PhoneAuthService Ø¬Ø¯ÙŠØ¯');\n        _updateServiceStatus();\n      } catch (e2) {\n        _addResult('âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ PhoneAuthService: $e2');\n      }\n    }\n  }\n\n  /// ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©\n  void _updateServiceStatus() {\n    try {\n      serviceStatus.value = phoneAuthService.isLoading ? 'Ù…Ø´ØºÙˆÙ„' : 'Ø¬Ø§Ù‡Ø²';\n      currentPhone.value =\n          phoneAuthService.phoneNumber.isEmpty\n              ? 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'\n              : phoneAuthService.phoneNumber;\n      hasVerificationId.value = phoneAuthService.verificationId.isNotEmpty;\n      isLoading.value = phoneAuthService.isLoading;\n    } catch (e) {\n      _addResult('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©: $e');\n    }\n  }\n\n  /// Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚\n  Future<void> testSendCode() async {\n    final phone = phoneController.text.trim();\n\n    if (phone.isEmpty) {\n      _addResult('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');\n      return;\n    }\n\n    _addResult('\\nğŸš€ Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚...');\n    _addResult('ğŸ“± Ø§Ù„Ø±Ù‚Ù…: $phone');\n\n    try {\n      isLoading.value = true;\n\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ù‚Ù… Ø£ÙˆÙ„Ø§Ù‹\n      final validation = phoneAuthService.validatePhoneNumber(phone);\n      _addResult('ğŸ“ Ù†ØªÙŠØ¬Ø© ÙØ­Øµ Ø§Ù„Ø±Ù‚Ù…: ${validation.toString()}');\n\n      if (validation['is_valid_format'] != true) {\n        _addResult('âŒ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± ØµØ­ÙŠØ­');\n        if (validation['suggestions'] != null) {\n          _addResult('ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª: ${validation['suggestions']}');\n        }\n        return;\n      }\n\n      // Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚\n      _addResult('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚...');\n      final result = await phoneAuthService.sendVerificationCode(phone);\n\n      if (result.isSuccess) {\n        _addResult('âœ… Ù†Ø¬Ø­ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚!');\n        _addResult('ğŸ“© Ù†ÙˆØ¹ Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${result.type}');\n        if (result.verificationId != null) {\n          _addResult('ğŸ”‘ Ù…Ø¹Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚: ${result.verificationId}');\n        }\n      } else {\n        _addResult('âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚: ${result.error}');\n      }\n    } catch (e) {\n      _addResult('ğŸš¨ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: $e');\n    } finally {\n      isLoading.value = false;\n      _updateServiceStatus();\n    }\n  }\n\n  /// ØªØ´Ø®ÙŠØµ Ø§Ù„Ø®Ø¯Ù…Ø©\n  Future<void> testServiceDiagnosis() async {\n    _addResult('\\nğŸ” Ø¨Ø¯Ø¡ ØªØ´Ø®ÙŠØµ Ø§Ù„Ø®Ø¯Ù…Ø©...');\n\n    try {\n      // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø®Ø¯Ù…Ø©\n      phoneAuthService.testService();\n      _addResult('âœ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø®Ø¯Ù…Ø© Ù…ÙƒØªÙ…Ù„');\n\n      // ØªØ´Ø®ÙŠØµ Firebase\n      final diagnosis = await phoneAuthService.diagnoseFirebaseSetup();\n      _addResult('ğŸ“Š ØªØ´Ø®ÙŠØµ Firebase:');\n      diagnosis.forEach((key, value) {\n        _addResult('   $key: $value');\n      });\n\n      // ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø©\n      final report = phoneAuthService.getServiceReport();\n      _addResult('\\nğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø©:');\n      report.forEach((key, value) {\n        _addResult('   $key: $value');\n      });\n    } catch (e) {\n      _addResult('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´Ø®ÙŠØµ: $e');\n    }\n\n    _updateServiceStatus();\n  }\n\n  /// ÙØ­Øµ ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ\n  void validatePhoneNumber() {\n    final phone = phoneController.text.trim();\n\n    if (phone.isEmpty) {\n      _addResult('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø£ÙˆÙ„Ø§Ù‹');\n      return;\n    }\n\n    _addResult('\\nğŸ“ ÙØ­Øµ ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: $phone');\n\n    try {\n      final validation = phoneAuthService.validatePhoneNumber(phone);\n      _addResult('ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ­Øµ:');\n      validation.forEach((key, value) {\n        _addResult('   $key: $value');\n      });\n    } catch (e) {\n      _addResult('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø±Ù‚Ù…: $e');\n    }\n  }\n\n  /// Ø¥Ø¶Ø§ÙØ© Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø³Ø¬Ù„\n  void _addResult(String result) {\n    final timestamp = DateTime.now().toString().substring(11, 19);\n    results.value += '[$timestamp] $result\\n';\n  }\n\n  /// ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø³Ø¬Ù„\n  void clearResults() {\n    results.value = '';\n  }\n\n  @override\n  void onClose() {\n    phoneController.dispose();\n    super.onClose();\n  }\n}\n"
        }
    ]
}