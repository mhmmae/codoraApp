# نظام عرض الفلاتر الجديد

تم إنشاء نظام جديد لعرض جميع الفلاتر المتاحة بشكل مسطح وعشوائي في الصفحة الرئيسية.

## الملفات المضافة

### 1. **FiltersDisplayController**
- المسار: `lib/الكود الخاص بتطبيق العميل /HomePage/controllers/filters_display_controller.dart`
- الوظيفة: كونترولر لإدارة تحميل وعرض جميع الفلاتر المتاحة
- المميزات:
  - تحميل الأقسام الفرعية من Firebase
  - تحميل الشركات والمنتجات الأصلية
  - خلط الفلاتر عشوائياً
  - البحث في الفلاتر
  - إعادة التحميل

### 2. **FiltersDisplayScreen**
- المسار: `lib/الكود الخاص بتطبيق العميل /HomePage/class/FiltersDisplayScreen.dart`
- الوظيفة: صفحة منفصلة لعرض جميع الفلاتر
- المميزات:
  - عرض الفلاتر في شبكة مع صور
  - مؤشرات لنوع كل فلتر (قسم فرعي، شركة، منتج)
  - انيميشن تحميل بتقنية Shimmer
  - حالة فارغة مع إمكانية إعادة المحاولة

### 3. **FilteredProductsScreen**
- المسار: `lib/الكود الخاص بتطبيق العميل /HomePage/class/FilteredProductsScreen.dart`
- الوظيفة: صفحة عرض المنتجات المفلترة حسب الفلتر المحدد
- المميزات:
  - عرض معلومات الفلتر المطبق
  - استخدام نفس widget المنتجات الموجود
  - تحويل مفاتيح الفلاتر لتتوافق مع النظام الحالي

### 4. **FiltersGridWidget**
- المسار: `lib/الكود الخاص بتطبيق العميل /HomePage/class/FiltersGridWidget.dart`
- الوظيفة: ويدجت لعرض الفلاتر بدلاً من المنتجات في الصفحة الرئيسية
- المميزات:
  - عرض مدمج في الصفحة الرئيسية
  - نفس تصميم شبكة المنتجات
  - انتقال سلس بين المنتجات والفلاتر

## التحديثات على الملفات الموجودة

### **HomeScreen** (`home.dart`)
- إضافة إيقونة جديدة في الـ leading للـ AppBar
- إضافة متحكم `showFiltersGrid` للتبديل بين المنتجات والفلاتر
- تحديث منطق عرض المحتوى لدعم الفلاتر
- إضافة tooltip للإيقونة الجديدة

## كيفية الاستخدام

### 1. الإيقونة الجديدة
- توجد في أعلى يسار الصفحة الرئيسية (خارج نظام الإيقونات الموجود)
- أيقونة `grid_view_rounded` للعرض و `grid_off_rounded` للإخفاء
- تتغير حالتها البصرية عند التفعيل/الإلغاء

### 2. عرض الفلاتر
- عند الضغط على الإيقونة، تختفي المنتجات وتظهر الفلاتر
- الفلاتر معروضة بترتيب عشوائي
- كل فلتر يحتوي على:
  - صورة (إن توفرت) أو أيقونة افتراضية
  - اسم الفلتر
  - نوع الفلتر (قسم فرعي، شركة، منتج)
  - اسم الوالد (للمنتجات: اسم الشركة)

### 3. أنواع الفلاتر المدعومة
- **الأقسام الفرعية**: جميع الأقسام الفرعية النشطة
- **الشركات المصنعة**: جميع الشركات النشطة
- **المنتجات الأصلية**: منتجات الشركات المصنعة

### 4. الانتقال للمنتجات
- عند الضغط على فلتر، يتم الانتقال لصفحة منفصلة
- الصفحة تعرض المنتجات المفلترة باستخدام نفس widget المنتجات
- تحتوي على معلومات الفلتر المطبق

## المميزات التقنية

### 1. الأداء
- تحميل كسول للفلاتر (عند أول استخدام)
- استخدام Obx للتحديث التفاعلي
- تحسين استعلامات Firebase

### 2. التصميم
- تصميم متجاوب باستخدام ScreenUtil
- انيميشن سلس للتبديل بين الحالات
- ألوان مختلفة لكل نوع فلتر
- تأثيرات بصرية احترافية

### 3. التوافق
- يحافظ على الفلاتر الموجودة بدون تغيير
- متوافق مع نظام البحث الحالي
- يدعم جميع أنواع الفلاتر الموجودة

## الإعدادات المطلوبة

### Firebase Collections
- `categories`: للأقسام الرئيسية والفرعية
- `brand_companies`: للشركات المصنعة
- `company_products`: لمنتجات الشركات

### الحقول المطلوبة
- الأقسام: `isActive`, `parentId`, `nameAr`, `imageUrl`
- الشركات: `isActive`, `nameAr`, `logoUrl`
- المنتجات: `isActive`, `companyId`, `nameAr`, `imageUrl`

## الملاحظات

1. **الحفاظ على النظام الحالي**: لم يتم تغيير أي من الفلاتر الموجودة
2. **الترتيب العشوائي**: يتم خلط الفلاتر في كل مرة يتم تحميلها
3. **الأداء**: التحميل يحدث مرة واحدة ويتم حفظه في الذاكرة
4. **المرونة**: يمكن إضافة أنواع فلاتر جديدة بسهولة

## التطوير المستقبلي

- إضافة إمكانية البحث في الفلاتر
- إضافة فلاتر حسب نوع المنتج (أصلي/تجاري)
- إضافة إحصائيات لكل فلتر (عدد المنتجات)
- إمكانية ترتيب الفلاتر حسب تفضيلات المستخدم
